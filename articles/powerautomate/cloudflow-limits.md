---
title: Power Automate クラウドフローの制限事項
date: 2024-12-05
tags:
  - Power Automate
  - Cloud flow
---

# はじめに

こんにちは、Power Platform サポートチームの山田です。  
本記事では 下記公開情報でご案内のPower Automate クラウドフローの制限について、
よくお問い合わせいただく制限の詳細をご案内致します。

[自動化フロー、スケジュールされたフロー、インスタント フローの制限事項](https://learn.microsoft.com/ja-jp/power-automate/limits-and-config)

<!-- more -->
# 目次

1. [スループットの制限](#anchor-throughput-limits)
   1. [Power Platform 要求の制限](#anchor-power-platform-request-limits)
      * [5分ごと、および24時間ごとのPower Platform要求](#anchor-power-platform-request-limits-per)
      * [同時発信呼](#anchor-concurrent-outbound-calls)
   1. [ランタイムエンドポイント要求](#anchor-runtime-endpoint-request-limits)
      * [同時着信](#anchor-concurrent-inbound-calls)
      * [5分ごとに通話を読み取る](#anchor-read-calls-per-5-minutes)
      * [5分ごとの Invoke 呼び出し](#anchor-invoke-calls-per-5-minutes)
   1. [コンテンツスループットの制限](#anchor-content-throughput-limit)
1. [要求の制限](#anchor-request-limits)
   1. [タイムアウトの制限](#anchor-timeout)
      * [送信同期要求](#anchor-outbound-synchronous-request)
      * [送信非同期要求](#anchor-outbound-asynchronous-request)
      * [受信要求](#anchor-inbound-request)
   1. [メッセージサイズの制限](#anchor-message-size)
   1. [再試行ポリシー](#anchor-retry-policy)
---  

<a id='anchor-throughput-limits'></a>

# スループットの制限
この項目でご案内する制限は「スループットの制限」に該当いたします。<br>
フロー単位での制限となります。

制限値は、ライセンスに基づくパフォーマンスプロファイルによって決定されます。

制限の解除について、Power Automate のクラウドフローの場合はライセンス割り当て後にフローを再保存することで、新しいライセンスに紐づく制限を適用いたします。<br>
再保存を行わなかった場合は、週に1度のバックグラウンド処理により適用いたします。

<a id='anchor-power-platform-request-limits'></a>

## Power Platform 要求の制限
制限に抵触すると、フローが低速実行（スロットリング状態）となります。<br>
また、低速実行が14日間連続で発生した場合は、クラウドフローは自動でオフとなります。

<a id='anchor-power-platform-request-limits-per'></a>

### 5分ごと、および24時間ごとのPower Platform要求

詳細については下記記事をご参照ください。
[]()

<a id='anchor-concurrent-outbound-calls'></a>

### 同時発信呼
同時発信呼とは、ひとつのフローで同時に実行できるアクション数を指しております。<br>
制限に抵触した場合、フローの実行が失敗します。

例えば、フロー内でアクションが並列に実行されるよう構成されている場合や、
複数のユーザーが同時にフローを実行する場合にこの制限に抵触する可能性が考えられます。

例えば、コンカレンシー制御をオンにして同時実行する処理数を制限することで、同時発信呼の制限に抵触することを回避することができます。

<a id='anchor-runtime-endpoint-request-limits'></a>

## ランタイムエンドポイント要求
ランタイムエンドポイントとは、フロー自体のエンドポイントを指します。 (例: https://prod-00.westus.logic.azure.com:443/)<br>
制限に抵触した場合、フローの実行が失敗します。

例えば、「HTTP要求の受信時」トリガーを使用するフローがある場合、「HTTP POST の URL」に直接POSTリクエストを送信することで、フローを起動することが可能でございます。

![](./cloudflow-limits/http-requestes-recieve.png) 

上記の例のように、フロー実行時のエンドポイントへ (から) の直接のアクセスをランタイムエンドポイント要求と呼びます。<br>
ランタイムエンドポイント要求には3つの制限がございます。
* 同時着信
* 5分ごとに通話を読み取る
* 5分ごとの Invoke 呼び出し

<a id='anchor-concurrent-inbound-calls'></a>

### 同時着信
ひとつのフローのランタイムエンドポイントにて、同時に要求を受け付け可能な数を指します。<br>
例えば、複数ユーザーでボタントリガーのフローを共有しており、1000 名以上のユーザーが同時刻にフローを起動した場合、この制限に抵触いたします。

<a id='anchor-read-calls-per-5-minutes'></a>

### 5分ごとに通話を読み取る
5 分間に実行可能なランタイムエンドポイントへの読み取り要求を指します。<br>
例えば、フローの実行履歴から生の入力や出力を取得する際がこれにあたります。

例として、SharePoint コネクタの複数の項目の取得アクションを実行し、大量のデータを取得した場合、
生の出力データを確認するには、実行履歴詳細ページにて、「クリックしてダウンロードします」リンクをクリックする必要がある場合がございます。<br>
リンクをクリックすると、ランタイムエンドポイントへの要求が実行され、生データをブラウザにて直接確認することが可能となります。
この要求が、ランタイムエンドポイントへの読み取り要求にあたります。

下図は「クリックしてダウンロードします」リンクをクリックした場合の例ですが、URL よりランタイムエンドポイントへの要求が実行されていることがわかります。
![](./cloudflow-limits/read-calls-per-5-minutes.png)

<a id='anchor-invoke-calls-per-5-minutes'></a>

### 5分ごとの Invoke 呼び出し
5 分間に実行可能なランタイムエンドポイントへの呼び出し要求を指します。<br>
例えば、上記にご案内した 「HTTP 要求の受信時」トリガーを呼び出す場合など、フローを起動する操作がこれにあたります。

<a id='anchor-content-throughput-limits'></a>

## コンテンツスループットの制限
コンテンツスループットとは、フロー内の各アクションを実行後の入力および出力のデータサイズを指しております。<br>
単位時間に読み書きできるデータ量の制限となります。

制限に抵触すると、フローが低速実行（スロットリング状態）となります。<br>
また、低速実行が14日間連続で発生した場合は、クラウドフローは自動でオフとなります。

例えば、フロー内で SharePoint コネクタの「項目の取得」アクションが使用された場合、<br>
実行履歴に表示される入力 (SharePoint に対して送信されたアドレスやリスト名など) と出力 (SharePoint から取得した項目の詳細情報) のデータサイズがカウントされます。

対象フローでの、全てのアクションでカウントされる合計サイズによる制限となります。

<a id='anchor-request-limits'></a>

# 要求の制限

単一の発信または着信 HTTP コールの制限になります。

<a id='anchor-timeout'></a>

## タイムアウトの制限
この項目ではタイムアウトとなる制限をご紹介します。

<a id='anchor-outbound-synchronous-request'></a>

###  送信同期要求
制限に抵触した場合、フローの実行が失敗します。

<a id='anchor-outbound-asynchronous-request'></a>

### 送信非同期要求
制限に抵触した場合、フローの実行が失敗します。

<a id='anchor-inbound-request'></a>

### 受信要求
応答アクションが構成されている場合、受信要求120秒の制限Vが適用される場合がございます。
当制限は制限された時間のみ受信要求を待機する動作となります。
制限に抵触した場合、フローの実行が失敗します。

例えば、該当フローの実行開始からカウントし、受信要求の120秒を超えて、応答アクションを実行できない場合、
当フローは、応答アクションで設定したレスポンスではなく、504 Bad Gateway Timeoutを返します。
応答アクションが構成されていないフローの場合は呼び出し元にすぐに202 Acceptedを返します。

<a id='anchor-message-size'></a>

## メッセージサイズの制限
1つのアクションで転送できる、 HTTP要求でやりとり可能メッセージサイズの制限になります。

この制限に達した場合、下記のようなメッセージと共にエラーが発生します。<br>
```
HTTP 要求に失敗しました: 'Cannot write more bytes to the buffer than the configured maximum buffer size: 104857600.'
```

通常は100MBまでとなりますが、下記条件を満たす場合、この制限は1GBとなります。<br>
・アクションがチャンクをサポートしている<br>
・アクションの設定でチャンクを許可している

![](./cloudflow-limits/message-size-with-chunking.png)


<a id='anchor-retry-policy'></a>

## 再試行ポリシー
フローが失敗した場合の再試行数の制限になります。<br>
上限以上の設定は不可となり、フローが保存できません。

再試行ポリシーに「指数関数的な間隔」を設定しますと、設定された最小間隔、最大間隔の間でランダムに再試行が行われます。<br>
例えば、「間隔」に設定した7秒に指数（赤字の部分です）をかけて、以下のように最小間隔と最大間隔を算出します。

最小間隔　～　最大間隔
- 1回目0秒　～7秒（7×0～7×1）
- 2回目7秒　～14秒（7×1～7×2）
- 3回目14秒　～28秒（7×2～7×4）
- 4回目28秒　～56秒（7×4～7×8）
- 5回目56秒　～112秒（7×8～7×16）
- 6回目112秒　～224秒（7×16～7×32）
- 7回目224秒　～448秒（7×32～7×64）

算出された、最小間隔から最大間隔の間のどこかで、処理が再試行されます。<br>
「最小間隔」「最大間隔」はオプション項目となり、設定しない場合は既定値で動作いたします。

「最小間隔」は、再試行させたい最小の間隔を設定します。「5秒」と設定しますと<br>
再試行間隔は「間隔」から算出された最小間隔に関わらず、前の実行から5秒経過後となります。

「最大間隔」は、再試行させたい最大の間隔を設定します。<br>
「1日」と設定しますと、「間隔」から算出された最大間隔に関わらず、1日以内に再試行されます。<br>
「1時間」と設定しますと1時間以内に再試行されます。

既定値
- 最小間隔　–5秒
- 最大間隔　–1日

---

## 補足

本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって若干の UI の遷移など異なる場合があります。その場合は画面の指示に従って進めてください。

