<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Dynamics CRM &amp; Power Platform Support Blog</title>
  
  <subtitle>日本マイクロソフトの Dynamics CRM &amp; Power Platform テクニカル サポート チームより、情報をお届けします！</subtitle>
  <link href="https://jpdynamicscrm.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpdynamicscrm.github.io/blog/"/>
  <updated>2025-05-01T03:35:34.622Z</updated>
  <id>https://jpdynamicscrm.github.io/blog/</id>
  
  <author>
    <name>Japan Dynamics CRM &amp; Power Platform Support Team</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>メールボックスの承認・テストと有効化の自動化について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/EmailEnableAutmation/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/EmailEnableAutmation/</id>
    <published>2025-05-01T03:35:38.242Z</published>
    <updated>2025-05-01T03:35:34.622Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの原です。<br>本記事では Dynamics 365における、メールボックスの承認・テストと有効化の自動化についてご紹介いたします。<br>また、メールボックスの承認・テスト有効化を自動化するための標準機能としてご提供している機能は現段階ではございませんが、代替案がございますので、本記事ではそちらの代替案をご紹介させていただきます。少しでもお客様の業務効率化に繋がりますと幸いです。</p><p>なお、弊社検証環境では下記にご紹介するコマンドにて、電子メールの承認やテストと有効化が実行可能なことを確認しておりますが、下記でご案内いたします Microsoft.Xrm.Data.PowerShell モジュールにつきましては、コミュニティにより<br>提供・メンテナンスされるツールでございますため、本モジュールをご利用いただく中での<br>エラーやご不明点に関しましては弊社からサポートをご提供することがかないません。<br><br>そのため、ご確認いただく中で何か問題があった場合は、基本的には以下の New Issue より、Github 経由で問題を報告いただく必要がございます。<br>予めご了承いただきますようお願いいたします。<br>URL:<a href="https://github.com/seanmcne/Microsoft.Xrm.Data.PowerShell/issues">https://github.com/seanmcne/Microsoft.Xrm.Data.PowerShell/issues</a></p><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>Dynamics 365では、Dynamics 365と Exchange Online の同期を行うことができます。これを行うことで、 Dynamics 365 のレコードから取引先担当者にメールを送信できるようになったり、営業案件のタイムラインで会話を追跡することができるようになります。<br><br>メールボックスを有効化するためには、承認とテストが既定では必須となっております。<br>メールボックスの承認・テストと有効化を手動で行う方法については、<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/connect-exchange-online" target="_blank">Exchange Online への接続</a>をご参照ください。<br></p><p><a id='anchor-powershell'></a></p><h2 id="PowerShell-を使用して実行する"><a href="#PowerShell-を使用して実行する" class="headerlink" title="PowerShell を使用して実行する"></a>PowerShell を使用して実行する</h2><p>メールボックスの承認やテストと有効化は PowerShell で下記コマンドを入力することで実施いただくことが可能です。<br><br>そのため、タスク スケジューラや Power Automate を利用しPowerShell を実行いただくことで、任意のタイミングで自動的にメールボックスの承認やテストと有効化を行うことが可能となります。<br>また、反復処理などで各ユーザーの IDを置き換える処理を実装いただくことで、複数のメールボックスに対して一括でメールボックスの承認やテストと有効化を行うことが可能です。<br>Power Automate を使用して PowerShell を実行する方法に関しては、<br><a href="https://jpdynamicscrm.github.io/blog/powerautomate/Execute-PowerShell/#:~:text=Azure%20%E4%B8%8A%E3%81%A7%20PowerShell%20%E3%82%84%20Python%20%E3%81%AA%E3%81%A9%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E3%81%A7%E3%81%8D%E3%82%8B%E6%A9%9F%E8%83%BD%E3%81%A7%E3%81%99%E3%80%82%20%E3%81%93%E3%81%AE%20Runbook,Forms%20%E3%81%A7%20Microsoft%20365%20%E7%AE%A1%E7%90%86%E3%82%BB%E3%83%B3%E3%82%BF%E3%83%BC%20%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E7%94%B3%E8%AB%8B%E3%82%92%E8%A1%8C%E3%81%84%E3%80%81%E6%89%BF%E8%AA%8D%E3%81%95%E3%82%8C%E3%81%9F%E3%82%89%E3%80%81%20PowerShell%20%E3%81%A7%E3%83%AD%E3%83%BC%E3%83%AB%E4%BB%98%E4%B8%8E%E3%81%99%E3%82%8B" target="_blank" rel="noopener noreferrer"> Power Automateを使用して PowerShell を実行する方法</a><br>をご参照ください。</p><ol><li>管理者として PowerShell を起動します。</li><li>以下のコマンドを実行し、 Microsoft.Xrm.Data.Poweshell のモジュールをダウンロードします。<br><br>Install-Module Microsoft.Xrm.Data.PowerShell -Scope CurrentUser</li><li>以下のコマンドを実行します。<br><br>Import-Module Microsoft.Xrm.Data.Powershell</li><li>   以下のコマンドを実行します。<br><br>Connect-CrmOnlineDiscovery -InteractiveMode</li><li>   PowerShell Interactive Login ウィザードが表示されますので、[Display list of available organizations] にチェックを入れ、[Login]をクリックし、サインインします。</li><li>   インスタンス一覧が出力されますので、当該インスタンスを選択し、[Login] をクリックします。</li><li>   ログイン完了後、以下のコマンドにより指定したユーザーの電子メールの承認が可能です。<br><br>Approve-CrmEmailAddress  -UserId &lt;UserId&gt;</li><li>   また、以下のコマンドによりユーザーのメールボックスに対してメールボックスのテストと有効化を実行することができます。<br><br>Set-CrmUserMailbox -UserId &lt;UserId&gt;  -ScheduleTest</li></ol><h2 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h2><p><strong>メールボックスの承認を不要にする</strong><br><br>メールボックスを有効化するにあたって、メールボックスの承認は、既定では必須となっております。<br><br>ただし、こちらの承認作業は、管理者にて設定を変更いただくことで、要件を削除することが可能となっております。<br><br>詳しい手順につきましては、<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/connect-exchange-online#remove-the-requirement-to-approve-mailboxes" target="_blank">メールボックスを承認するための要件の削除</a>をご参照ください。<br><br><br>また、メールボックスを承認するための要件を削除せずに、自動化をされたい場合は、<a href="#anchor-powershell">  PowerShell を使用して実行する</a>をご検討ください。</p><h2 id="終わりに"><a href="#終わりに" class="headerlink" title="終わりに"></a>終わりに</h2><p>本記事では Dynamics 365における、メールボックスの承認・テストと有効化についてご紹介いたしました。メールボックスを管理する上でのお役に立てましたら幸いです。ご不明な点や、お困りのことなどがございましたら、弊社サポート一同にてお待ち申し上げておりますので、ぜひお気軽にお問合せください。<br><br><br>※本情報の内容（添付文書、リンク先などを含む）は、作成日時点でのものであり、予告なく変更される場合があります。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの原です。&lt;br&gt;本記事では Dynamics 365における、メールボックスの承認・テストと有効化の自動化についてご紹介いたします。&lt;br&gt;また、メールボックスの承認・テスト有効化を自動化するための標準機能としてご提</summary>
      
    
    
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/categories/Dynamics-365/"/>
    
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/tags/Dynamics-365/"/>
    
    <category term="Dynamics" scheme="https://jpdynamicscrm.github.io/blog/tags/Dynamics/"/>
    
    <category term="Environment" scheme="https://jpdynamicscrm.github.io/blog/tags/Environment/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio のエージェントを Teams に公開する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-teams/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-teams/</id>
    <published>2025-04-22T07:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.412Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの竹内です。<br>本記事では Copilot Studio (旧称 Power Virtual Agents) で作成したエージェントを Microsoft Teams (以降 Teams) に公開する方法についてご案内致します。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#1-%E6%A6%82%E8%A6%81">1. 概要</a></li><li><a href="#2-web-%E7%89%88-copilot-studio-%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92-teams-%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する</a><ul><li><a href="#2-1-%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">2-1. エージェントを公開する</a></li><li><a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2. 他のユーザーと共有する</a></li><li><a href="#2-3-teams-%E3%81%A8-microsoft-365-copilot-%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B">2-3. Teams と Microsoft 365 Copilot チャネルに接続する</a></li><li><a href="#2-4-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-4. 他のユーザーが Teams でエージェントを利用する</a><ul><li><a href="#2-4-1-%E3%83%AA%E3%83%B3%E3%82%AF%E3%81%AE%E5%85%B1%E6%9C%89">2-4-1. リンクの共有</a></li><li><a href="#2-4-2-teams-%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B9%E3%83%88%E3%82%A2%E3%81%AB%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">2-4-2. Teams アプリストアに公開する</a></li><li><a href="#2-4-3-zip-%E3%81%A8%E3%81%97%E3%81%A6%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89">2-4-3. zip としてダウンロード・アップロード</a></li></ul></li><li><a href="#2-5-teams-%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AB%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B">2-5. Teams チームにエージェントをインストールする</a></li></ul></li><li><a href="#3-teams-%E7%89%88-copilot-studio-%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92-teams-%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する</a><ul><li><a href="#3-1-%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B">3-1. エージェントを公開する</a></li><li><a href="#3-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">3-2. 他のユーザーと共有する</a></li><li><a href="#3-3-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">3-3. 他のユーザーが Teams でエージェントを利用する</a></li></ul></li><li><a href="#%E8%A3%9C%E8%B6%B3">補足</a></li></ul><p><a id='1-概要'></a></p><h1 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h1><p>今回はよくあるお問い合わせとして、Copilot Studio で作成したエージェントを Teams に公開する方法についてご案内いたします。<br>この方法では Copilot Studio の設定だけでなく、Teams 管理センターなどの設定も必要となります。<br>そのため、一部 Teams 管理センターにアクセスできる権限がある管理者にてご実行いただく必要がある操作もございますので、ご留意ください。<br>※本稿では Microsoft 365 Copilot への公開方法・ご利用方法については扱わず、 Teams でのご利用方法についてご案内いたします。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Teams 管理者様がご確認ください&gt;</p><p>Teams 管理センターでアクセス許可ポリシーを設定している場合、事前にカスタムアプリのアクセスを許可するようポリシーを設定する必要がございます。</p><p>本記事執筆時点で、アクセス許可ポリシーからアプリ中心の管理への移行が推奨されておりますので、本記事では詳細は割愛します。</p><p>アクセス許可ポリシーの設定方法等については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/teams-app-permission-policies">Microsoft Teams のアプリのアクセス許可ポリシーを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><p><a id='2-web-版-copilot-studio-で作成したエージェントを-teams-で利用する'></a></p><h1 id="2-Web-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する"><a href="#2-Web-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する" class="headerlink" title="2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する"></a>2. Web 版 Copilot Studio で作成したエージェントを Teams で利用する</h1><p><img src="/blog/copilotstudio/copilot-studio-teams/web_copilot_studio_overview.png">  </p><p>※Dataverse for Teams 環境のボットを Web 版で作成することはサポートされていません。  </p><p><a id='2-1-エージェントを公開する'></a></p><h2 id="2-1-エージェントを公開する"><a href="#2-1-エージェントを公開する" class="headerlink" title="2-1. エージェントを公開する"></a>2-1. エージェントを公開する</h2><p>  エージェントを作成、編集した場合、そのエージェントを他の人が使えるようにするため、まずは公開する必要があります。<br>  作成、編集したエージェントを開き、画面右上の「公開」ボタンよりエージェントを公開してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/publish.png">  </p><p>  下記のようなロード画面が表示され、しばらくすると公開が完了します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/publishing.png">  </p><p><a id='2-2-他のユーザーと共有する'></a></p><h2 id="2-2-他のユーザーと共有する"><a href="#2-2-他のユーザーと共有する" class="headerlink" title="2-2. 他のユーザーと共有する"></a>2-2. 他のユーザーと共有する</h2><p>  作成したエージェントを、他のユーザーが利用できるようにします。<br>  他のユーザーとエージェントを共有するには 2 つの方法がございます。  </p><ol><li>セキュリティグループ、組織に利用者として共有する（エージェントと会話するユーザーとして）（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#share-an-agent-for-chat">設定方法はこちら</a>）<div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>利用者としてエージェントを共有する場合、利用者のユーザーは Power Platform 環境のメンバーである必要はありません。</p><p>また、セキュリティロールを割り当てる必要もありません。</p><p>ただし、エージェントを通して環境内のデータやその他データソースへアクセスする場合には、別途データソースへのアクセス権限をユーザーに割り当てる必要があります。</p><p>一方、エージェントにナレッジとして直接追加されたファイルへアクセスする際には、アクセス権限やセキュリティロールを割り当てる必要はありません。  </p></div></li><li>ユーザーに共同編集者として共有する（エージェントと会話、およびエージェントを編集、管理するユーザーとして）（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#share-an-agent-for-collaborative-authoring">設定方法はこちら</a>）  <div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>共同編集者としてエージェントを共有する場合、共有先のユーザーは環境のメンバーであり、環境作成者以上のセキュリティロールを持っている必要があります。</p><p>詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=web#insufficient-environment-permissions">他のユーザーとエージェントを共有する - Microsoft Copilot Studio | Microsoft Learn</a></p></div></li></ol><p><a id='2-3-teams-チャネルに接続する'></a></p><h2 id="2-3-Teams-と-Microsoft-365-Copilot-チャネルに接続する"><a href="#2-3-Teams-と-Microsoft-365-Copilot-チャネルに接続する" class="headerlink" title="2-3. Teams と Microsoft 365 Copilot チャネルに接続する"></a>2-3. Teams と Microsoft 365 Copilot チャネルに接続する</h2><p>  次に、公開したエージェントを Teams で使えるようにするため、Teams と Microsoft 365 Copilot チャネルと接続します。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>&lt;Teams管理者様がご確認ください&gt;</p><p>Teams でエージェントを利用するためには、Teams 管理センターからカスタムアプリの使用を許可する必要があります。</p><p>具体的な設定方法は下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/manage-power-platform-apps">Microsoft Teams 管理センターで Microsoft Power Platform アプリを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>Power Platform 管理センターより Teams チャネルへの接続を許可するよう DLP を設定しておく必要があります。</p><p>下記の「Microsoft Teams + M365 Channel in Copilot Studio」のコネクタを許可してください。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/DLP_teams_m365_channel.png"></p><p>なお、Copilot Studio に関する DLP の詳細については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-data-loss-prevention#copilot-studio-connectors">エージェントのデータ損失防止ポリシーを構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p></div><p>  該当のエージェントを開き、画面上部の「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/select_channel.png">  </p><p>  チャネルが追加されると下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_preview.png">  </p><p>  「詳細の編集」より Teams に公開する際のエージェントの外観等を編集することが可能です。<br>  また、エージェントを Teams チームに追加することの許可などもここから可能です。<br>  エージェントを Teams チームに追加する詳細については、<a href="#2-5-teams-%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AB%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B">2-5 項</a>で後述します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_edit_detail.png">    </p><p>  「Teams で エージェント を表示する」を選択すると、Teams が開き、下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">    </p><p>  「追加」を選択することで、Teams でエージェントを利用することが可能になります。<br>  ここまでの操作で、編集権限を持つユーザーだけが Teams で該当エージェントを使える状態となります。</p><div class="alert is-warning"><p class="alert-title">警告</p><p>Teams 管理センターの設定が適切に行われていない場合、下画像のようなエラーが表示されることがあります。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/error_not_found.png"></p><p>&lt;Teams管理者様がご確認ください&gt;</p><p>Teams 管理センターの設定をご確認ください。</p><p>具体的な設定方法は下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoftteams/manage-power-platform-apps">Microsoft Teams 管理センターで Microsoft Power Platform アプリを管理する - Microsoft Teams | Microsoft Learn</a>  </p></div><p><a id='2-4-他のユーザーが-teams-でエージェントを利用する'></a></p><h2 id="2-4-他のユーザーが-Teams-でエージェントを利用する"><a href="#2-4-他のユーザーが-Teams-でエージェントを利用する" class="headerlink" title="2-4. 他のユーザーが Teams でエージェントを利用する"></a>2-4. 他のユーザーが Teams でエージェントを利用する</h2><p>  他のユーザーが Teams でこのエージェントと会話したり、エージェントにアクセスしたりできるようにするには、対象エージェントを他のユーザーが Teams で追加登録できるようにする作業が必要となります。<br>  その追加登録を可能にするための作業として、主に 3 つの方法があります。  </p><ol><li>リンクの共有</li><li>Teams アプリストアに公開する</li><li>zip としてダウンロード・アップロード</li></ol><p>  Copilot Studio 「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」を選択すると、下記の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_preview.png">  </p><p>  他のユーザーがこのエージェントを利用できるようにするには、「可用性オプション」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_availability.png">  </p><p>  以降、3 つの方法それぞれの手順等について説明します。  </p><p><a id='2-4-1-リンクの共有'></a></p><h3 id="2-4-1-リンクの共有"><a href="#2-4-1-リンクの共有" class="headerlink" title="2-4-1. リンクの共有"></a>2-4-1. リンクの共有</h3><p>  まず、リンクの共有によって共有する方法です。<br>  この方法は事前に共有したいユーザーを入れたセキュリティグループに、エージェント自体を共有しておく必要があります。<br>  共有の方法については <a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2 項</a> をご参照ください。  </p><p>  下記の画面で「リンクのコピー」を選択します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/share_link.png">  </p><p>  すると、クリップボートに Teams でエージェントを利用するための URL がコピーされます。<br>  エージェントにアクセス権がある他ユーザーがその URL を入力すると、下記画面が表示されます。<br>  「追加」を選択することで、Teams でエージェントを利用することが可能となります。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">  </p><p>  この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#share-a-link-so-others-can-install-a-copilot">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><div class="alert is-warning"><p class="alert-title">警告</p><p>エージェントが共有されていないユーザーが、リンクにアクセスした場合、下画像のエラーが表示されます。</p><p><img src="/blog/copilotstudio/copilot-studio-teams/error_not_found.png"></p><p><a href="#2-2-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B">2-2 項</a> をご参照のうえ、適切にエージェントが共有されいているかご確認ください。  </p></div><p><a id='2-4-2-teams-アプリストアに公開する'></a></p><h3 id="2-4-2-Teams-アプリストアに公開する"><a href="#2-4-2-Teams-アプリストアに公開する" class="headerlink" title="2-4-2. Teams アプリストアに公開する"></a>2-4-2. Teams アプリストアに公開する</h3><p>  次に、Teams アプリストアに公開する方法です。<br>  ※Teams チャネルに接続して公開する場合、Microsoft 認証 (Entra ID 認証) を利用していないと Teams アプリストアに表示できません。  </p><p>  Teams アプリストアに公開するには下記の二つの公開範囲別の方法があります。<br>  ご要件の公開範囲に応じた設定を行ってください。  </p><ol><li>共有ユーザーに表示する（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-to-shared-users">設定方法はこちら</a>）</li><li>組織に表示する（<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-to-the-organization">設定方法はこちら</a>）</li></ol><p>  なお、この手順全体の詳細については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#show-an-agent-in-the-teams-app-store">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><p>  <img src="/blog/copilotstudio/copilot-studio-teams/show_in_teams_app_store.png">  </p><p><a id='2-4-3-zip-としてダウンロードアップロード'></a></p><h3 id="2-4-3-zip-としてダウンロード・アップロード"><a href="#2-4-3-zip-としてダウンロード・アップロード" class="headerlink" title="2-4-3. zip としてダウンロード・アップロード"></a>2-4-3. zip としてダウンロード・アップロード</h3><p>  この方法は .zip ファイルとしてエージェントをダウンロードし、直接マニフェストファイルを編集したり、他ユーザーと共有してアップロードする方法となります。</p><p>  ダウンロードするには、下記の画面で「.zip のダウンロード」を選択します。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/download_upload_zip.png">  </p><p>  ダウンロードしたファイルを Teams にアップロードして利用する方法については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoftteams/platform/concepts/deploy-and-publish/apps-upload">カスタム アプリをアップロードする - Teams | Microsoft Learn</a></p><p>  なお、この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#download-the-teams-app-manifest-for-an-agent-advanced">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><p><a id='2-5-teams-チームにエージェントをインストールする'></a></p><h2 id="2-5-Teams-チームにエージェントをインストールする"><a href="#2-5-Teams-チームにエージェントをインストールする" class="headerlink" title="2-5. Teams チームにエージェントをインストールする"></a>2-5. Teams チームにエージェントをインストールする</h2><p>  Teams 内のチームにエージェントをインストールし、チームの他のメンバーがエージェントを利用できるように設定することができます。  </p><p>  Copilot Studio 「チャネル」タブより「Microsoft Teams と Microsoft 365 Copilot」を選択すると、下記の画面が表示されますので、「詳細の編集」をご選択ください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/edit_detail.png">  </p><p>  「ユーザーはこの エージェント をチームに追加できます」のチェックボックスを埋めてください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/add_to_team.png">  </p><p>  上記の設定を行っている状態で、リンクの共有、または Teams アプリストアに公開を経由し、下記の「追加」ボタンを選択してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_add.png">   </p><p>  すると、下記のように、Teams で開くか、特定のチームを選択してエージェントをインストールするか、選択が可能となります。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/select_install_team.png">  </p><p>  チームにエージェントをインストールする場合、インストール先のチームを選択し、インストールしてください。</p><p>  なお、この方法の詳細については下記の公開情報も合わせてご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/publication-add-bot-to-microsoft-teams#allow-users-to-add-an-agent-to-a-team-in-teams">Teams と Microsoft 365 Copilot 向けのエージェントを接続し、構成する - Microsoft Copilot Studio | Microsoft Learn</a></p><p><a id='3-teams-版-copilot-studio-で作成したエージェントを-teams-で利用する'></a></p><h1 id="3-Teams-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する"><a href="#3-Teams-版-Copilot-Studio-で作成したエージェントを-Teams-で利用する" class="headerlink" title="3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する"></a>3. Teams 版 Copilot Studio で作成したエージェントを Teams で利用する</h1><p><img src="/blog/copilotstudio/copilot-studio-teams/teams_copilot_studio_overview.png">  </p><div class="alert is-info"><p class="alert-title">Note</p><p>Dataverse for Teams 環境にCopilotを作成します。</p><p><a href="https://jpdynamicscrm.github.io/blog/powerplatform/Manage-Dataverse-for-Teams/">Dataverse for Teams 環境の管理方法 | Japan Dynamics CRM &amp; Power Platform Support Blog</a></p><p>※作成されるのはクラシックボットで、Web版で作成されるボットと機能が異なります。  </p></div><p><a id='3-1-エージェントを公開する'></a></p><h2 id="3-1-エージェントを公開する"><a href="#3-1-エージェントを公開する" class="headerlink" title="3-1. エージェントを公開する"></a>3-1. エージェントを公開する</h2><p>  エージェントを作成、編集した場合、そのエージェントを他の人が使えるようにするため、まずは公開する必要があります。<br>  作成、編集したエージェントを開き、「公開」メニューより「公開」ボタンを選択し、エージェントを公開してください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_publish.png">  </p><p><a id='3-2-他のユーザーと共有する'></a></p><h2 id="3-2-他のユーザーと共有する"><a href="#3-2-他のユーザーと共有する" class="headerlink" title="3-2. 他のユーザーと共有する"></a>3-2. 他のユーザーと共有する</h2><p>  作成したエージェントを、他のユーザーがで利用できるようにします。<br>  Web 版と同様に、他のユーザーとエージェントを共有するには 2 つの方法がございます。  </p><ol><li>セキュリティグループに利用者として共有する（エージェントと会話するユーザーとして）</li><li>ユーザーに共同編集者として共有する（エージェントと会話、およびエージェントを編集、管理するユーザーとして）</li></ol><p>  手順の詳細等については下記の公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/admin-share-bots?tabs=teams">他のユーザーとエージェントを共有する - Microsoft Copilot Studio | Microsoft Learn</a>  </p><div class="alert is-info"><p class="alert-title">Note</p><p>&lt;Power Platform 管理者様がご確認ください&gt;</p><p>利用者としてエージェントを共有する場合、利用者のユーザーは Power Platform 環境のメンバーである必要はありません。</p><p>また、セキュリティロールを割り当てる必要もありません。</p><p>ただし、エージェントのナレッジソースを通して環境内のデータやその他データソースへアクセスする場合には、別途データソースへのアクセス権限をユーザーに割り当てる必要があります。</p><p>一方、エージェントにナレッジとして直接追加されたファイルへアクセスする際には、セキュリティロールを割り当てる必要はありません。</p></div><p><a id='3-3-他のユーザーが-teams-でエージェントを利用する'></a></p><h2 id="3-3-他のユーザーが-Teams-でエージェントを利用する"><a href="#3-3-他のユーザーが-Teams-でエージェントを利用する" class="headerlink" title="3-3. 他のユーザーが Teams でエージェントを利用する"></a>3-3. 他のユーザーが Teams でエージェントを利用する</h2><p>  Web 版 Copilot Studio でエージェントを公開した直後や、下記の画面で「このエージェントの使用を他のユーザーに許可する」を選択すると、次の画面が表示されます。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_allow_setting.png">  </p><p>  <a href="#2-4-%E4%BB%96%E3%81%AE%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C-teams-%E3%81%A7%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-4 項</a>で説明した画面と同様の画面となります。<br>  それ以降の公開範囲に応じて、Web 版と同様の設定を行ってください。<br>  <img src="/blog/copilotstudio/copilot-studio-teams/teams_agent_menu.png">  </p><hr><p><a id='補足'></a></p><h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって UI の遷移などが若干異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの竹内です。&lt;br&gt;本記事では Copilot Studio (旧称 Power Virtual Agents) で作成したエージェントを Microsoft Teams (以降 Teams) に公開する方法についてご案内致します。&lt;/p&gt;</summary>
    
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/categories/Microsoft-Copilot-Studio/"/>
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Copilot-Studio/"/>
    
    <category term="Power Virtual Agents" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Virtual-Agents/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Microsoft Teams 連携" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Teams-%E9%80%A3%E6%90%BA/"/>
    
  </entry>
  
  <entry>
    <title>サポート インスタンスの提供</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Provide-Support-Instance/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Provide-Support-Instance/</id>
    <published>2025-03-28T08:30:00.000Z</published>
    <updated>2025-05-01T03:35:34.629Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの鎌田です。</p><p>本記事では当社サポート サービスでお問い合わせいただいたお客様に向けてご案内しておりますサポート インスタンスを紹介します。</p><h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>サポート インスタンスは、当社エンジニアがお客様の問題を再現させて調査することを目的とした環境です。<br><br>サポート インスタンスへお客様の事象が発生している環境をコピーしていただくことで、事象の再現と調査を一貫して行うことが可能となり、早期解決が見込めます。<br><br>当社エンジニアがサポート インスタンスを利用した調査が有効であると判断した場合、お客様にサポート インスタンスの作成について可否を伺います。ご了承いただける場合は、以下に一連の流れをご案内いたしますので、ご確認お願いいたします。</p><div class="alert is-important"><p class="alert-title">重要</p><p>お客様のテナントにサポート インスタンス (新しい環境) が作成されますが、お客様のテナントのストレージ容量には影響ございません。</p></div><hr><ol><li><a href="#anchor-about-criteria">サポート インスタンス作成条件の確認</a></li><li><a href="#anchor-about-information">情報の提供</a></li><li><a href="#anchor-create-instance">サポート インスタンスの作成</a>（当社の作業）</li><li><a href="#anchor-about-copy">サポート インスタンスへの環境のコピー</a></li></ol><hr><p><a id='anchor-about-criteria'></a></p><h2 id="1-サポート-インスタンス作成条件の確認"><a href="#1-サポート-インスタンス作成条件の確認" class="headerlink" title="1. サポート インスタンス作成条件の確認"></a>1. サポート インスタンス作成条件の確認</h2><p>サポート インスタンスを作成するために、次の全ての条件を満たす必要がございます。</p><ul><li>お問い合わせ起票者が、事象発生環境にて、システム管理者のセキュリティ ロールであること</li><li>お問い合わせにて、サポート インスタンス作成の同意レベルが、次のいずれかに設定されていること<ul><li>診断情報へのアクセスで <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copy-over-customizations-and-schemas-only">最小限のコピー</a> を許可する</li><li>診断情報へのアクセスで <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copy-over-everything">完全なコピー</a> を許可する</li></ul></li></ul><p>同意レベルが異なる場合 <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-environment#how-do-i-grant-or-revoke-consent-after-i-create-a-support-request">サポート リクエストを作成した後、同意を付与または取り消すにはどうすればよいですか?</a> を参考に、同意レベルを設定ください。<br><img src="/blog/powerplatform/Provide-Support-Instance/consent.png"></p><div class="alert is-info"><p class="alert-title">Note</p><p>上記の同意レベルが表示されない場合は、当社にて同意レベルの変更を代理で実施することも可能です。</p><p>その場合、作業の同意として以下の項目について記載の上ご共有いただきますようお願いいたします。</p><p>作業完了まで 1、2 営業日ほどお時間いただく場合がございますので予めご了承ください。</p><p>・事象発生環境 URL（*.crm*.dynamics.com）</p><p>・貴社名</p><p>・エンドユーザー企業名</p><p>・同意レベル（完全コピー or 最小コピー）</p></div><p><a id='anchor-about-information'></a></p><h2 id="2-情報の提供"><a href="#2-情報の提供" class="headerlink" title="2. 情報の提供"></a>2. 情報の提供</h2><p>ステップ 1 の条件を満たした後、サポート インスタンス作成のため、当社サポート エンジニアへ <strong>事象発生環境 URL (*.crm*.dynamics.com)</strong> をご提供ください。</p><p><a id='anchor-create-instance'></a></p><h2 id="3-サポート-インスタンスの作成（当社の作業）"><a href="#3-サポート-インスタンスの作成（当社の作業）" class="headerlink" title="3. サポート インスタンスの作成（当社の作業）"></a>3. サポート インスタンスの作成（当社の作業）</h2><p>ステップ 2 の情報をもとに、当社にてサポート インスタンスを作成いたします。<br><br>お客様テナント内に作成したサポート インスタンスの環境名をご連絡いたしますので、ステップ 4 以降の環境のコピーを実施ください。</p><p><a id='anchor-about-copy'></a></p><h2 id="4-サポート-インスタンスへの環境のコピー"><a href="#4-サポート-インスタンスへの環境のコピー" class="headerlink" title="4. サポート インスタンスへの環境のコピー"></a>4. サポート インスタンスへの環境のコピー</h2><p>以下の手順で、事象発生中の環境をサポート インスタンスへのコピーをお願いいたします。</p><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> へアクセス</li><li>環境一覧より、事象が発生中の環境を選択して開く</li><li>上部リボンの [コピー] をクリック<br><img src="/blog/powerplatform/Provide-Support-Instance/copy_button.png"></li><li>下図のように、[上書きコピー] と [上書きするターゲット環境を選択] を設定してコピーを実施 (グローバル管理者、Power Platform 管理者等が付与されておらずサポート インスタンスが表示されない場合は、下記の対処策をご確認下さい)<br><img src="/blog/powerplatform/Provide-Support-Instance/copy_support_instance.png"></li><li>コピーが完了したら担当エンジニアまで完了の旨をご連絡ください</li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>ターゲット環境の検索は Ctrl + F が便利です。</p><p>監査ログをコピーすると、環境のコピーにかかる時間が大幅に長くなる可能性があり、既定では実行されません。当社エンジニアから監査ログのコピーを依頼された場合は [監査ログ] の箇所を「はい」にご設定ください。</p></div><div class="alert is-important"><p class="alert-title">重要</p><p>コピーを実施するユーザーにグローバル管理者、Power Platform 管理者等が付与されていない場合、サポート インスタンス検索してもターゲット環境として表示されません。</p><p>当社側でコピーを実施するユーザーに管理者ロールを付与することで環境が表示されるようになります。</p><p></p><p>これを実施するため、まずエンジニアから共有された環境 URL に一度アクセスし、環境を開けない旨が表示されることを確認します。</p><p>この操作により、当該ユーザーがサポート インスタンスにプロビジョニングされます。</p><p></p><p>ここまで操作が完了したら、担当エンジニアへ当該ユーザーの UPN をお伝えください。管理者ロールが付与されたという連絡を受けたら、サポート インスタンスを表示できるようになっているため、再度コピー操作の実施をお願いいたします。</p></div><div class="alert is-info"><p class="alert-title">Note</p><p>UPN は Power Platform 管理センター &gt; 環境 &gt; 設定 &gt; ユーザー のユーザー名よりご確認いただけます。</p><p><img src="/blog/powerplatform/Provide-Support-Instance/upn.png"></p></div><h2 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h2><table><thead><tr><th>リンク</th><th>内容</th></tr></thead><tbody><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/support-environment#what-are-support-environments">サポート環境とは</a></td><td>サポート インスタンス全般の解説をしております。</td></tr><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment">環境のコピー</a></td><td>完全コピー (すべて) や最小限のコピー (カスタマイズとスキーマのみ) について解説をしております。</td></tr><tr><td><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/copy-environment#copying-audit-logs">監査ログのコピー</a></td><td>環境コピー時に監査ログをコピーする手順について解説をしております。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの鎌田です。&lt;/p&gt;
&lt;p&gt;本記事では当社サポート サービスでお問い合わせいただいたお客様に向けてご案内しておりますサポート インスタンスを紹介します。&lt;/p&gt;
&lt;h2 id=&quot;概要&quot;&gt;&lt;a href=&quot;#概要&quot; cl</summary>
      
    
    
    
    <category term="Dynamics 365" scheme="https://jpdynamicscrm.github.io/blog/categories/Dynamics-365/"/>
    
    <category term="サポートサービスのご利用について" scheme="https://jpdynamicscrm.github.io/blog/categories/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E3%81%94%E5%88%A9%E7%94%A8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/"/>
    
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="Environment" scheme="https://jpdynamicscrm.github.io/blog/tags/Environment/"/>
    
    <category term="サポート" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate のクラウドフロー一覧を管理者が取得する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/list-cloud-flow/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/list-cloud-flow/</id>
    <published>2025-03-11T03:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.517Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの竹内です。<br>本記事では、Power Automate のクラウドフローをテナント全体で効率的に管理するために、フローの一覧を取得する 3 つの方法を詳しくご案内します。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#1-%E6%A6%82%E8%A6%81">1. 概要</a></li><li><a href="#2-%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89%E3%83%95%E3%83%AD%E3%83%BC%E3%81%AE%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95">2. クラウドフローの一覧を取得する方法</a><ul><li><a href="#2-1-%E3%83%86%E3%83%8A%E3%83%B3%E3%83%88%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E5%88%86%E6%9E%90%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-1. テナントレベルの分析を利用する</a></li><li><a href="#2-2-powershell-%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-2. PowerShell を利用する</a></li><li><a href="#2-3-power-automate-management-%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BF%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B">2-3. Power Automate Management コネクタを利用する</a></li></ul></li><li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li></ul><p><a id='1-概要'></a></p><h1 id="1-概要"><a href="#1-概要" class="headerlink" title="1. 概要"></a>1. 概要</h1><p>Power Automate をご利用いただく際、管理者がテナント内で作成されたすべてのクラウドフローを把握することについて多くお問い合わせを頂いております。<br>本記事では、テナント全体のフローを一元的に把握するための具体的な方法を解説します。<br>なお、本記事は管理者 (グローバル管理者、Power Platform 管理者) が実行することを想定しております。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>本記事で紹介しているサンプルコードをご利用いただく際には、本記事末尾に記載のある免責事項を先にご確認ください。    </p></div><p><a id='2-クラウドフローの一覧を取得する方法'></a></p><h1 id="2-クラウドフローの一覧を取得する方法"><a href="#2-クラウドフローの一覧を取得する方法" class="headerlink" title="2. クラウドフローの一覧を取得する方法"></a>2. クラウドフローの一覧を取得する方法</h1><p>本記事では、クラウドフローの一覧を取得する具体的な方法として以下の3つを説明します。</p><ul><li>テナントレベル分析</li><li>PowerShell スクリプト</li><li>Power Automate Management コネクタ</li></ul><p><a id='2-1-テナントレベルの分析を利用する'></a></p><h2 id="2-1-テナントレベルの分析を利用する"><a href="#2-1-テナントレベルの分析を利用する" class="headerlink" title="2-1. テナントレベルの分析を利用する"></a>2-1. テナントレベルの分析を利用する</h2><div class="alert is-important"><p class="alert-title">重要</p><p>この方法は事前にテナントレベルの分析を有効にする必要がございます。</p><p>有効にする方法については下記の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/tenant-level-analytics#how-do-i-enable-tenant-level-analytics">テナント レベルでの分析 - Power Platform | Microsoft Learn</a></p></div><div class="alert is-info"><p class="alert-title">Note</p><p>この方法は削除済みのフローを取得することはできません。  </p></div><ol><li><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター</a> にサインインします。</li><li>左側メニューの [分析] &gt; [Power Automate] を選択します。</li><li>表示されるダッシュボードからフローの使用状況や一覧を確認できます。</li><li>特にテナント内のフロー一覧を取得する場合、[概要] &gt; [在庫] タブをご確認ください。</li></ol><p><img src="/blog/powerautomate/list-cloud-flow/inventory_report.png">  </p><p>テナントレベルの分析の詳細については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-analytics-reports">Power Automate のテナント レベルの分析 - Power Platform | Microsoft Learn</a>  </p><p><a id='2-2-powershellを利用する'></a></p><h2 id="2-2-PowerShell-を利用する"><a href="#2-2-PowerShell-を利用する" class="headerlink" title="2-2. PowerShell を利用する"></a>2-2. PowerShell を利用する</h2><p>PowerShellを使用すると、詳細なフロー情報をCSV形式でエクスポートし、分析に役立てることができます。</p><ol><li>PowerShell を管理者権限で開きます。</li><li>以下のコマンドを順番に実行します。</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> <span class="literal">-Name</span> Microsoft.PowerApps.Administration.PowerShell</span><br><span class="line"><span class="built_in">Add-PowerAppsAccount</span> <span class="comment"># ここで管理者アカウントでログインしてください。</span></span><br><span class="line"><span class="built_in">Get-AdminFlow</span> | <span class="built_in">Export-Csv</span> <span class="literal">-Path</span> <span class="string">&quot;flows.csv&quot;</span> <span class="literal">-Encoding</span> UTF8</span><br></pre></td></tr></table></figure><p>実行後に生成された <code>flows.csv</code> ファイルを利用し、フローの詳細を把握できます。<br>CSVファイルには作成者、フロー名、作成日などの詳細な情報が含まれています。<br><img src="/blog/powerautomate/list-cloud-flow/powershell_export_csv.png">  </p><blockquote><p>[!Note]<br>Power Platform の PowerShell コマンド実行についての詳細は下記の情報をご確認ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell#module-installation-and-sign-in">Power Apps と Power Automate の PowerShell サポート - Power Platform | Microsoft Learn</a><br>また、フロー一覧を取得するコマンドの詳細については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/get-adminflow?view=pa-ps-latest">Get-AdminFlow (Microsoft.PowerApps.Administration.PowerShell) | Microsoft Learn</a>  </p></blockquote><div class="alert is-info"><p class="alert-title">Note</p><p>この方法は削除後 28 日以内のフローを取得することができます。  </p></div><p>各フローの詳細な情報の取得がご入用である場合、下記のコマンドに対象のフローの FlowName と、そのフローが存在する環境の EnvironmentName を代入の上、実行してください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-AdminFlow</span> <span class="literal">-FlowName</span> *&lt;FlowName&gt;* <span class="literal">-EnvironmentName</span> *&lt;EnvironmentName&gt;* | %&#123;<span class="variable">$_</span> | <span class="built_in">ConvertTo-Json</span> <span class="literal">-Depth</span> <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure><p>下記画面のように、フローの詳細な情報を確認することができます。  </p><p><img src="/blog/powerautomate/list-cloud-flow/powershell_detail_export.png">  </p><p>また、共同所有者や実行専用ユーザーを含めた、フローに関係する人物を一覧化することがご入用である場合、下記の PowerShell コマンドのご利用をご検討ください。<br><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powerapps.administration.powershell/get-adminflowownerrole?view=pa-ps-latest">Get-AdminFlowOwnerRole (Microsoft.PowerApps.Administration.PowerShell) | Microsoft Learn</a></p><p>上記コマンドを用いて、テナント内のフローにループ処理をする際のサンプルコードを下記に記載いたします。<br>ご要件に合わせてご利用をご検討ください。<br>※ご実行の前には本記事末尾の免責事項をご確認ください。  </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 環境一覧を取得</span></span><br><span class="line"><span class="variable">$environments</span> = <span class="built_in">Get-AdminPowerAppEnvironment</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 各環境のフローを取得し、オーナーロールを確認</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$env</span> <span class="keyword">in</span> <span class="variable">$environments</span>) &#123;</span><br><span class="line">    <span class="variable">$envName</span> = <span class="variable">$env</span>.EnvironmentName</span><br><span class="line">    <span class="built_in">Write-Output</span> <span class="string">&quot;Processing Environment: <span class="variable">$envName</span>&quot;</span></span><br><span class="line">    <span class="comment"># フロー一覧を取得</span></span><br><span class="line">    <span class="variable">$flows</span> = <span class="built_in">Get-AdminFlow</span> <span class="literal">-EnvironmentName</span> <span class="variable">$envName</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$flow</span> <span class="keyword">in</span> <span class="variable">$flows</span>) &#123;</span><br><span class="line">        <span class="variable">$flowName</span> = <span class="variable">$flow</span>.FlowName</span><br><span class="line">        <span class="built_in">Write-Output</span> <span class="string">&quot;  Checking Flow: <span class="variable">$flowName</span>&quot;</span></span><br><span class="line">        <span class="comment"># フローのオーナーロールを取得</span></span><br><span class="line">        <span class="variable">$ownerRoles</span> = <span class="built_in">Get-AdminFlowOwnerRole</span> <span class="literal">-EnvironmentName</span> <span class="variable">$envName</span> <span class="literal">-FlowName</span> <span class="variable">$flowName</span></span><br><span class="line">        <span class="comment"># 結果を表示</span></span><br><span class="line">        <span class="variable">$ownerRoles</span> | <span class="built_in">ForEach-Object</span> &#123;</span><br><span class="line">            <span class="built_in">Write-Output</span> <span class="string">&quot;    Role: <span class="variable">$</span>(<span class="variable">$_</span>.RoleType) | Principal: <span class="variable">$</span>(<span class="variable">$_</span>.PrincipalObjectId)&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>上記コードを実行すると、下記のように各フローについて、所有者や共同所有者、実行専用ユーザーをご確認することができます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>テナント内のフロー数が多い場合、処理完了までに長時間を要する可能性がございます。    </p></div><p><img src="/blog/powerautomate/list-cloud-flow/powershell_export_people.png">  </p><p><a id='2-3-power-automate-management-コネクタを利用する'></a></p><h2 id="2-3-Power-Automate-Management-コネクタを利用する"><a href="#2-3-Power-Automate-Management-コネクタを利用する" class="headerlink" title="2-3. Power Automate Management コネクタを利用する"></a>2-3. Power Automate Management コネクタを利用する</h2><p>この方法はクラウドフローを用いて、テナント内のクラウドフローを一覧化することが可能です。</p><ol><li>Power Automate で新規クラウドフローを作成します。</li><li>任意のトリガー（例:手動）を選択します。</li><li>アクションに「Power Automate Management」コネクタを追加し、「管理者としてフローの一覧を取得 (V2)」アクションを選びます。</li><li>取得対象の環境を選択してください。</li><li>アクション実行後、得られたフロー情報をExcelやメール通知など、適切な形で利用できます。</li></ol><p><img src="/blog/powerautomate/list-cloud-flow/flow-list-connector.png">  </p><p>テナント内の全環境を対象としてクラウドフローを実行する場合、「自分の環境の一覧表示」アクションと組み合わせてください。<br>その場合、下記のように設定してください。</p><p>「それぞれに適用する」：outputs(‘自分の環境の一覧表示’)?[‘body/value’]<br>「管理者としてフローの一覧を取得 (V2)」：items(‘それぞれに適用する’)?[‘name’]  </p><p><img src="/blog/powerautomate/list-cloud-flow/flow-list-flow2.png"><br><img src="/blog/powerautomate/list-cloud-flow/flow-list-flow.png">  </p><p>「Power Automate Management」コネクタの詳細は下記の公開情報をご覧ください。<br><a href="https://learn.microsoft.com/ja-jp/connectors/flowmanagement/">Power Automate Management - Connectors | Microsoft Learn</a>  </p><p>また、フローの定義情報等の詳細情報までご入用である場合、「フローを管理者として取得」アクションを組み合わせることで実現可能です。  </p><p><img src="/blog/powerautomate/list-cloud-flow/flow-list-flow3.png">  </p><blockquote><p>この方法は削除済みのフローを取得することはできません。</p></blockquote><p><a id='まとめ'></a></p><h1 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h1><p>上記三つの方法から、ご要件に応じて適切な方法をご選択いただき、ご利用ください。<br>本記事が適切な管理の一助となりましたら幸いでございます。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>===サンプルコード免責事項===</p><p>・本記事で紹介しているサンプルコードは説明のためのサンプルであり、お客様の要望を直接満たすためのご提供ではございません。</p><p>そのため、製品の実運用環境で使用されることを前提に提供されるものではありません。</p><p>・エラー処理などは含まれておりません。また、弊社にてその動作を保証するものではございません。</p><p>・サンプル コードおよびそれに関連するあらゆる情報は、”現状のまま” で</p><p>提供されるものであり、商品性や特定の目的への適合性に関する黙示の保証も含め、</p><p>明示、黙示を問わずいかなる保証も付されるものではありません。</p><p>ご使用の際には、十分にご検証いただき、ご使用くださいますようお願い申し上げます。</p><p>マイクロソフトは、お客様に対し、サンプル コードを使用および改変するための</p><p>非排他的かつ無償の権利ならびに本サンプル コードをオブジェクト コードの形式で</p><p>複製および頒布するための非排他的かつ無償の権利を許諾します。</p><p>但し、お客様は下記に同意するものとします。</p><p>(1) サンプル コードが組み込まれたお客様のソフトウェア製品のマーケティングのために</p><p>    マイクロソフトの会社名、ロゴまたは商標を用いないこと</p><p>(2) サンプル コードが組み込まれたお客様のソフトウェア製品に有効な著作権表示をすること</p><p>(3) サンプル コードの使用または頒布から生じるあらゆる損害 (弁護士費用を含む) に</p><p>    関する請求または訴訟について、マイクロソフトおよびマイクロソフトの取引業者に対し補償し、</p><p>    損害を与えないこと</p></div><hr><p>※ 本記事の内容は執筆時点の情報に基づいています。最新の情報については公式ドキュメントも合わせてご確認ください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの竹内です。&lt;br&gt;本記事では、Power Automate のクラウドフローをテナント全体で効率的に管理するために、フローの一覧を取得する 3 つの方法を詳しくご案内します。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio のエージェントを一覧にする方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-list-copilot-agents/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/how-to-list-copilot-agents/</id>
    <published>2025-03-03T04:30:00.000Z</published>
    <updated>2025-05-01T03:35:34.445Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの網野です。<br>Copilot Studio にて作成されたエージェントは Dataverse または Dataverse for Teams に保存されます。本記事では Dataverse および Dataverse for Teams からエージェントを一覧を取得する方法をご案内いたします。</p><span id="more"></span><h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>Copilot Studio は 2 つのルートでエージェントを作成することができます。</p><ol><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing-subscriptions#standalone-copilot-studio-subscription">Copilot Studio ポータル</a></li><li><a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/requirements-licensing-subscriptions#copilot-studio-for-microsoft-teams-plans">Teams アプリの Copilot Studio</a></li></ol><p>Copilot Studio ポータルから作成したエージェントは Dataverse に保存されます。<br>Teams アプリの Copilot Studio から作成したエージェントは Dataverse for Teams に保存されます。Dataverse/Dataverse for Teams に格納されているデータは本記事に記載する方法で取得・確認することができます。</p><p>なお、<a href="https://learn.microsoft.com/ja-jp/microsoft-365-copilot/extensibility/copilot-studio-agent-builder">Agent Builder</a> を利用して作成したエージェントは Cosmos DB に保存されますので、本記事の方法では取得することができません。</p><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>テナント内のエージェント一覧を取得するためには、取得する環境の Copilots テーブルに対して、組織レベルの読み取り権限が必要となります。  </p><h2 id="特定の環境のエージェントを一覧にする方法"><a href="#特定の環境のエージェントを一覧にする方法" class="headerlink" title="特定の環境のエージェントを一覧にする方法"></a>特定の環境のエージェントを一覧にする方法</h2><h3 id="詳細検索を利用する方法-Dataverse-のみ"><a href="#詳細検索を利用する方法-Dataverse-のみ" class="headerlink" title="詳細検索を利用する方法 (Dataverse のみ)"></a>詳細検索を利用する方法 (Dataverse のみ)</h3><ol><li><p><a href="https://make.powerapps.com/">Power Apps ポータル</a> に接続し、エージェントを取得する環境を選択します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/environment-picker.png"></p></li><li><p>右上のギアアイコンより、[詳細設定] を選択します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/setting.png"></p></li><li><p>表示された Dynamics 365 画面右上のフィルタアイコンを選択します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/filter.png"></p></li><li><p>「高度な検索」画面が開いたら以下の操作を行います。</p><ul><li>検索対象テーブルに「Copilots/コパイロット」を選択します。</li><li>必要に応じて、「列の編集/Edit Columns」から表示する列を編集します。</li><li>「結果/Results」を押します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/advanced_search.png"></li></ul></li><li><p>エージェント一覧が表示されます。表示された検索結果をExcel にエクスポートが可能です。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/export_excel.png"></p></li><li><p>エクスポートした Excel を開くと、エージェント名 (Name列) と所有者 (Owner) を確認することができます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/excel_list.png"></p></li><li><p>手順4の画面で所有者のメールアドレスを追加しますと、エクスポート時にメールアドレスを一緒に出力することができます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/add_owner_email.png"></p></li></ol><h3 id="Dataverse-コネクタを利用する方法"><a href="#Dataverse-コネクタを利用する方法" class="headerlink" title="Dataverse コネクタを利用する方法"></a>Dataverse コネクタを利用する方法</h3><p>Dataverse コネクタを利用し Copilots(bot) テーブルからエージェント情報を取得します。  </p><h4 id="フロー全体図"><a href="#フロー全体図" class="headerlink" title="フロー全体図"></a>フロー全体図</h4><p><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse1.png"></p><h4 id="フロー詳細"><a href="#フロー詳細" class="headerlink" title="フロー詳細"></a>フロー詳細</h4><ol><li>任意のトリガーを設定します  </li><li>Dataverse コネクタ「選択した環境の行を一覧表示する」アクションを設定します。  <ul><li>環境：（任意）</li><li>テーブル名：Copilots</li><li>列を選択する：（表示したい列をカンマ区切りで記載）<br>取得可能な列は <a href="https://learn.microsoft.com/en-us/power-apps/developer/data-platform/reference/entities/bot">Copilot (bot) table/entity reference</a> を参照してください。</li><li>クエリの展開：（任意）<br> サンプルではエージェント作成者＝CreatedBy の姓名とメールアドレスを取得しています。<br> 値：createdby($select=internalemailaddress,lastname,firstname)<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2.png"></li></ul></li><li>ここで一度フローを実行し、実行履歴から「選択した環境の行を一覧表示する」アクションの body をコピーします。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse6.png"></li><li>「JSON の解析」アクションを設定します。  <ul><li>Content：動的コンテンツ「選択した環境の行を一覧表示する」の本文</li><li>Shema：以下の手順で作成します。<ol><li>「サンプルペイロードを使用してスキーマを生成する」を選択します。</li><li>一つ前の手順で取得した実行履歴の body の値を貼り付けます。</li><li>「完了」を押します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse8.png"></li><li>以下のように表示されていることを確認してください。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse3.png"> </li></ol></li></ul></li><li>「CSV テーブルの作成」アクションを設定します。  <ul><li>From ：動的コンテンツ「JSON の解析」の Body value</li><li>Columns： カスタム</li><li>Columns Header： （CSV ヘッダーとして使用する任意の文字列）</li><li>Columns Value：（動的コンテンツ「JSON の解析」の任意の項目）<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse4.png"></li></ul></li><li>任意のコネクタを利用し CSV ファイルを作成します。<br>サンプルでは OneDrive for Business コネクタの「ファイルの作成」アクションを利用して CSV ファイルを作成します。  <ul><li>フォルダーのパス：（任意）</li><li>ファイル名：（任意）</li><li>ファイルコンテンツ：concat(decodeUriComponent(‘%EF%BB%BF’), body(‘CSV_テーブルの作成’))<br>日本語が文字化けしないように、ファイルコンテンツの先頭に BOM=decodeUriComponent(‘%EF%BB%BF’) を追加します。<br>※BOM とは文字コードが UTF-8 であることを示すものです。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse5.png"></li></ul></li></ol><p>これでフローの作成は完了です。</p><h4 id="フロー実行結果"><a href="#フロー実行結果" class="headerlink" title="フロー実行結果"></a>フロー実行結果</h4><p>フローを実行すると指定したフォルダに CSV が出力されます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse9.png"></p><h2 id="テナント内の環境のエージェントを一覧にする方法"><a href="#テナント内の環境のエージェントを一覧にする方法" class="headerlink" title="テナント内の環境のエージェントを一覧にする方法"></a>テナント内の環境のエージェントを一覧にする方法</h2><h3 id="CoE-を利用する方法-Dataverse-のみ"><a href="#CoE-を利用する方法-Dataverse-のみ" class="headerlink" title="CoE を利用する方法 (Dataverse のみ)"></a>CoE を利用する方法 (Dataverse のみ)</h3><p><a href="https://learn.microsoft.com/ja-jp/power-platform/guidance/coe/starter-kit">CoE Starter kit</a> を環境にインストールすることで、Datavese に作成されたエージェントの一覧を確認することができます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/coe.png">  </p><p>Dataverse for Teams 環境の Copilot につきましては 2025 年 2 月時点で CoE Starter Kit から確認することはサポートされていません。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/coe2.png">  </p><p>なお、 CoE Starter Kit は有志が作成するツールとなりますのでご不明点等ございましたら、<a href="https://aka.ms/coe-starter-kit-issues">GitHub</a> へお問い合わせください。<br>関連リンク：<a href="https://learn.microsoft.com/ja-jp/power-platform/guidance/coe/feedback-support">CoE Starter Kit に関するフィードバックとサポート</a></p><h3 id="Dataverse-コネクタを利用する方法-1"><a href="#Dataverse-コネクタを利用する方法-1" class="headerlink" title="Dataverse コネクタを利用する方法"></a>Dataverse コネクタを利用する方法</h3><p>上述のDataverse コネクタを利用する方法にて特定環境のエージェント一覧を取得する方法をご案内しました。その方法を全ての環境に対して行うことでテナント内の環境のエージェント一覧を取得することができます。<br>具体的には「環境一覧を管理者として作成する」アクションを利用して取得した、取得した環境ごとに CSV を出力することで、 Copilot 情報を取得します。</p><h3 id="フロー全体図-1"><a href="#フロー全体図-1" class="headerlink" title="フロー全体図"></a>フロー全体図</h3><p><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_1.png"></p><h4 id="前作業"><a href="#前作業" class="headerlink" title="前作業"></a>前作業</h4><p>全ての環境の Copilots テーブルにアクセスするために、自分自身を環境の管理者として追加します。<br>具体的な手順は <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/manage-high-privileged-admin-roles#self-elevate-through-powershell">PowerShell による自己昇格</a> を参照してください。  </p><h3 id="フロー詳細-1"><a href="#フロー詳細-1" class="headerlink" title="フロー詳細"></a>フロー詳細</h3><ol><li>管理者向け Power Platform コネクタの「環境一覧を管理者として作成する」アクションを追加します。</li><li>「選択した環境の行を一覧表示する」アクションの「環境」を動的コンテンツ「リンクされたメタデータ インスタンス API の URL」に変更します。<br>環境：@item()?[‘properties/linkedEnvironmentMetadata/instanceApiUrl’]<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_3.png"></li><li>「選択した環境の行を一覧表示する」アクションが 「For each」 コントロールで囲まれることを確認し、後続のアクションもすべて 「For each」 コントール内に追加します。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_4.png"></li><li>「ファイルの作成」アクションのファイル名に動的コンテンツ「リンクされたメタデータ フレンドリ名」を追加します。　　<br>サンプルでは、フレンドリ名（＝環境名）を追加することで、環境ごとにファイルを作成し、他の環境のデータが上書きされる事を防ぎます。運用に合わせて任意の項目を設定してください。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_5.png"></li></ol><h4 id="フロー実行結果-1"><a href="#フロー実行結果-1" class="headerlink" title="フロー実行結果"></a>フロー実行結果</h4><p>フローを実行すると指定したフォルダに環境ごとの CSV が出力されます。<br><img src="/blog/copilotstudio/how-to-list-copilot-agents/dataverse2_2.png"></p><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><h3 id="Microsoft-365-Copilot-を拡張した-Copilot-の情報が取得できますか"><a href="#Microsoft-365-Copilot-を拡張した-Copilot-の情報が取得できますか" class="headerlink" title="Microsoft 365 Copilot を拡張した Copilot の情報が取得できますか"></a>Microsoft 365 Copilot を拡張した Copilot の情報が取得できますか</h3><p>はい、取得できます。<br>Copilot Studio から Copilot for Microsoft 365 を選択して作成した Copilot は Dataverse に保存されます。そのため、本手順でご案内した方法で取得することができます。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの網野です。&lt;br&gt;Copilot Studio にて作成されたエージェントは Dataverse または Dataverse for Teams に保存されます。本記事では Dataverse および Dataverse for Teams からエージェントを一覧を取得する方法をご案内いたします。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Copilot-Studio/"/>
    
  </entry>
  
  <entry>
    <title>セキュリティ グループとセキュリティ ロールによる Dataverse 環境のアクセス権制御方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/About-security-role-in-Dataverse/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/About-security-role-in-Dataverse/</id>
    <published>2025-02-25T15:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.580Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの鎌田です。</p><p>今回は、Power Platform、特に Dataverse を作成した環境に対して、セキュリティ グループやセキュリティ ロールを使ってアクセスを制御する方法についてご紹介いたします。</p><p>ビジネスユースで Dynamics 365 CRM やモデル駆動アプリを導入する場合、セキュアな環境管理のために必須となるのがこのアクセス権制御です。<br>特に Dataverse の導入にあたりセキュリティ面を検討されている方は、ぜひご覧ください！</p><h2 id="アクセス権制御方法の概要"><a href="#アクセス権制御方法の概要" class="headerlink" title="アクセス権制御方法の概要"></a>アクセス権制御方法の概要</h2><p>Dataverse 環境のアクセス権は、おおまかに以下の構造で制御されています。</p><ol><li><strong>ライセンス</strong> : テナントごとに、<strong>各ユーザーが Power Platform 製品を利用できるか</strong>を決定します。</li><li><strong>セキュリティ グループ</strong> : テナントの各環境ごとに、<strong>ユーザーがその環境を利用できるか</strong>を決定します。</li><li><strong>セキュリティ ロール</strong> : 環境の Dataverse 内の各テーブルごとに、<strong>環境における具体的なユーザーのアクセス権</strong>を決定します。</li></ol><p><img src="/blog/powerplatform/About-security-role-in-Dataverse/img00-overall.PNG"></p><p>例えば上記の図のように、同じテナント内に複数のグループと複数の環境が存在し、それぞれ環境にグループが割り当てられているとします。</p><ul><li>グループ A (サポート部門) とグループ B (管理部門)</li><li>環境A (サポート部門用の環境) と環境 B (管理部門用の環境)</li></ul><p>このとき、下記の 1 から 3 のアクセス権制御を組み合わせることで、ユーザーに対してどの環境でのどのような操作を許可するかを制御できます。</p><ol><li><strong>ライセンス</strong> :<br>グループ A 内のサポート部門のユーザーは、ライセンスを所有しているため、Power Platform 製品を利用できます。<br>グループ B 内のユーザーは、今回の図の場合ライセンスを保有していないため、Power Platform 製品を利用できません。</li><li><strong>セキュリティ グループ</strong> :<br>サポート部門用の環境 A に対して、グループ A がセキュリティ グループとして設定されている場合、グループ A のユーザーは環境 A にアクセスすることができますが、管理部門用の環境 B のセキュリティ グループとしては登録されていないため、アクセスすることができません。</li><li><strong>セキュリティ ロール</strong> :<br>グループ A のユーザーに対してセキュリティ ロールを付与することで、ユーザーがアクセスできるテーブルやアプリ、実行可能な操作を制限できます。<br>たとえば図中のユーザーにサポート部門用のセキュリティ ロールが割り当てられ、システム管理者が割り当てられていないとき、ユーザーはシステム管理に使うテーブルにはアクセスができません。</li></ol><p>本記事では 2 と 3 について紹介します。</p><h2 id="セキュリティ-グループについて"><a href="#セキュリティ-グループについて" class="headerlink" title="セキュリティ グループについて"></a>セキュリティ グループについて</h2><p>Power Platform 環境には、デフォルトではテナントに所属する全ユーザーがアクセスできますが、環境にセキュリティ グループを割り当てることで、<strong>割り当てられたセキュリティ グループに所属するユーザーのみにアクセスを限定</strong>することができます。<br>たとえば、「IT部門」用の環境を作成したときに、「IT部門」のセキュリティ グループを割り当てることで、その他の営業部門などのユーザーのアクセスを禁止することができます。このように、グループごとに環境の利用可否を制御したい場合に、セキュリティ グループが役立ちます。</p><p>セキュリティ グループの割り当ては、環境作成時にオプションで指定できる他、Power Platform 管理センターから既存の環境に対しても指定できます。<br>ただし、既存の環境にセキュリティ グループを割り当てた場合、セキュリティ グループに所属していないユーザーはすべて無効化されるのでご注意ください。<br><img src="/blog/powerplatform/About-security-role-in-Dataverse/ppac_security_group.png"></p><h2 id="セキュリティ-ロールについて"><a href="#セキュリティ-ロールについて" class="headerlink" title="セキュリティ ロールについて"></a>セキュリティ ロールについて</h2><p>上記でご説明したセキュリティ グループでは、ユーザーに対して環境単位でのアクセス可否を決定します。<br>これに対して、ユーザーに割り当てることで、<strong>環境内でユーザーが行える操作を決定</strong>するのがセキュリティ ロールです。<br>Power Platform では、要件に合わせたさまざまな既定のセキュリティ ロールが存在します。特によく使用されるセキュリティ ロールの例を以下に紹介します。</p><ul><li>システム管理者 : 環境におけるすべての操作を実行できるロール。</li><li>Basic User : 環境における一般的なアプリの利用ができるロール。管理操作が制限される他、自分以外のユーザーが作成したデータに対するアクセスも制限されます。</li><li>システム カスタマイザー : 環境をカスタマイズするためのロール。多くの管理操作を実行できますが、自分以外のユーザーが作成したデータを参照できません。</li></ul><p>またこちらの公開情報にも、より多くのセキュリティ ロールのご説明が記載されているので、ぜひご覧ください。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/database-security">環境のリソースに対するユーザー セキュリティの構成</a></p><h3 id="セキュリティ-ロールの仕組みとカスタマイズ"><a href="#セキュリティ-ロールの仕組みとカスタマイズ" class="headerlink" title="セキュリティ ロールの仕組みとカスタマイズ"></a>セキュリティ ロールの仕組みとカスタマイズ</h3><p>セキュリティ ロールは、Dataverse 上の各テーブルやその他の機能の使用等に対する <strong>特権</strong> (アクセス権) をひとまとめにしたものです。<br>Power Platform 管理センターから環境を開き、[設定] &gt; [ユーザーとアクセス許可] &gt; [セキュリティ ロール] から特定のセキュリティ ロールを開くことで、下図のように特権がどのように付与されているかを確認することができます。<br><br>各特権の項目に対して、作成・読み取り・書き込み等の動作ごとに、特権の種類を [なし / 部署 / 組織 / 部署配下 / ユーザー] に設定できます。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/security-roles-privileges">セキュリティ ロールおよび特権</a><br><img src="/blog/powerplatform/About-security-role-in-Dataverse/ppac_security_role_settings.png"></p><p>前述のように、システム管理者や Basic User といった定義済みのセキュリティ ロールが存在するものの、カスタマイズにより細かく特権を定義することが可能です。これにより、お客様の使用シナリオやニーズに合わせて、柔軟なアクセス制御が可能となります。</p><p>例えば、</p><ul><li>サポート部門の担当者には、自分が担当する「サポート案件」を参照可とする</li><li>サポート部門の管理者は、全員のサポート案件を参照可とする</li><li>経理部門の担当者には、サポート案件自体参照させたくない</li></ul><p>というような要件がある場合、サポート案件に対するアクセス許可を変更したロールを 3 種類作成し、各ユーザーに割り当てることで要件が実現できます。</p><p>定義済みセキュリティ ロールでは、モデル駆動型アプリで実際に使用されよく目にするテーブル以外にも、設定に関するものやプライバシー関連など、多数のアクセス制御が設定されています。そのため、カスタムでのセキュリティ ロールを作成する場合は、定義済みのセキュリティ ロールをコピーし、それをベースに修正が必要な特権のみ変更する運用が推奨されています。</p><h2 id="その他"><a href="#その他" class="headerlink" title="その他"></a>その他</h2><h3 id="チーム単位でのセキュリティ-ロールの割り当て"><a href="#チーム単位でのセキュリティ-ロールの割り当て" class="headerlink" title="チーム単位でのセキュリティ ロールの割り当て"></a>チーム単位でのセキュリティ ロールの割り当て</h3><p>ユーザーに直接セキュリティ ロールを割り当てるのではなく、Dataverse 上に作成した <strong>チーム</strong> に対してもセキュリティ ロールの割り当てが可能です。<br>これにより、チームに所属するユーザー全員に対して、チームに付与されたセキュリティ ロールが継承されます。(チームのセキュリティ ロールが継承されていても、Power Platform 管理センターのユーザーごとのセキュリティ ロールには表示されません)<br><br>また、このチームを Microsoft Entra ID のセキュリティ グループと紐づけることで、Microsoft Entra ID と Power Platform でユーザー管理の体制を統一することができます。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/manage-teams">Microsoft Dataverse チームの管理</a></p><h3 id="フィールドレベルのセキュリティ付与"><a href="#フィールドレベルのセキュリティ付与" class="headerlink" title="フィールドレベルのセキュリティ付与"></a>フィールドレベルのセキュリティ付与</h3><p>本記事でご紹介したテーブルごとのアクセス制御とは別に、更に細かく Dataverse テーブルの列ごとにアクセス制御を設定することができます。<br>住所や電話番号など、特に重要で管理に留意する必要のある情報を扱う際に有効な機能です。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/field-level-security">アクセスを制御する列レベルのセキュリティ</a></p><h3 id="セキュリティ-グループを環境に割り当てた際のメンバー同期"><a href="#セキュリティ-グループを環境に割り当てた際のメンバー同期" class="headerlink" title="セキュリティ グループを環境に割り当てた際のメンバー同期"></a>セキュリティ グループを環境に割り当てた際のメンバー同期</h3><p>セキュリティ グループを環境に割り当てると、グループに所属するライセンスを保有するユーザーが、自動的に環境に追加されるようになります。<br>ただし以下のように、注意が必要な挙動もあります。</p><ul><li>ライセンスを保有しないユーザーは環境に追加されない</li><li>入れ子のセキュリティ グループのメンバーは、グループに「Microsoft Entra ID グループ チーム」が割り当てられている場合を除いて、自動的に環境に追加されない</li><li>ユーザーがグループから削除された際、Power Platform 側のユーザーは無効化される</li></ul><p>以下の公開情報に注意点の記載がございますので、ぜひご参照ください。<br><br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/control-user-access">環境へのユーザー アクセスのコントロール: セキュリティ グループおよびライセンス</a></p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>以上、Dataverse でのユーザーアクセスの制御についてご案内いたしました。<br>こちらの記事が皆様のセキュアな環境管理のお役に立ちましたら幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの鎌田です。&lt;/p&gt;
&lt;p&gt;今回は、Power Platform、特に Dataverse を作成した環境に対して、セキュリティ グループやセキュリティ ロールを使ってアクセスを制御する方法についてご紹介いたします。&lt;</summary>
      
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataverse/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Model-driven-app/"/>
    
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="Model-driven app" scheme="https://jpdynamicscrm.github.io/blog/tags/Model-driven-app/"/>
    
    <category term="Dynamics" scheme="https://jpdynamicscrm.github.io/blog/tags/Dynamics/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform からプライベートな Azure 仮想ネットワークに存在するデータソースを利用する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/connect-private-datasource/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/connect-private-datasource/</id>
    <published>2025-02-20T03:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.632Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの大友です。  </p><p>セキュリティ等の観点から、Azure SQL Database や Azure OpenAI 等のサービスをパブリックネットワークに公開した状態での運用は避けたい、というお問合せを頂く事があります。<br>この記事では、Power Platform からプライベートな Azure 仮想ネットワークに存在するデータソースを利用する方法について紹介します。  </p><span id="more"></span><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ol><li><a href="#anchor-begin">はじめに</a></li><li><a href="#anchor-about-opdg">オンプレミス データ ゲートウェイとは？</a></li><li><a href="#anchor-about-vndg">仮想ネットワーク データ ゲートウェイとは？</a></li><li><a href="#anchor-about-vnet">VNET for Power Platform とは？</a></li><li><a href="#anchor-diff">機能の比較</a></li><li><a href="#anchor-finish">おわりに</a></li></ol><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、 本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください。  </p></div><!---------------------------------------------------------><p><a id='anchor-begin'></a></p><h2 id="1-はじめに"><a href="#1-はじめに" class="headerlink" title="1. はじめに"></a>1. はじめに</h2><p>弊社 Azure サービスではデータセンター間含めサービス間の通信は弊社ネットワークを経由しパブリックネットワークは経由しません。<br>Power Platform も Azure サービスに属しているため、例として Azure SQL からデータを取得している Power Automate であれば Power Automate サービス ～ Azure SQL の経路において、弊社外の公衆網は経由しない、ということになります。<br>Power Apps の場合はブラウザ上で動作するため、お客様ネットワーク上から弊社ネットワークまでの間を Express Route をご利用頂く等で閉域化していただく必要がございます。</p><div class="alert is-info"><p class="alert-title">Note</p><p><a href="https://azure.microsoft.com/en-us/blog/how-microsoft-builds-its-fast-and-reliable-global-network/">マイクロソフトは高速で信頼性の高いグローバル ネットワークをどのように構築しているのか (microsoft.com)</a></p><p>以下、機械翻訳での抜粋</p><p>データセンター間の Azure トラフィックはネットワーク上にとどまり、インターネット経由では流れません。これには、世界中の Microsoft サービス間のすべてのトラフィックが含まれます。たとえば、Azure 内では、仮想マシン、ストレージ、SQL 通信間のトラフィックは、送信元と宛先のリージョンに関係なく、Microsoft ネットワークのみを経由します。  </p></div><p>ご利用の要件によってデータソースが Azure 仮想ネットワーク内にのみ公開されている必要がある、といった場合のために、それらのデータソースに対応頂くための手段として Power Platform では以下の機能が提供されています。  </p><ul><li>オンプレミス データ ゲートウェイ  </li><li>仮想ネットワーク データ ゲートウェイ  </li><li>VNET for Power Platform  </li></ul><p>この記事では、これらの機能について比較したいと思います。  </p><!---------------------------------------------------------><p><a id='anchor-about-opdg'></a></p><h2 id="2-オンプレミス-データ-ゲートウェイとは？"><a href="#2-オンプレミス-データ-ゲートウェイとは？" class="headerlink" title="2. オンプレミス データ ゲートウェイとは？"></a>2. オンプレミス データ ゲートウェイとは？</h2><p><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-onprem">オンプレミス データ ゲートウェイとは</a>  </p><p>簡単に説明すると…<br>オンプレミスデータゲートウェイとは、Windows 端末を介してコネクタからデータソースにアクセスする方法で、アプリケーションを Windows 端末にインストールして利用します。<br>お客様のネットワーク内にある Windows 端末を介することで、データソースをプライベートネットワーク内においたままコネクタからデータソースにアクセスすることができます。  </p><p>以下にリクエストと応答の流れを番号と矢印で表しました。<br><img src="/blog/powerplatform/connect-private-datasource/image04.png">  </p><ol><li>Power Platfrom は Azure Relay に向けリクエストを行います。  </li><li>オンプレミス データ ゲートウェイがインストールされた端末は Azure Relay に未処理のリクエストがあるか確認します。  </li><li>Azure Relay からオンプレミス データ ゲートウェイがインストールされた端末へ未処理のリクエストを返答します。  </li><li>オンプレミス データ ゲートウェイがインストールされた端末からデータソースへデータのリクエストを行います。  </li><li>データソースからオンプレミス データ ゲートウェイがインストールされた端末へデータを返答します。  </li><li>オンプレミス データ ゲートウェイがインストールされた端末は Azure Relay へデータを返答します。  </li><li>Azure Relay 経由が Power Platform データを返答します。  </li></ol><p>上記の図にもあるように、オンプレミス データ ゲートウェイがインストールされた端末から見ると Azure Relay に対して発信リクエストのみ行い通信を確立するため、外部から端末向けの、いわゆるインバウンドのポート解放は不要となっています。<br><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-onprem-indepth#how-the-gateway-works">オンプレミス データ ゲートウェイのしくみ</a>  </p><div class="alert is-info"><p class="alert-title">Note</p><p>主にオンプレミス環境(お客様の建屋等のネットワーク)上に存在するデータを操作する際に用いられます。</p><p>関連記事：<a href="https://jpdynamicscrm.github.io/blog/powerautomate/gateway-install/">クラウド フローとオンプレミス環境間でデータ連携する方法</a>  </p></div><p>Azure 仮想ネットワークのプライベートネットワークからのみアクセスを受け付けているリソースに接続する場合、以下のような<strong>アクセス対象のデータソースと通信可能な端末</strong>を用意頂き、その端末にオンプレミス データ ゲートウェイをインストールする必要があります。  </p><ul><li>Azure 仮想マシンにAzure 仮想ネットワークに属する NIC を構成する<br><img src="/blog/powerplatform/connect-private-datasource/image01.png"></li><li>お客様ネットワーク上にある端末を利用される場合、Azure 仮想ネットワークと接続可能な Express Route をご利用頂く<br><img src="/blog/powerplatform/connect-private-datasource/image03.png"></li></ul><p>ご利用頂くにあたり、以下の注意点があります。  </p><ul><li>インストールされた端末がシャットダウン状態だと動作しません。  </li><li>環境と同じリージョンにオンプレミス データ ゲートウェイを構成頂く必要があります。  </li><li>オンプレミス データ ゲートウェイのインストールにあたってはプレミアムライセンスは必須ではありませんが、Power Apps や Power Automate で利用する際にはプレミアムライセンスが必要です。  </li><li>Azure Relay ～ Power Platform コネクタの間は閉域化できず弊社ネットワーク内での通信となるため、全経路を閉域化することはできません。 </li></ul><p>また、後述の VNET for Power Platform と比較し、以下のような差異があります。  </p><ul><li>接続単位でオンプレミス データ ゲートウェイの利用可否を指定することが可能です。  </li><li>接続毎にオンプレミス データ ゲートウェイを利用する設定で接続を作成していただく必要があります。  </li><li>オンプレミス データ ゲートウェイ用に端末を用意する必要があります。  </li><li>オンプレミス データ ゲートウェイやインストールされた端末自体のバージョン維持等のメンテナンスが必要です。  </li></ul><p>以下のコネクタがオンプレミス データ ゲートウェイに対応しています。<br><a href="https://learn.microsoft.com/ja-jp/azure/logic-apps/connect-on-premises-data-sources?WT.mc_id=Portal-Microsoft_Azure_EMA#supported-data-sources">サポートされるデータ ソース</a>  </p><div class="alert is-warning"><p class="alert-title">警告</p><p><a href="https://learn.microsoft.com/ja-jp/connectors/azureblobconnector/">Azure Blob Storage コネクタ</a>は、接続作成画面上オンプレミス データ ゲートウェイの選択項目が表示されますが、オンプレミス データ ゲートウェイには対応しておりません。</p><p>「誤ったオプションである」旨が公開情報にも明記されていますのでご注意ください。</p></div><!---------------------------------------------------------><p><a id='anchor-about-vndg'></a></p><h2 id="3-仮想ネットワーク-データ-ゲートウェイとは？"><a href="#3-仮想ネットワーク-データ-ゲートウェイとは？" class="headerlink" title="3. 仮想ネットワーク データ ゲートウェイとは？"></a>3. 仮想ネットワーク データ ゲートウェイとは？</h2><p><a href="https://learn.microsoft.com/en-us/data-integration/vnet/overview">仮想ネットワーク (VNet) データ ゲートウェイとは</a>  </p><p>仮想ネットワーク (VNet) データ ゲートウェイは、Microsoft Fabric(旧 Power BI) や Power Platfrom のデータフローを Azure 仮想ネットワークへ接続するために利用されます。  </p><div class="alert is-warning"><p class="alert-title">警告</p><p><strong>Power Apps や Power Automate ではご利用いただくことはできません</strong>のでご注意ください。</p><p>関連記事：<a href="https://jpdynamicscrm.github.io/blog/powerplatform/vnetgateway-support-status/">Power Platform での仮想ネットワーク データ ゲートウェイについて</a>  </p></div><!---------------------------------------------------------><p><a id='anchor-about-vnet'></a></p><h2 id="4-VNET-for-Power-Platform-とは？"><a href="#4-VNET-for-Power-Platform-とは？" class="headerlink" title="4. VNET for Power Platform とは？"></a>4. VNET for Power Platform とは？</h2><p><a href="https://learn.microsoft.com/en-us/power-platform/admin/vnet-support-overview">Virtual Network のサポートの概要</a>  </p><p>VNET for Power Platform は、Power Platform の環境をネットワーク委任の機能で Azure 仮想ネットワークに接続する機能です。<br><img src="/blog/powerplatform/connect-private-datasource/image02.png"></p><p>当機能に対応しているコネクタはすべて仮想ネットワーク経由でのリクエストを行います。<br>対応コネクタに限りますが、完全に Azure 仮想ネットワーク内にて完全閉域化が可能です。<br>※ Power Apps も閉域にしたい場合は、Microsoft Peering の Express Route が必要となります。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>VNET for Power Platform に対応しているコネクタの一覧は、公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/en-us/power-platform/admin/vnet-support-overview#supported-services">Virtual Network のサポートの概要</a>  </p></div><p>オンプレミス データ ゲートウェイと比較し、以下のような差異があります。  </p><ul><li>オンプレミス データ ゲートウェイには対応していない Azure Blob Storage コネクタに対応しています。  </li><li>カスタムコネクタや HTTP with Microsoft Entra ID コネクタに対応しているため、Azure OpenAI 等をはじめ Azure 仮想ネットワークに対応しているサービス上に公開された API があればご利用頂く事が可能です。  </li><li>接続作成において特別な設定は不要です。  </li><li>端末やオンプレミス データ ゲートウェイのバージョン維持をはじめとしたメンテナンスは不要です。  </li><li>VNET にネットワーク委任をする Power Platform 環境は<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/managed-environment-overview">マネージド環境</a>である必要があります。<br />※マネージド環境を利用するユーザーはプレミアムライセンスが割り当てられている必要があります。 </li></ul><!---------------------------------------------------------><p><a id='anchor-diff'></a></p><h2 id="5-機能の比較"><a href="#5-機能の比較" class="headerlink" title="5. 機能の比較"></a>5. 機能の比較</h2><p>用途や必要なリソースについてまとめました。  </p><table>  <caption>    Power Platfrom ネットワーク機能の比較  </caption>  <tr>    <th>機能名</th>    <th>用途</th>    <th>対象</th>    <th>マネージド環境</th>    <th>ゲートウェイ端末</th>    <th>完全閉域化</th>  </tr>  <tr>    <td>オンプレミス<br />データ ゲートウェイ</td>    <td>Power Platform コネクタ</td>    <td>指定した接続のみ</td>    <td>不要</td>    <td><b>必要</b></td>    <td>不可</td>  </tr>  <tr>    <td>仮想ネットワーク<br />データ ゲートウェイ</td>    <td><b>データフロー<br />Microsoft Fabric</b></td>    <td>指定した接続のみ</td>    <td>不要</td>    <td>不要</td>    <td>—</td>  </tr>  <tr>    <td>VNET for Power Platform</td>    <td>Power Platform コネクタ</td>    <td><b>環境内の全対応コネクタ</b></td>    <td><b>必要</b></td>    <td>不要</td>    <td><b>可能(※)</b></td>  </tr></table>  ※ Power Apps の利用も閉域にしたい場合は、Microsoft Peering の Express Route が必要となります。  <div class="alert is-info"><p class="alert-title">Note</p><p>マネージド環境については、以下の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/managed-environment-overview">マネージド環境の概要</a>  </p></div><!---------------------------------------------------------><p><a id='anchor-finish'></a></p><h2 id="6-おわりに"><a href="#6-おわりに" class="headerlink" title="6. おわりに"></a>6. おわりに</h2><p>当記事に関連した公開情報を掲載させていただきます。<br><a href="https://azure.microsoft.com/en-us/blog/how-microsoft-builds-its-fast-and-reliable-global-network/">マイクロソフトは高速で信頼性の高いグローバル ネットワークをどのように構築しているのか (microsoft.com)</a><br><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-onprem">オンプレミス データ ゲートウェイとは</a><br><a href="https://learn.microsoft.com/en-us/data-integration/vnet/overview">仮想ネットワーク (VNet) データ ゲートウェイとは</a><br><a href="https://learn.microsoft.com/en-us/power-platform/admin/vnet-support-overview">Virtual Network のサポートの概要</a><br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/managed-environment-overview">マネージド環境の概要</a>  </p><p>Azure 仮想ネットワーク上でパブリックネットワークに公開されていないリソースへの接続に関してご参考となりましたら幸いです。<br>ご不明な点や、もし具体的にお困りの点などがございましたら、弊社サポート一同にてお待ち申し上げておりますので、ぜひお気軽にお問合せください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの大友です。  &lt;/p&gt;
&lt;p&gt;セキュリティ等の観点から、Azure SQL Database や Azure OpenAI 等のサービスをパブリックネットワークに公開した状態での運用は避けたい、というお問合せを頂く事があります。&lt;br&gt;この記事では、Power Platform からプライベートな Azure 仮想ネットワークに存在するデータソースを利用する方法について紹介します。  &lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Connector and Connection" scheme="https://jpdynamicscrm.github.io/blog/tags/Connector-and-Connection/"/>
    
    <category term="Network" scheme="https://jpdynamicscrm.github.io/blog/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate クラウドフローの制限事項</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-limits/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-limits/</id>
    <published>2025-01-30T15:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.494Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの山田です。<br>本記事では 下記公開情報でご案内のPower Automate クラウドフローの制限について、具体例などを用いてわかりやすく説明いたします。</p><p><a href="https://learn.microsoft.com/ja-jp/power-automate/limits-and-config">自動化フロー、スケジュールされたフロー、インスタント フローの制限事項</a></p><p>本記事は上記公開情報の制限内容を補足・説明したものとなります。<br>実際の制限値などは上記公開情報をご確認ください。</p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#anchor-throughput-limits">スループットの制限</a><ol><li><a href="#anchor-power-platform-request-limits">Power Platform 要求の制限</a><ul><li><a href="#anchor-power-platform-request-limits-per">5分ごと、および24時間ごとのPower Platform要求</a></li><li><a href="#anchor-concurrent-outbound-calls">同時発信呼</a></li></ul></li><li><a href="#anchor-runtime-endpoint-request-limits">ランタイムエンドポイント要求</a><ul><li><a href="#anchor-concurrent-inbound-calls">同時着信</a></li><li><a href="#anchor-read-calls-per-5-minutes">5分ごとに通話を読み取る</a></li><li><a href="#anchor-invoke-calls-per-5-minutes">5分ごとの Invoke 呼び出し</a></li></ul></li><li><a href="#anchor-content-throughput-limit">コンテンツスループットの制限</a></li></ol></li><li><a href="#anchor-request-limits">要求の制限</a><ol><li><a href="#anchor-timeout">タイムアウトの制限</a><ul><li><a href="#anchor-outbound-synchronous-request">送信同期要求</a></li><li><a href="#anchor-outbound-asynchronous-request">送信非同期要求</a></li><li><a href="#anchor-inbound-request">受信要求</a></li></ul></li><li><a href="#anchor-message-size">メッセージサイズの制限</a></li><li><a href="#anchor-retry-policy">再試行ポリシー</a></li></ol></li><li><a href="#anchor-summary-list">制限対象単位と制限抵触時の動作まとめ</a></li></ol><hr><p><a id='anchor-throughput-limits'></a></p><h1 id="スループットの制限"><a href="#スループットの制限" class="headerlink" title="スループットの制限"></a>スループットの制限</h1><p>スループットの制限とは、単位時間あたりに処理できる数をチェックする、現時点で適用中のPower Automate 単独の制限でございます。<br>全てフロー単位での制限となり、フロー実行中にチェックされる制限となります。</p><p>この項目でご案内する制限は「スループットの制限」に該当いたします。<br>スループットの制限には下記3種類がございます。</p><ul><li>Power Platform 要求の制限</li><li>ランタイムエンドポイント要求</li><li>コンテンツスループットの制限</li></ul><p>制限に抵触した場合の動作、制限の緩和可否などは各種類によって異なります。</p><p>制限を決定する制限値は、ライセンスに基づくパフォーマンスプロファイルによって決定されます。<br>パフォーマンスプロファイルについては下記公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-automate/limits-and-config#performance-profiles">パフォーマンス プロファイル</a><br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#what-are-performance-profiles-and-how-do-i-know-which-performance-profile-my-cloud-flow-uses">パフォーマンス プロファイルとは何ですか?</a></p><p>制限の解除について、Power Automate のクラウドフローの場合はライセンス割り当て後にフローを再保存することで、新しいライセンスに紐づく制限を適用いたします。<br>再保存を行わなかった場合は、週に1度のバックグラウンド処理により適用いたします。</p><p><a id='anchor-power-platform-request-limits'></a></p><h2 id="Power-Platform-要求の制限"><a href="#Power-Platform-要求の制限" class="headerlink" title="Power Platform 要求の制限"></a>Power Platform 要求の制限</h2><p>Power Platform 要求の制限とは、フロー実行時のアクションに関する制限となります。</p><p>フロー単位での制限となります。<br>制限に抵触すると、フローが低速実行（スロットリング状態）となります。<br>また、低速実行が14日間連続で発生した場合は、クラウドフローは自動でオフとなります。</p><p>下記の２種類がございます。</p><ul><li>5分ごと、および24時間ごとのPower Platform要求</li><li>同時発信呼</li></ul><p><a id='anchor-power-platform-request-limits-per'></a></p><h3 id="5分ごと、および24時間ごとのPower-Platform要求"><a href="#5分ごと、および24時間ごとのPower-Platform要求" class="headerlink" title="5分ごと、および24時間ごとのPower Platform要求"></a>5分ごと、および24時間ごとのPower Platform要求</h3><p>詳細については下記記事をご参照ください。<br><a href="https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-ppr/">Power Automate / Power Platform 要求数制限</a></p><p><a id='anchor-concurrent-outbound-calls'></a></p><h3 id="同時発信呼"><a href="#同時発信呼" class="headerlink" title="同時発信呼"></a>同時発信呼</h3><p>同時発信呼とは、ひとつのフローで同時に実行できるアクション数を指しております。<br>具体例として、フロー内でアクションが並列に実行されるよう構成されている場合や、複数のユーザーが同時にフローを実行する場合にこの制限に抵触する可能性が考えられます。</p><p>制限に抵触した場合、フローの実行が失敗します。</p><p>回避策として、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時実行する処理数を制限することで、同時発信呼の制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンス プロファイルをより高いものにしていただくこととなります。</p><p><a id='anchor-runtime-endpoint-request-limits'></a></p><h2 id="ランタイムエンドポイント要求"><a href="#ランタイムエンドポイント要求" class="headerlink" title="ランタイムエンドポイント要求"></a>ランタイムエンドポイント要求</h2><p>ランタイムエンドポイントとは、フロー自体のエンドポイントを指します。 (例: <a href="https://prod-00.westus.logic.azure.com/">https://prod-00.westus.logic.azure.com:443/</a>)<br>例えば、下図の「HTTP要求の受信時」トリガー(manual)を使用するフローがある場合、「HTTP URL」に直接POSTリクエストを送信することで、フローを起動することが可能でございます。</p><p><img src="/blog/powerautomate/cloudflow-limits/http-requestes-recieve.png"> </p><p>上記の例のように、フロー実行時のエンドポイントへ (から) の直接のアクセスをランタイムエンドポイント要求と呼びます。<br>エンドポイントごとに制限対象となり、制限に抵触した場合、フローの実行が失敗します。</p><p>ランタイムエンドポイント要求には3つの制限がございます。  </p><ul><li>同時着信</li><li>5分ごとに通話を読み取る</li><li>5分ごとの Invoke 呼び出し</li></ul><p><a id='anchor-concurrent-inbound-calls'></a></p><h3 id="同時着信"><a href="#同時着信" class="headerlink" title="同時着信"></a>同時着信</h3><p>同時着信とは、ひとつのフローのランタイムエンドポイントにて、同時に受付可能な要求数を指します。<br>そのため、例えば、複数ユーザーでボタントリガーのフローを共有しており、1,000 名以上のユーザーが同時刻にフローを起動した場合、この制限に抵触いたします。</p><p>制限に抵触した場合、フローの実行が失敗します。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、同時着信の数を減らし、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>コンカレンシー制御=同時実行管理は、フロー編集画面でのトリガーの「設定」タブにてご利用いただけます。<br><img src="/blog/powerautomate/cloudflow-limits/concurrency-limit.png"> </p><div class="alert is-important"><p class="alert-title">重要</p><p>サービス保護の制限のため、緩和策はございません。</p><p>回避策をご対応ください。</p></div><p><a id='anchor-read-calls-per-5-minutes'></a></p><h3 id="5分ごとに通話を読み取る"><a href="#5分ごとに通話を読み取る" class="headerlink" title="5分ごとに通話を読み取る"></a>5分ごとに通話を読み取る</h3><p>5分間に実行可能なランタイムエンドポイントへの読み取り要求を指します。<br>例えば、フローの実行履歴から生の入力や出力を取得する際がこれにあたります。</p><p>例として、SharePoint コネクタの複数の項目の取得アクションを実行し、大量のデータを取得した場合、<br>生の出力データを確認するには、実行履歴詳細ページにて、「クリックしてダウンロードします」リンクをクリックする必要がある場合がございます。<br>リンクをクリックすると、ランタイムエンドポイントへの要求が実行され、生データをブラウザにて直接確認することが可能となります。<br>この要求が、ランタイムエンドポイントへの読み取り要求にあたります。</p><p>下図は「クリックしてダウンロードします」リンクをクリックした場合の例ですが、URL よりランタイムエンドポイントへの要求が実行されていることがわかります。</p><p><img src="/blog/powerautomate/cloudflow-limits/read-calls-per-5-minutes.png"></p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、5分ごとの読み取り数を削減し、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンスプロファイルをより高いものにしていただくこととなります。</p><p><a id='anchor-invoke-calls-per-5-minutes'></a></p><h3 id="5分ごとの-Invoke-呼び出し"><a href="#5分ごとの-Invoke-呼び出し" class="headerlink" title="5分ごとの Invoke 呼び出し"></a>5分ごとの Invoke 呼び出し</h3><p>5 分間に実行可能なランタイムエンドポイントへの呼び出し要求を指します。<br>例えば、上記にご案内した 「HTTP 要求の受信時」トリガーを呼び出す場合など、フローを起動する操作がこれにあたります。</p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、5分ごとの呼び出し数を削減し、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンスプロファイルをより高いものにしていただくこととなります。</p><p><a id='anchor-content-throughput-limits'></a></p><h2 id="コンテンツスループットの制限"><a href="#コンテンツスループットの制限" class="headerlink" title="コンテンツスループットの制限"></a>コンテンツスループットの制限</h2><p>コンテンツスループットとは、フロー内の各アクションを実行後の入力および出力のデータサイズを指しております。<br>よって本制限は、フローの各実行において、単位時間に処理できるアクションで取り扱う情報量の制限となります。</p><p>例えば、フロー内で SharePoint コネクタの「項目の取得」アクションが使用された場合、<br>実行履歴に表示される入力 (SharePoint に対して送信されたアドレスやリスト名など) と出力 (SharePoint から取得した項目の詳細情報) のデータサイズがカウントされます。<br>フロー毎に、全てのアクションをカウントした合計サイズによる制限となります。</p><p>継続した5分、または24時間におけるフローごとに制限対象となります。</p><p>制限に抵触すると、フローが低速実行（スロットリング状態）となります。</p><p>回避策としては、例えば、コンカレンシー制御=同時実行管理をオンにすることが挙げられます。<br>同時に実行する数を制限することで、制限時間内の実行数を削減し、制限への抵触を回避いただけます。<br>または、ユーザー側で実行時間をずらす=ユーザー側でフローをトリガーするタイミングをずらすことも有効です。</p><p>制限の緩和策としては、パフォーマンスプロファイルをより高いものにしていただくこととなります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>低速実行が14日間連続で発生した場合は、クラウドフローは自動でオフとなります。</p></div><p><a id='anchor-request-limits'></a></p><h1 id="要求の制限"><a href="#要求の制限" class="headerlink" title="要求の制限"></a>要求の制限</h1><p>HTTP要求の制限になります。<br>フロー実行では各アクションの中でHTTP要求を実行し、処理を行っております。<br>要求の制限は、各HTTP要求を実行するときにチェックされる制限でございます。</p><p><a id='anchor-timeout'></a></p><h2 id="タイムアウトの制限"><a href="#タイムアウトの制限" class="headerlink" title="タイムアウトの制限"></a>タイムアウトの制限</h2><p>この項目ではタイムアウトとなる制限をご紹介します。<br>制限に抵触した場合、フローの実行が失敗します。  </p><p>下記3種類の制限がございます。  </p><ul><li>送信同期要求</li><li>送信非同期要求</li><li>受信要求</li></ul><div class="alert is-important"><p class="alert-title">重要</p><p>サービス保護の制限のため、いずれの制限にも緩和策はございません。</p><p>タイムアウトの制限は緩和できない＝タイムアウトまでの時間を延ばすことはできないものとなっております。</p></div><p><a id='anchor-outbound-synchronous-request'></a></p><h3 id="送信同期要求"><a href="#送信同期要求" class="headerlink" title="送信同期要求"></a>送信同期要求</h3><p>フロー内の同期処理の待ち時間となります。<br>リクエストを投げてから待ち時間以内に応答がない場合、制限に抵触します。<br>INSERTやGET要求などAPIごとに制限対象となります。</p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>例えば、DataverseやSQLテーブルの読み取りや書き込み時などが挙げられます。<br>テーブルに対する各操作をリクエストし、待ち時間以内に操作が完了せず、応答がない場合、フローの実行が失敗します。</p><p><a id='anchor-outbound-asynchronous-request'></a></p><h3 id="送信非同期要求"><a href="#送信非同期要求" class="headerlink" title="送信非同期要求"></a>送信非同期要求</h3><p>アクションで実行されるHTTP要求（またはAPI）の非同期処理の待ち時間となります。<br>実行しているアクションごとでの時間となります。</p><p>例えば、承認アクションなどが挙げられます。<br>承認コネクタを通じて、承認リクエストを投げると、承認者からの承認完了を待ちます。</p><p>制限に抵触した場合（＝待ち時間以内に承認完了の応答がない場合）、フローの実行は失敗します。</p><div class="alert is-important"><p class="alert-title">重要</p><p>制限の回避策はございません。</p></div><p><a id='anchor-inbound-request'></a></p><h3 id="受信要求"><a href="#受信要求" class="headerlink" title="受信要求"></a>受信要求</h3><p>応答アクションがフロー内で使用されている場合、受信要求120秒の制限が適用される場合がございます。<br>当制限は制限された時間のみ受信要求を待機する動作となります。</p><p>フロー実行単位での制限となります。</p><p>制限に抵触した場合、フロー実行が失敗します。</p><p>フローの実行開始からカウントし、受信要求の120秒を超えて、応答アクションを実行できない場合、<br>応答アクションで設定したレスポンスではなく、504 Bad Gateway Timeoutを返します。<br>応答アクションが使用されていないフローの場合は、呼び出し元にすぐに202 Acceptedを返します。</p><p>例えば、下記のような構成のフローがございます。</p><ul><li>「Power Apps がフローを呼び出したとき (V2)」トリガー</li><li>トリガーに続いて、いくつかのアクション</li><li>最後に「Power App またはフローに応答する」アクション</li></ul><p>上記フローはPower Appsキャンバスアプリから対象クラウドフローが呼び出され、「Power App またはフローに応答する」アクションによってそのフローからアプリに応答を返します。<br>トリガーと「Power App またはフローに応答する」アクションまでの間に、多くのアクションが設定されている場合、「Power App またはフローに応答する」アクションが実行されるまでに時間がかかることが想定されます。<br>トリガーが発動してから、「Power App またはフローに応答する」アクションを実行するまでに120秒を超える場合、制限に抵触いたします。</p><p>回避策としては、「Power App またはフローに応答する」アクション前までのアクションを子フローとして実行します。<br>子フローでの実行時間は待機時間にカウントされないため、制限対象の時間の短縮が可能でございます。</p><p><a id='anchor-message-size'></a></p><h2 id="メッセージサイズの制限"><a href="#メッセージサイズの制限" class="headerlink" title="メッセージサイズの制限"></a>メッセージサイズの制限</h2><p>1つのアクションでの、 HTTP要求可能なメッセージサイズの制限になります。</p><p>この制限に抵触した場合、フロー実行が失敗します。<br>下記のようなメッセージと共にエラーが発生します。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP 要求に失敗しました: &#x27;Cannot write more bytes to the buffer than the configured maximum buffer size: 104857600.&#x27;</span><br></pre></td></tr></table></figure><p>回避策としては、アクションで処理するデータサイズを小さくします。<br>よりサイズが小さいデータを対象にアクションを設定ください。</p><p>緩和策として、通常は100MBまでとなりますが、下記条件を満たす場合、この制限は1GBとなります。<br>・アクションがチャンクをサポートしている<br>・アクションの設定でチャンクを許可している</p><p><img src="/blog/powerautomate/cloudflow-limits/message-size-with-chunking.png"></p><p><a id='anchor-retry-policy'></a></p><h2 id="再試行ポリシー"><a href="#再試行ポリシー" class="headerlink" title="再試行ポリシー"></a>再試行ポリシー</h2><p>フローが失敗した場合の再試行数の制限になります。<br>上限以上の設定は不可となり、フローが保存できません。</p><p>再試行ポリシーに「指数の間隔」を設定しますと、設定された最小間隔、最大間隔の間でランダムに再試行が行われます。<br>例えば、「間隔」に “PT7S”＝7秒と設定した場合、7秒に指数をかけて、以下のように最小間隔と最大間隔を算出します。</p><p>最小間隔　～　最大間隔</p><ul><li>1回目0秒　～7秒（7×0～7×1）</li><li>2回目7秒　～14秒（7×1～7×2）</li><li>3回目14秒　～28秒（7×2～7×4）</li><li>4回目28秒　～56秒（7×4～7×8）</li><li>5回目56秒　～112秒（7×8～7×16）</li><li>6回目112秒　～224秒（7×16～7×32）</li><li>7回目224秒　～448秒（7×32～7×64）</li></ul><p>算出された、最小間隔から最大間隔の間のどこかで、処理が再試行されます。<br>「最小間隔」「最大間隔」はオプション項目となり、設定しない場合は既定値で動作いたします。</p><p>「最小間隔」は、再試行させたい最小の間隔を設定します。「5秒」と設定しますと<br>再試行間隔は「間隔」から算出された最小間隔に関わらず、前の実行から5秒経過後となります。</p><p>「最大間隔」は、再試行させたい最大の間隔を設定します。<br>「1日」と設定しますと、「間隔」から算出された最大間隔に関わらず、1日以内に再試行されます。<br>「1時間」と設定しますと1時間以内に再試行されます。</p><p>下記公開情報もご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/azure/logic-apps/error-exception-handling#exponential-interval">指数間隔の再試行ポリシー</a></p><div class="alert is-info"><p class="alert-title">Note</p><p>再試行ポリシーの間隔、最小間隔、最大間隔は「ISO 8601」という形式を利用して設定します。</p><p>継続時間ということを表すため、「P」を先頭につけます。</p><p>時分秒を設定する時は「P」＋「T」＋数字＋「時分秒」という形で記載します。</p><p>例）</p><p>1時間　→PT1H</p><p>2時間　→PT2H</p><p>15分　→PT15M</p><p>30秒　→PT30S  </p><p>日を設定する時は、「P」＋数字＋「D」という形で記載します。</p><p>例）</p><p>1日　→P1D</p></div><p><a id='anchor-summary-list'></a></p><h1 id="制限対象単位と制限抵触時の動作まとめ"><a href="#制限対象単位と制限抵触時の動作まとめ" class="headerlink" title="制限対象単位と制限抵触時の動作まとめ"></a>制限対象単位と制限抵触時の動作まとめ</h1><table><thead><tr><th align="left">制限種類</th><th align="left">制限対象単位</th><th align="left">制限抵触時の動作</th></tr></thead><tbody><tr><td align="left"><a href="#anchor-power-platform-request-limits-per">5分ごと、および24時間ごとのPower Platform要求</a></td><td align="left"><a href="https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-ppr/">Power Automate / Power Platform 要求数制限</a>を参照</td><td align="left">フローの実行が低速化</td></tr><tr><td align="left"><a href="#anchor-concurrent-outbound-calls">同時発信呼</a></td><td align="left">フローごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-concurrent-inbound-calls">同時着信</a></td><td align="left">エンドポイントごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-read-calls-per-5-minutes">5分ごとに通話を読み取る</a></td><td align="left">エンドポイントごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-invoke-calls-per-5-minutes">5分ごとの Invoke 呼び出し</a></td><td align="left">エンドポイントごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-content-throughput-limit">コンテンツスループットの制限</a></td><td align="left">フローの実行ごと</td><td align="left">フローの実行が低速化</td></tr><tr><td align="left"><a href="#anchor-outbound-synchronous-request">送信同期要求</a></td><td align="left">実行するAPI≒アクションごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-outbound-asynchronous-request">送信非同期要求</a></td><td align="left">実行するAPI≒アクションごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-inbound-request">受信要求</a></td><td align="left">フローごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-message-size">メッセージサイズの制限</a></td><td align="left">アクションごと</td><td align="left">フローの実行が失敗</td></tr><tr><td align="left"><a href="#anchor-retry-policy">再試行ポリシー</a></td><td align="left">フローごと</td><td align="left">フローの保存が不可</td></tr></tbody></table><hr><h2 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h2><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって若干の UI の遷移など異なる場合があります。その場合は画面の指示に従って進めてください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの山田です。&lt;br&gt;本記事では 下記公開情報でご案内のPower Automate クラウドフローの制限について、具体例などを用いてわかりやすく説明いたします。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/ja-jp/power-automate/limits-and-config&quot;&gt;自動化フロー、スケジュールされたフロー、インスタント フローの制限事項&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;本記事は上記公開情報の制限内容を補足・説明したものとなります。&lt;br&gt;実際の制限値などは上記公開情報をご確認ください。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/tags/Cloud-flow/"/>
    
  </entry>
  
  <entry>
    <title>AI Builder 利用制限について</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Block-AI-Builder/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Block-AI-Builder/</id>
    <published>2024-12-27T02:30:00.000Z</published>
    <updated>2025-05-01T03:35:34.588Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの藤田です。  </p><p>AI Builder は AI モデルを作成・カスタマイズして Power Platform で利用できるサービスです。<br><br>魅力的なサービスではございますが、お客様の社内ポリシー等で利用を制限したいというお問い合わせをいただくことがあります。<br><br>本記事では、AI Builder の利用前提条件と利用制限方法について解説します。</p><!-- ここに Read more 以降の文章 --><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、 本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください</p></div><hr><h2 id="AI-Builder-の利用前提条件"><a href="#AI-Builder-の利用前提条件" class="headerlink" title="AI Builder の利用前提条件"></a>AI Builder の利用前提条件</h2><p>AI Builder を利用するためには、以下の条件を満たす必要があります：</p><ul><li><p><strong>ライセンスの保有：</strong> </p><ul><li>Power Automate や Power Apps にアクセスできるライセンスが必要です（試用版やMicrosoft 365付帯ライセンスを含む）。</li><li>Dynamics 365ライセンスを持つユーザーも利用可能です。</li><li>具体的なライセンスや使用権の詳細は <a href="https://go.microsoft.com/fwlink/?LinkId=2085130">ライセンスガイド</a> をご参照ください。</li></ul></li><li><p><strong>AI Builderクレジット：</strong> </p><ul><li>テナントにAI Builder のクレジットがあることが必要です。</li><li>テナントにクレジットがない場合、ユーザー単位でAI Builder の試用版ライセンスを取得して利用することができます。</li></ul></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>AI Builder のクレジットは、環境に割り当てて使用します。 </p><p></p><p>Power Platform 管理センターにて、[設定] &gt; [AI Bulilder クレジット] の「ユーザーによる未割当のクレジットの使用を許可する」設定 がオンになっている場合は、環境に割り当てられていなくとも使用させることができます。 </p><p></p><p>クレジットは環境ごとに割り当てることができますが、モデルごと・アプリごと・フローごと等の単位で割り当てることはできません。</p></div><ul><li><strong>環境設定：</strong> <ul><li>プレビュー段階のモデルを利用する場合、環境設定で「プレビュー中のAI Builderモデルの種類の使用を有効にする」をオンにする必要があります。</li><li>AIプロンプトを利用するためには、「Power PlatformやCopilot StudioでAIプロンプト機能を有効化する」と「リージョン間でデータを移動する」の設定がオンになっている必要があります。</li></ul></li></ul><h2 id="AI-Builder-の利用制限方法"><a href="#AI-Builder-の利用制限方法" class="headerlink" title="AI Builder の利用制限方法"></a>AI Builder の利用制限方法</h2><p>AI Builder の利用を制限するためには、以下の設定を行います。</p><ul><li><strong>AI プロンプトの無効化：</strong> <ul><li>Power Platform 管理センター &gt; 環境 &gt; 対象環境 &gt; 生成AI機能 – 「リージョン間でデータを移動する」 設定をオフにします。※</li><li>Power Platform 管理センター &gt; 環境 &gt; 対象環境 &gt; 設定 &gt; 機能より、AI プロンプト – 「Power Platform や Copilot Studio で AI プロンプト機能を有効化する」 設定をオフにします。※<br><br>公開情報：<a href="https://learn.microsoft.com/ja-jp/ai-builder/administer#enable-or-disable-ai-prompts-in-power-platform-and-copilot-studio">AIプロンプトを有効または無効にする</a></li></ul></li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>※ 「リージョン間でデータを移動する」 設定、「Power Platform や Copilot Studio で AI プロンプト機能を有効化する」 設定は、</p><p>AI Builder のみならず Copilot Studio 等、Power Platform 上の生成 AI 機能に影響しますのでご注意ください。</p><p></p><p>Copilot と生成 AI 機能の無効化について、<a href="https://jpdynamicscrm.github.io/blog/copilotstudio/copilot-studio-data-handling/#Copilot-%E3%81%A8%E7%94%9F%E6%88%90-AI-%E6%A9%9F%E8%83%BD%E3%81%AE%E7%84%A1%E5%8A%B9%E5%8C%96%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">こちらのブログ記事</a>もご参照ください。</p></div><ul><li><p><strong>AI モデルの利用無効化：</strong></p><ul><li><p>テナントにAI Builderのクレジットがない場合：</p><ul><li>試用版を無効にするために、<a href="https://learn.microsoft.com/ja-jp/ai-builder/ai-builder-trials#can-i-block-users-in-my-organization-from-signing-up-for-an-ai-builder-trial">「ユーザーによる未割当のクレジットの使用を許可する」設定</a>をオフにします。</li><li><a href="https://learn.microsoft.com/ja-jp/ai-builder/administer#enable-or-disable-ai-builder-preview-features">「プレビュー中のAI Builderモデルの種類の使用を有効にする」設定</a>をオフにします。</li></ul></li><li><p>テナントにAI Builderのクレジットがある場合：</p><ul><li>「ユーザーによる未割当のクレジットの使用を許可する」設定をオフにします。</li><li>対象環境にAI Builderのクレジットが割り当てられていないことを確認します。</li><li>「プレビュー中のAI Builderモデルの種類の使用を有効にする」設定をオフにします。</li></ul></li></ul></li></ul><p>これらの設定を行うことで、AI Builderの試用版やクレジットを消費しないプレビュー段階のモデルを含め、AIモデルの作成・使用を制限することができます。</p><h2 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h2><p>ユーザーの権限に応じて、既存のモデルやプロンプトの一覧にアクセスすることは可能ですが、上記設定によりモデル・プロンプトの利用はできない状態となります。</p><p>なお、外部サイト等にて、セキュリティ ロールを使用した無効化方法を検証した情報があります。</p><p>Power Apps や Power Automate を使用するための Environment Maker ロールに AI Builder の利用ができる特権が含まれておりますため、<br>このロールの剥奪を行うと影響範囲がAI Builderのみではなくなる点、<br>また既定の環境では Environment Maker の剝奪は出来ない点等から、<br>セキュリティ ロールを使用した制御は「AI Builder の利用制限」としては推奨される方法ではございませんのでご注意ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの藤田です。  &lt;/p&gt;
&lt;p&gt;AI Builder は AI モデルを作成・カスタマイズして Power Platform で利用できるサービスです。&lt;br&gt;&lt;br&gt;魅力的なサービスではございますが、お客様の社内ポリ</summary>
      
    
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform/"/>
    
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="AI Builder" scheme="https://jpdynamicscrm.github.io/blog/tags/AI-Builder/"/>
    
  </entry>
  
  <entry>
    <title>キャンバス アプリ・クラウド フローで使用しているコネクタの一覧取得</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/list-connectors-used-by-apps-and-flows/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/list-connectors-used-by-apps-and-flows/</id>
    <published>2024-12-27T02:30:00.000Z</published>
    <updated>2025-05-01T03:35:34.656Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの藤田、網野です。  </p><p>よくお問合せをいただく、Power Apps キャンバス アプリ・Power Automate クラウド フローで使用されているコネクタの一覧取得方法についてご案内いたします。</p><p>特定のコネクタが使用されているかどうか、どのフローやアプリでプレミアム コネクタが使用されているか、といったことを確認する際に是非お役立てください。</p><span id="more"></span><hr><h2 id="PowerShell-による出力"><a href="#PowerShell-による出力" class="headerlink" title="PowerShell による出力"></a>PowerShell による出力</h2><h3 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h3><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-powershell#cmdlets">公開情報 - Power Apps と Power Automate の PowerShell サポート</a> に従い、PowerApps の管理モジュールを PowerShell を実行する端末にインストールしてください。</p><h3 id="コマンド"><a href="#コマンド" class="headerlink" title="コマンド"></a>コマンド</h3><p>アプリ・フローで使用されている接続を使用するコネクタにつきましては、Gist に登録されている PowerShell スクリプトをご実行いただくことで取得することが出来ます。</p><p>具体的なコマンドは <a href="https://gist.github.com/jameswh3/b1ddca1705a1e747ce3c8453e1f6dc7e">Gist - Get-PowerAppsFlowsConnections.ps1</a> をご参照ください。</p><p>日本語が含まれるアプリやフローの情報を取得する場合は、PowerShell コマンドの最終行に “-Encofing UTF8” を追加し、文字コードの指定してください。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$powerPlatObjects | Export-Csv $outputFile -NoTypeInformation -Encoding UTF8</span><br></pre></td></tr></table></figure><h3 id="出力結果"><a href="#出力結果" class="headerlink" title="出力結果"></a>出力結果</h3><p>コマンド内で指定したフォルダに以下のような形式で CSV ファイルとして出力されます。<br><img src="/blog/powerplatform/list-connectors-used-by-apps-and-flows/csv.png"></p><h3 id="活用例"><a href="#活用例" class="headerlink" title="活用例"></a>活用例</h3><h4 id="◆-フローやアプリで使用しているコネクタを確認する"><a href="#◆-フローやアプリで使用しているコネクタを確認する" class="headerlink" title="◆ フローやアプリで使用しているコネクタを確認する"></a>◆ フローやアプリで使用しているコネクタを確認する</h4><p>“ConnectorName” 列または”ConnectionId” 列から確認できます。<br><img src="/blog/powerplatform/list-connectors-used-by-apps-and-flows/csv-connector.png"></p><p>“ConnectoinId” 列から “/providers/Microsoft.PowerApps/scopes/admin/apis/shared_” を削除すると、コネクタIDが取得できます。<br>取得したコネクタ ID を利用して、コネクタの公開情報へアクセスすることができます。<br>“<a href="https://learn.microsoft.com/ja-jp/connectors/%7B%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BFID%7D/&quot;">https://learn.microsoft.com/ja-jp/connectors/{コネクタID}/&quot;</a>  </p><p>例)</p><ul><li>Sharepoint : <a href="https://learn.microsoft.com/ja-jp/connectors/sharepointonline/">https://learn.microsoft.com/ja-jp/connectors/sharepointonline/</a>  </li><li>SQL Server : <a href="https://learn.microsoft.com/ja-jp/connectors/sql/">https://learn.microsoft.com/ja-jp/connectors/sql/</a>  </li></ul><h4 id="◆-フローやアプリでプレミアムコネクタが使われているか確認する"><a href="#◆-フローやアプリでプレミアムコネクタが使われているか確認する" class="headerlink" title="◆ フローやアプリでプレミアムコネクタが使われているか確認する"></a>◆ フローやアプリでプレミアムコネクタが使われているか確認する</h4><p>“Tier” 列が “Premium” となっているコネクタがプレミアムコネクタとなります。<br><img src="/blog/powerplatform/list-connectors-used-by-apps-and-flows/csv-premium.png"></p><h3 id="留意点"><a href="#留意点" class="headerlink" title="留意点"></a>留意点</h3><p>本方法は接続に基づいて出力を行うため、HTTP コネクタなど接続が作られないコネクタは出力することができません。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの藤田、網野です。  &lt;/p&gt;
&lt;p&gt;よくお問合せをいただく、Power Apps キャンバス アプリ・Power Automate クラウド フローで使用されているコネクタの一覧取得方法についてご案内いたします。&lt;/p&gt;
&lt;p&gt;特定のコネクタが使用されているかどうか、どのフローやアプリでプレミアム コネクタが使用されているか、といったことを確認する際に是非お役立てください。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Canvas app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Canvas-app/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate / Power Platform 要求数制限</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-ppr/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/power-automate-ppr/</id>
    <published>2024-12-24T00:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.551Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの網野です。 <br><br>今回は Power Automate における Power Platform 要求数の制限についてご案内いたします。</p><div class="alert is-important"><p class="alert-title">重要</p><p><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/online-requirements">公開情報</a> が正となりますので、ライセンスをご用意する際は必ず最新の公開情報を確認してください。</p></div><span id="more"></span><h2 id="Power-Platform-要求数とは"><a href="#Power-Platform-要求数とは" class="headerlink" title="Power Platform 要求数とは"></a>Power Platform 要求数とは</h2><p>Power Automate ではコネクタのアクションを組み合わせることで、複数の製品をまたいだ処理を自動化することができます。<br>アクションやトリガーでは、Power Platform 内部で実行するアクションを含め、API でデータのやり取りを行っており、Power Automate ではその API リクエストを Power Platform 要求数と呼びます。</p><p>もう少し詳しくイメージをつかむために、単純なフローを用いて説明します。<br>指定のメールフォルダにメールが届いたときにメールの内容をエクセルに転記するフローを作成するとします。<br>このフローを実行すると、「新しいメールが届いたとき(V3)」トリガーと「表に行を追加」アクションでそれぞれ 1 回ずつ、合計 2 回分 Power Platform 要求数を消費します。<br><img src="/blog/powerautomate/power-automate-ppr/api-request.png"></p><h2 id="Power-Platform-要求数の制限とは"><a href="#Power-Platform-要求数の制限とは" class="headerlink" title="Power Platform 要求数の制限とは"></a>Power Platform 要求数の制限とは</h2><p>フローは上記のように、内部的に Power Platform 要求数を消費して実行されます。<br>Power Platform 要求数はライセンスごとに上限値が決まっており、上限値を超えて利用するとフローが低速化する動作となります。<br>一例をあげますと、通常 1 分程度で完了するフローが完了まで 2 時間程度かかるというような動作になります。<br>この制限のことを Power Platform 要求数の制限と呼びます。</p><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#what-can-i-do-if-my-flow-is-above-limits">フローが制限を超過している場合はどうすればよいですか?</a></li><li><a href="https://jpdynamicscrm.github.io/blog/powerautomate/troubleshoot-throttling-flow/">低速フローのトラブル シューティング</a></li></ul><p>フローは 24 時間あたりの Power Platform 要求数を随時監視しており、要求数がライセンスの制限値を上回りますと内部的にアクションが待機状態になります。待機状態になったアクションは、24 時間あたりの Power Platform 要求数がライセンスの制限値を下回りますと再び動き出します。<br>判定はスライディングウィンドウ方式で行われており、先に実行しているアクションが完了していくことで過去 24 時間の要求数が制限値を下回るようになり、待機状態のアクションが順次実行されていきます。</p><h2 id="ライセンスごとの-API-リクエスト数"><a href="#ライセンスごとの-API-リクエスト数" class="headerlink" title="ライセンスごとの API リクエスト数"></a>ライセンスごとの API リクエスト数</h2><p>ライセンスごとの Power Platform 要求数は以下のとおりです。<br>2024 年 12 月現在は、「24時間あたりのリクエスト数（移行期間）」列に記載された制限が適用されています。<br>移行期間の終了日は決まっていませんが、移行期間後の制限に合わせてライセンスをご用意いただきますようお願いをしています。</p><table><thead><tr><th align="left">ライセンス</th><th align="right">24時間あたりのリクエスト数</br>（移行期間<b><font color=red>後</font></b>）</th><th align="right">24時間あたりのリクエスト数</br>（移行期間）</th></tr></thead><tbody><tr><td align="left">Power Automate Premium</td><td align="right">ユーザーあたり</br>40,000</td><td align="right">クラウドフローあたり</br>200,000</td></tr><tr><td align="left">Power Automate Process</td><td align="right">ライセンスあたり</br>250,000</td><td align="right">ライセンスあたり</br>500,000</td></tr><tr><td align="left">Power Automate per user (レガシー)</td><td align="right">ユーザーあたり</br>40,000</td><td align="right">クラウドフローあたり</br>200,000</td></tr><tr><td align="left">Power Automate per flow (レガシー)</td><td align="right">ライセンスあたり</br>250,000</td><td align="right">ライセンスあたり</br> 500,000</td></tr><tr><td align="left">Power Automate free</td><td align="right">ユーザーあたり</br>6,000</td><td align="right">クラウドフローあたり</br>10,000</td></tr><tr><td align="left">Power Automate 試用版</td><td align="right">ユーザーあたり</br>6,000</td><td align="right">クラウドフローあたり</br>10,000</td></tr><tr><td align="left">Microsoft/Office 365</td><td align="right">ユーザーあたり</br>6,000</td><td align="right">クラウドフローあたり</br>10,000</td></tr><tr><td align="left">Power Apps Premium</td><td align="right">ユーザーあたり</br>40,000</td><td align="right">クラウドフローあたり</br>200,000</td></tr><tr><td align="left">Dynamics 365 Professional</td><td align="right">ユーザーあたり</br>40,000</td><td align="right">クラウドフローあたり</br>200,000</td></tr><tr><td align="left">Dynamics 365 エンタープライズアプリケーション</td><td align="right">ユーザーあたり</br>40,000</td><td align="right">クラウドフローあたり</br>200,000</td></tr><tr><td align="left">Dynamics 365 Team Members</td><td align="right">ユーザーあたり</br>6,000</td><td align="right">クラウドフローあたり</br>10,000</td></tr></tbody></table><p>なお、2024 年 12 月現在は Power Automate にのみ制限がかかっていますが、移行期間後は Power Apps / Copilot Studio / Dataverse にも Power Platform 要求数の制限が適用される予定です。<br>そのため、表の移行期間後の「ユーザーあたり」の制限値は<u> 4 製品合算での制限値</u>になります。<br>決まっている内容につきましては、<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#what-is-a-microsoft-power-platform-request">要求の制限と割り当て</a> に記載していますのでご参照ください。</p><div class="alert is-important"><p class="alert-title">重要</p><p>移行期間中の手動トリガーはクラウドフローあたり 20 万アクションの制限が適用されます。</p><p></p><p>手動トリガーの Power Platform 要求数はライセンスのアップグレード等により増やすことができます。  </p></div><div class="alert is-important"><p class="alert-title">重要</p><p>移行期間中のみ、上記に加えて 1 日あたりユーザーごとに 100 万アクションの制限があります。</p><p></p><p>また、移行期間終了前後に関わらず、5 分あたり 10 万アクションの制限があります。</p><p></p><p>上記制限はライセンス等で拡張することはできません。</p></div><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#request-limits-in-power-automate">Power Automate の要求の制限</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#what-are-performance-profiles-and-how-do-i-know-which-performance-profile-my-cloud-flow-uses">パフォーマンス プロファイルとは何ですか?</a></li></ul><h3 id="ユーザーライセンスを複数持っているときの考え方"><a href="#ユーザーライセンスを複数持っているときの考え方" class="headerlink" title="ユーザーライセンスを複数持っているときの考え方"></a>ユーザーライセンスを複数持っているときの考え方</h3><p>ユーザーライセンスを複数持っている場合、利用可能な Power Platform 要求数の計算は移行期間前後で異なります。</p><p><b>移行期間中</b> ・・　Power Platform 要求数はお持ちのユーザーライセンスの中で最も要求数の多いライセンスに準じます。<br><b>移行期間後</b> ・・　ユーザーライセンスごとの Power Platform 要求数を合算した要求数を利用できます。</p><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#other-details">その他の詳細</a></li></ul><h2 id="テナント内の-Power-Platform-要求数を確認する方法"><a href="#テナント内の-Power-Platform-要求数を確認する方法" class="headerlink" title="テナント内の Power Platform 要求数を確認する方法"></a>テナント内の Power Platform 要求数を確認する方法</h2><h3 id="管理者"><a href="#管理者" class="headerlink" title="管理者"></a>管理者</h3><p>以下の３つのレポートから確認できます。<br>詳細はリンク先の公開情報をご参照ください。  </p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#per-flow-report">フローごとのレポート</a> ・・フローごとのライセンスの Power Platform 要求数の消費状況を確認できます。</li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#licensed-user-report">ライセンスユーザーレポート</a> ・・ユーザーごとの Power Platform 要求数の消費状況を確認できます</li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#non-licensed-user-report">非ライセンスユーザーレポート</a>・・サービスプリンシパルが所有者のフローなど、テナントプールの Power Platform 要求数の消費状況を確認できます</li></ul><div class="alert is-info"><p class="alert-title">Note</p><p>Power Platform 要求数のレポート機能は 2024 年 12 月現在、プレビュー機能として提供しています。</p></div><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#as-an-admin-what-tools-do-i-have-to-analyze-my-environments-usage">管理者が環境の使用状況を分析するためのどのようなツールがありますか?</a></li></ul><h3 id="フロー作成者、共同所有者"><a href="#フロー作成者、共同所有者" class="headerlink" title="フロー作成者、共同所有者"></a>フロー作成者、共同所有者</h3><p>恐れ入りますが、フロー作成者や共同所有者が Power Platform 要求数の消費状況を確認する方法は現時点ではご用意がございません。<br>フロー単位で消費された Power Platform 要求数は <a href="https://jpdynamicscrm.github.io/blog/powerautomate/troubleshoot-throttling-flow/#%E3%83%95%E3%83%AD%E3%83%BC%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E8%A6%81%E6%B1%82%E6%95%B0%E3%82%92%E6%95%B0%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B">フローのアクション要求数を数えてみる</a> に記載の方法で確認できます。</p><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#as-a-maker-what-tools-do-i-have-to-analyze-my-usage">作成者が使用状況を分析するためのどんなツールがありますか?</a></li></ul><h2 id="Power-Platform-要求数のカウント方法"><a href="#Power-Platform-要求数のカウント方法" class="headerlink" title="Power Platform 要求数のカウント方法"></a>Power Platform 要求数のカウント方法</h2><h3 id="Power-Platform-要求数を消費するケース"><a href="#Power-Platform-要求数を消費するケース" class="headerlink" title="Power Platform 要求数を消費するケース"></a>Power Platform 要求数を消費するケース</h3><ul><li>フロー内のすべてのトリガー / アクション<br> 「変数の初期化」や「スコープ」アクションも Power Platform 要求数を 1 消費します。</li><li>1 回のアクション実行で複数のレコードを操作するアクション<br> Power Platform 要求数を 1 消費します。更新対象のレコード数ではなく、Power Automate から実行する API の数がカウントされます。</li><li>アクション実行時に行われたリトライ<br> コネクタから API を実行してリトライ可能なエラーコードが返ってきた場合、コネクタは各アクションの設定に応じてリトライ処理を行います。リトライの回数分 Power Platform 要求数を消費します。</li><li>失敗したアクション<br> アクションがエラーとなった場合も Power Platform 要求数を消費します。</li><li>ループ内のアクション<br> ループアクションがある場合、ループ内のアクションは実行された回数分の Power Platform 要求数を消費します。例えば、「Apply to each」の中に アクションが 3 つあり、3 回ループした場合、「3（アクション） × 3（ループ回数）+ 1 (Apply to each) = 10」と計算されます。</li><li>ページング<br> アクションで取得する行数によっては内部的に複数回 API を実行してデータを取得する場合があります。見た目上のアクションは 1 つでも内部で実際に実行された数がカウントされます。<br> なお、1 度の API 実行で取得可能な行数は接続先の API の制限に依存するため、アクションによって異なります。</li></ul><h3 id="Power-Platform-要求数を消費しないケース"><a href="#Power-Platform-要求数を消費しないケース" class="headerlink" title="Power Platform 要求数を消費しないケース"></a>Power Platform 要求数を消費しないケース</h3><ul><li>スキップされたアクション<br> スキップされて実行されなかったアクションは Power Platform 要求数を消費しません。<br> 例えば、更新を定期的に監視するポーリングトリガーのフローでは、データの更新があったときのみトリガーの Power Platform 要求数が消費されます。</li></ul><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#what-counts-as-power-platform-request">何が Power Platform 要求と見なされますか?</a></li></ul><h2 id="Power-Platform-要求数の消費先"><a href="#Power-Platform-要求数の消費先" class="headerlink" title="Power Platform 要求数の消費先"></a>Power Platform 要求数の消費先</h2><p>Power Platform 要求数の消費先は以下の条件によって決まります。  </p><ul><li>ライセンス</li><li>トリガー</li><li>フローの所有者</li></ul><p>詳細は下図を参照してください。<br><img src="/blog/powerautomate/power-automate-ppr/whose-power-platform-request-limits.png"></p><p>なお、親子フローの場合は単体のフローよりも複雑になります。<br>関連するフローのいずれかにフローライセンスが付与されていれば、フローライセンスが使用されます。<br>ユーザーライセンスで動作する場合は、単体のフローと同じルールで消費先が決まります。<br>留意点として、子フローのみ移行期間中は子フローの所有者のライセンスが利用されます。</p><p>詳細は下図を参照してください。<br><img src="/blog/powerautomate/power-automate-ppr/whose-power-platform-request-limits-process.png"></p><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/faqs#whose-power-platform-request-limits-are-used-by-the-cloud-flow">クラウド フロー で使用されるリクエスト制限は誰のものですか?</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-automate/service-principal-support#power-platform-request-limits">サービス プリンシパルが所有するフローのサポート</a></li></ul><h3 id="自動フローとインスタントフローの見分け方"><a href="#自動フローとインスタントフローの見分け方" class="headerlink" title="自動フローとインスタントフローの見分け方"></a>自動フローとインスタントフローの見分け方</h3><p>「＋新しいフロー」から確認することができます。<br><img src="/blog/powerautomate/power-automate-ppr/automated-or-instant.png"></p><h2 id="Power-Platform-要求数の制限に抵触した時"><a href="#Power-Platform-要求数の制限に抵触した時" class="headerlink" title="Power Platform 要求数の制限に抵触した時"></a>Power Platform 要求数の制限に抵触した時</h2><p>Power Automate において Power Platform 要求数の制限に抵触したときは以下の対応をご検討ください。</p><ol><li>フローの構成を見直し、呼び出すアクション数を減らす方法<br><a href="https://jpdynamicscrm.github.io/blog/powerautomate/troubleshoot-throttling-flow/#%E6%94%B9%E5%96%84%E7%AD%96">サポートブログ</a> に改善策を記載していますのでご参照ください。</li><li><a href="">Power Platform 要求数を多く含むライセンス</a>を購入する方法<br>なお、Power Automate Process ライセンスは 1 つのフローに複数付与することで Power Platform 要求数を増やすことができるようになる予定です。</li><li>環境を<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/pay-as-you-go-overview">従量課金制</a>にする方法</li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#power-platform-request-capacity-add-on">Power Platform 要求数のアドオン</a>を購入し、サポートリクエストを通じて割り当てを行う方法<br>以下の情報を添えてマイクロソフトサポートまでご連絡ください。<ul><li><a href="https://jpdynamicscrm.github.io/blog/powerautomate/helpful-information-for-powerautomate-sr/#anchor-flowid">フロー識別子</a></li><li>購入したライセンスの名称と型番(例. SEW-00001)</li><li>付与したい数</li></ul></li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>2024 年 12 月現在、Power Platform 要求数のアドオンを割り当てる機能がリリースされていません。</p><p>Power Platform 要求数のアドオンをサポートリクエストを通じて割り当てる場合、上限値の引き上げには有効期限がございます。有効期限を延長する場合はお手数ではございますが再度お問い合わせをお願いいたします。</p><p>有効期限はお問い合わせいただいた際にお伝えいたします。</p></div><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><h3 id="アクションの接続をフロー所有者と別のユーザーに変更していますが、Power-Platform-要求数の消費先も変わりますか"><a href="#アクションの接続をフロー所有者と別のユーザーに変更していますが、Power-Platform-要求数の消費先も変わりますか" class="headerlink" title="アクションの接続をフロー所有者と別のユーザーに変更していますが、Power Platform 要求数の消費先も変わりますか"></a>アクションの接続をフロー所有者と別のユーザーに変更していますが、Power Platform 要求数の消費先も変わりますか</h3><p>いいえ、変わりません。<br>Power Platform 要求数の消費先は、アクションの接続先に依存しません。</p><h3 id="制限値を超えたら追加請求が発生しますか。"><a href="#制限値を超えたら追加請求が発生しますか。" class="headerlink" title="制限値を超えたら追加請求が発生しますか。"></a>制限値を超えたら追加請求が発生しますか。</h3><p>いいえ、追加請求は発生しません。  </p><h3 id="制限値を超えたら即時フローが低速化しますか"><a href="#制限値を超えたら即時フローが低速化しますか" class="headerlink" title="制限値を超えたら即時フローが低速化しますか"></a>制限値を超えたら即時フローが低速化しますか</h3><p>いいえ、多少の超過は許可していますので、即時低速化する動作にはなりません。<br>しかしながら、制限値を大きく超えた場合や、継続的に超えている場合はフローの動作が低速化します。</p><h3 id="フローの低速化が解消されるのは何時間後かわかりますか"><a href="#フローの低速化が解消されるのは何時間後かわかりますか" class="headerlink" title="フローの低速化が解消されるのは何時間後かわかりますか"></a>フローの低速化が解消されるのは何時間後かわかりますか</h3><p>恐れ入りますが、明示的に解消される時間帯をご案内することができません。<br>フローのアクション数が制限値を下回ったときに解消されます。</p><h3 id="移行期間はいつまでですか"><a href="#移行期間はいつまでですか" class="headerlink" title="移行期間はいつまでですか"></a>移行期間はいつまでですか</h3><p>移行期間終了日につきましては現時点で未定です。<br>Power Platform 要求数のレポート機能が一般公開されてから、最低でも 6 カ月の猶予をもって移行期間を終了する予定です。<br>移行期間の終了日が決まりしたら、メッセージセンターやブログ等にて通知を行う予定です。  </p><h3 id="Power-Platform-要求数のレポートの一般公開はいつですか。"><a href="#Power-Platform-要求数のレポートの一般公開はいつですか。" class="headerlink" title="Power Platform 要求数のレポートの一般公開はいつですか。"></a>Power Platform 要求数のレポートの一般公開はいつですか。</h3><p>現時点で未定です。<br>実際の利用状況や利用ユーザーからのお問い合わせの状況等を踏まえて一般公開の日にちを決めていく予定です。</p><h3 id="Power-Platform-要求数は使われなかった分を翌日や翌月に繰り越すことができますか。"><a href="#Power-Platform-要求数は使われなかった分を翌日や翌月に繰り越すことができますか。" class="headerlink" title="Power Platform 要求数は使われなかった分を翌日や翌月に繰り越すことができますか。"></a>Power Platform 要求数は使われなかった分を翌日や翌月に繰り越すことができますか。</h3><p>いいえ、繰り越すことはできません。</p><h3 id="ユーザーライセンスに付与されている-Power-Platform-要求数を別のユーザーに振り分けることはできますか。"><a href="#ユーザーライセンスに付与されている-Power-Platform-要求数を別のユーザーに振り分けることはできますか。" class="headerlink" title="ユーザーライセンスに付与されている Power Platform 要求数を別のユーザーに振り分けることはできますか。"></a>ユーザーライセンスに付与されている Power Platform 要求数を別のユーザーに振り分けることはできますか。</h3><p>いいえ、ユーザーライセンスに付与されている Power Platform 要求数を他のユーザーに振り分けることはできません。<br>フローの所有者のライセンスを消費するフローの場合は、フローの所有者を変更することで Power Platform 要求数の消費先を変えることができます。</p><p>◆ 関連公開情報</p><ul><li><a href="#power-platform-%E8%A6%81%E6%B1%82%E6%95%B0%E3%81%AE%E6%B6%88%E8%B2%BB%E5%85%88">Power Platform 要求数の消費先</a></li><li><a href="https://jpdynamicscrm.github.io/blog/powerautomate/change-flow-owner/#anchor-change-flow-owner">フロー作成者 (所有者) を変更したい場合はどうしたらいいか？</a></li></ul><h3 id="ユーザーライセンスレポートを見ると、想定している値よりも-2-000-Power-Platform-要求数分多く表示されています。なぜでしょうか。"><a href="#ユーザーライセンスレポートを見ると、想定している値よりも-2-000-Power-Platform-要求数分多く表示されています。なぜでしょうか。" class="headerlink" title="ユーザーライセンスレポートを見ると、想定している値よりも 2,000 Power Platform 要求数分多く表示されています。なぜでしょうか。"></a>ユーザーライセンスレポートを見ると、想定している値よりも 2,000 Power Platform 要求数分多く表示されています。なぜでしょうか。</h3><p>Common Data Service for Teams ライセンスをお持ちの場合、 2,000 Power Platform 要求が追加されます。</p><h3 id="制限に抵触した時に影響を受けるのは誰ですか"><a href="#制限に抵触した時に影響を受けるのは誰ですか" class="headerlink" title="制限に抵触した時に影響を受けるのは誰ですか"></a>制限に抵触した時に影響を受けるのは誰ですか</h3><p>フローのライセンスで動作しているフローの場合は、そのフローのライセンスで動作しているフローのみ影響をうけます。他のフローには影響しません。<br>ユーザーライセンスで動作しているフローの場合は、そのユーザーのみ影響をうけます。他のユーザーは影響をうけません。  </p><p>なお、移行期間終了前は 100 万アクションを超えない限りはフロー単位でのみ影響をうけます。</p><p>◆ 関連公開情報</p><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/api-request-limits-allocations#request-limits-in-power-automate">Power Automate の要求の制限</a></li></ul><h3 id="フローの実行回数に制限はありますか"><a href="#フローの実行回数に制限はありますか" class="headerlink" title="フローの実行回数に制限はありますか"></a>フローの実行回数に制限はありますか</h3><p>フローの実行回数には制限はありません。</p><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの網野です。 &lt;br&gt;&lt;br&gt;今回は Power Automate における Power Platform 要求数の制限についてご案内いたします。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!IMPORTANT]&lt;br&gt;&lt;a href=&quot;https://learn.microsoft.com/ja-jp/power-platform/admin/online-requirements&quot;&gt;公開情報&lt;/a&gt; が正となりますので、ライセンスをご用意する際は必ず最新の公開情報を確認してください。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Desktop flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Desktop-flow/"/>
    
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
  </entry>
  
  <entry>
    <title>Dataverse と Exchange Online のサーバー側同期</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/exchange-server-side-sync/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/exchange-server-side-sync/</id>
    <published>2024-12-08T15:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.636Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの鎌田です。<br>Dynamics 365 で使用される Dataverse と Outlook のメール サーバーである Exchange サーバーを同期させることで、予定、連絡先、およびタスクを Dynamics 365 と Outlook でシームレスに連携することができます。<br>本記事では、Dataverse と Exchange Online のサーバー側同期についてご案内いたします。</p><h2 id="content">目次</h2><ul><li><a href="#sync-mailbox-to-power-platform-environment">Power Platform 環境へのメールボックスの同期</a></li><li><a href="#dynamics-365-app-for-outlook">Dynamics 365 App for Outlook</a></li><li><a href="#sync-email">メールの追跡</a></li><li><a href="#sync-shedule">予定の追跡</a></li><li><a href="#personal-settings">個人設定</a></li><li><a href="#send-email">Dynamics 365 から電子メールを送信</a></li><li><a href="#additional-information">補足</a></li><li><a href="#references">参考情報</a></li></ul><h2 id="sync-mailbox-to-power-platform-environment">Power Platform 環境へのメールボックスの同期</h2><p>Power Platform 管理センターからメールボックスを同期することで、Outlook のメールを Dynamics 365 アプリで閲覧できたり、Outlook と同じように Dynamics 365 アプリからメールを送信できたりするようになります。</p><ol><li><a href="https://admin.powerplatform.microsoft.com/environments">Power Platform 管理センター</a> より環境を開く</li><li>[設定] &gt; [サーバー プロファイル] をクリック<br><img src="/blog/powerplatform/exchange-server-side-sync/ppac_setting_server_profile.png"></li><li>Microsoft Exchange Online (既定) が存在することを確認<br><img src="/blog/powerplatform/exchange-server-side-sync/ppac_server_profile.png"></li><li>[設定] に戻り [メールボックス] をクリック<br><img src="/blog/powerplatform/exchange-server-side-sync/ppac_setting_mailbox.png"></li><li>同期したいメールボックスにチェックを入れ、① [編集] をクリック<br><img src="/blog/powerplatform/exchange-server-side-sync/mailbox.png"></li><li>受信メール、送信メール、(メール以外も同期が必要な場合は) 予定、取引先担当者、タスクを [サーバー側同期] に変更して [保存して閉じる]<br><img src="/blog/powerplatform/exchange-server-side-sync/mailbox_edit.png"></li><li>ステップ 5 の画像の ② [電子メールの承認] をクリック、ポップアップが出てきたら [OK] をクリック</li><li>ステップ 5 の画像の ③ [メールボックスのテストと有効化] をクリック</li><li>[電子メール アクセス構成のテスト] は同期したいレコードの種類を選び、[OK] をクリック<br><img src="/blog/powerplatform/exchange-server-side-sync/mailbox_popup.png"></li><li>テストの実行状態が [進行中] から [成功] になったら完了<br><img src="/blog/powerplatform/exchange-server-side-sync/mailbox_success.png"></li><li>Outlook にもサーバー側同期の完了を通知するメールが届いていることを確認<br><img src="/blog/powerplatform/exchange-server-side-sync/outlook_notification.png"></li></ol><h2 id="dynamics-365-app-for-outlook">Dynamics 365 App for Outlook</h2><p>Dynamics 365 App for Outlook は Outlook から Dynamics 365 のレコードを閲覧、作成、編集、削除などができるアプリ (アドイン) です。Outlook から Dynamics 365 での追跡時の関連を設定したり、テーブルへレコードを作成したりできます。</p><ol><li>Power Platform 管理センターより [設定] &gt; [Dynamics 365 App for Outlook] をクリック<br><img src="/blog/powerplatform/exchange-server-side-sync/ppac_setting_d365afo.png"></li><li>Dynamics 365 App for Outlook を追加するユーザーにチェックを入れ、[OUTLOOK へのアプリの追加] をクリック (対象ユーザーに割り当てられているセキュリティ ロールの中に use dynamics 365 app for outlook の特権がついている必要があります)<br><img src="/blog/powerplatform/exchange-server-side-sync/d365afo_sync.png"></li><li>[状態] が [保留中] から [Outlook に追加済み] になったら完了 (完了までに 10 分から 30 分程度時間がかかります)<br><img src="/blog/powerplatform/exchange-server-side-sync/d365afo_done.png"></li><li><a href="https://outlook.office365.com/mail/">Outlook</a> でメールを開き、[Dynamics 365] のアプリのアイコンが表示されることを確認<br><img src="/blog/powerplatform/exchange-server-side-sync/outlook_d365afo_icon.png"></li><li>初めて開くと認証画面が表示されるので、[許可] をクリックして認証<br><img src="/blog/powerplatform/exchange-server-side-sync/outlook_d365afo_auth.png"></li></ol><h2 id="sync-email">メールの追跡</h2><p>以下のいずれかの方法でメールの追跡が可能です。</p><ul><li><p>追跡したいメールを選択した状態で <strong>分類</strong> をクリックし、Track To Dynamics 365 の分類を付与することで、対象のメールを追跡できます。Dynamics 365 へ正しく連携できなかった場合、分類のタグが Tracked To Dynamics 365 (Undeliverable) になります。<br><img src="/blog/powerplatform/exchange-server-side-sync/outlook_classification.png"></p></li><li><p>Dynamics 365 App for Outlook を利用してメールを追跡することもできます。追跡対象外のメールで [関連を設定せずに追跡] とすると上の方法と同じく Track To Dynamics 365 の分類タグがつき、メールを追跡できます。<br><img src="/blog/powerplatform/exchange-server-side-sync/outlook_d365afo_track_mail.png"></p></li></ul><p>Dynamics 365 アプリの [営業ハブ] &gt; [活動] &gt; [すべての電子メール] より、上記の方法で追跡した電子メール レコードが確認できます。同期には場合によって 5 分から 15 分程度時間がかかることがあります。<br><br><img src="/blog/powerplatform/exchange-server-side-sync/d365_mail_record.png"></p><h2 id="sync-shedule">予定の追跡</h2><p>Outlook より [予定表] を開き、追跡対象の予定を右クリックして先ほどのメールの追跡と同様に Track To Dynamics 365 の分類を付与することで、対象の予定を追跡できます。<br><img src="/blog/powerplatform/exchange-server-side-sync/outlook_calender_sync.png"><br>Dynamics 365 アプリの [営業ハブ] &gt; [活動] &gt; [すべての予定] より、上記の方法で追跡した予定レコードが確認できます。同期には場合によって 5 分から 15 分程度時間がかかることがあります。<br><img src="/blog/powerplatform/exchange-server-side-sync/d365_schedule_record.png"></p><h2 id="personal-settings">個人設定</h2><p>Dynamics 365 アプリの個人設定の [電子メール] タブから設定できる項目についてご紹介します。<br><img src="/blog/powerplatform/exchange-server-side-sync/personalization_settings.png"></p><h3 id="track">[Microsoft Dynamics 365 で追跡する電子メール メッセージを選択してください] > [追跡]</h3><p>同期されたメールボックスのうち、どの電子メール メッセージを追跡するかを設定できます。デフォルトで [Dynamics 365 電子メールに対する返信の電子メール メッセージ] に設定されています。<br><img src="/blog/powerplatform/exchange-server-side-sync/personalization_settings_auto_creation.png"></p><h3 id="configure-folder-tracking-rules">[Microsoft Dynamics 365 で追跡する電子メール メッセージを選択してください] > [フォルダー追跡ルールの構成]</h3><p>Outlook の指定したフォルダーと Dynamics 365 の特定のレコードを紐づけることができます。例えば以下のように test というフォルダーのメールを test company という取引先企業と連携したい場合などです。<br><img src="/blog/powerplatform/exchange-server-side-sync/personalization_settings_folder_level_track.png"><br>これにより、以下のように test company という取引先企業のレコードに test というフォルダー内のメールが連携され、タイムラインから閲覧できるようになります。<br><img src="/blog/powerplatform/exchange-server-side-sync/d365_folder_level_track.png"><br>上記の機能を有効にするためには、以下の通り Power Platform 管理センターで [設定] &gt; [電子メールの追跡] &gt; [フォルダー レベルの追跡] をオンにする必要があります。<br><img src="/blog/powerplatform/exchange-server-side-sync/ppac_track_email.png"></p><h3 id="configure-folder-tracking-rules">[Microsoft Dynamics 365 でのレコードの自動作成]</h3><p>[Microsoft Dynamics 365 でのレコードの自動作成] では、追跡するメールの送信者を取引先担当者またはリードとして、レコードを自動作成することができます。例えば、取引先担当者を自動作成するように設定した場合、<a href="#sync-email">メールの同期</a> の操作により、そのメールの送信者である Microsoft Power Platform が取引先担当者として自動で作成されます。<br><img src="/blog/powerplatform/exchange-server-side-sync/d365_contact_record.png"></p><h2 id="send-email">Dynamics 365 から電子メールを送信</h2><p>これまで紹介してきた操作は、Exchange から Dataverse への同期でしたが、逆に Dataverse から Exchange への同期も可能なため、Dynamics 365 アプリから電子メールを送信することも可能です。<br>[活動] &gt; [電子メール] とクリックすると下図のように [新しい電子メール] の画面が開きます。宛先や件名、本文を埋め、[送信] ボタンを押すことで同期しているメールボックスからメールを送信することができます。正しく送信されているかどうかは Outlook の送信済みアイテムより確認できます。<br><br><img src="/blog/powerplatform/exchange-server-side-sync/d365_send_mail.png"></p><h2 id="additional-information">補足</h2><ul><li><p><a href="#sync-mailbox-to-power-platform-environment">Power Platform 環境へのメールボックスの同期</a> のステップ 9 のチェックボックスは、これから同期するメールボックスを別の環境で同期したときに、現在の環境の接続を解除して新しい環境に同期しなおすためのものです。メールボックスは一つの環境にしか同期できません。</p></li><li><p>Dynamics 365 アプリ内の活動エンティティにて電子メール レコードを削除しても、Outlook 内の同期元メールは削除されません。また、Outlook から追跡中の電子メールを削除しても、Dynamics 365 アプリ側の電子メール レコードは削除されません。<br>参考: <a href="https://learn.microsoft.com/ja-jp/dynamics365/outlook-addin/user-guide/delete-records-that-have-been-tracked#email-messages">Dynamics 365 for Outlook で追跡されたレコードを削除する &gt; 電子メール メッセージ</a></p></li><li><p>同期済みのメールボックスに対して同期を解除したい場合、<a href="#sync-mailbox-to-power-platform-environment">Power Platform 環境へのメールボックスの同期</a> のステップ 6 の画面で [同期方法] のうち連携を解除したい項目を [なし] に設定し、[上書き保存] を押下します。</p></li><li><p><a href="#sync-mailbox-to-power-platform-environment">Power Platform 環境へのメールボックスの同期</a> のステップ 7 のメールボックスの承認は、[Power Platform 管理センター] &gt; [設定] &gt; [セキュリティ ロール] より [代理メールボックス承認者] を付与することで、グローバル管理者または Exchange 管理者でなくても、システム管理者セキュリティ ロールを持っていれば代理で実施することができるようになります。<br>参考: <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/connect-exchange-online#permissions-model">Exchange Online への接続 &gt; アクセス許可モデル</a><br><img src="/blog/powerplatform/exchange-server-side-sync/ppac_security_role.png"></p></li></ul><h2 id="troubleshooting">トラブルシューティング</h2><p>Dynamics 365 App for Outlook によりメールを Dataverse に同期する際に、”[追跡] と [関連を設定] は現在無効になっています…” というメッセージが表示され正常に同期できない場合の対処手順をご紹介します。</p><ol><li>ブラウザの InPrivate モードで期待通りの動作となるか確認</li><li>期待通りの動作とならない場合、ユーザーに割り当てられているセキュリティ ロールの中に use dynamics 365 app for outlook の特権がついていることを確認<br><img src="/blog/powerplatform/exchange-server-side-sync/ppac_security_role_d365afo.png"></li><li>再度 <a href="#sync-mailbox-to-power-platform-environment">Power Platform 環境へのメールボックスの同期</a> と <a href="#dynamics-365-app-for-outlook">Dynamics 365 App for Outlook</a> の設定を実施</li><li>ステップ 1 で期待通りの動作となっている場合、下図のように Outlook のアプリ管理画面から Dynamics 365 App for Outlook の接続先の環境を確認<br><img src="/blog/powerplatform/exchange-server-side-sync/outlook_d365afo_env.png"></li><li>Power Platform 管理センターから同期を設定した環境と異なる環境が接続対象となっている場合、ブラウザの設定より、[Cookie とサイトのアクセス許可] &gt; [Cookie とサイト データ] &gt; [すべての Cookie とサイト データを表示する] から Outlook に関連するキャッシュを削除 (Edge の場合)<br><img src="/blog/powerplatform/exchange-server-side-sync/edge_cookie_delete.png"></li><li>事象が解決しない場合、サポート窓口にお問い合わせください</li></ol><h2 id="references">参考情報</h2><ul><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/set-up-server-side-synchronization-of-email-appointments-contacts-and-tasks">電子メール、予定、取引先担当者、およびタスクのサーバー側同期の設定</a></li><li><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/connect-exchange-online">Exchange Online への接続</a></li><li><a href="https://learn.microsoft.com/ja-jp/dynamics365/outlook-app/deploy-dynamics-365-app-for-outlook">Dynamics 365 App for Outlook の展開およびインストール</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの鎌田です。&lt;br&gt;Dynamics 365 で使用される Dataverse と Outlook のメール サーバーである Exchange サーバーを同期させることで、予定、連絡先、およびタスクを Dynamics</summary>
      
    
    
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/categories/Dataverse/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Dataverse" scheme="https://jpdynamicscrm.github.io/blog/tags/Dataverse/"/>
    
    <category term="Exchange" scheme="https://jpdynamicscrm.github.io/blog/tags/Exchange/"/>
    
  </entry>
  
  <entry>
    <title>プレミアム コネクタ・オンプレミス データ ゲートウェイ 使用権の猶予期間終了のご案内 - MC901924</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/MC901924/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/MC901924/</id>
    <published>2024-11-24T15:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.625Z</updated>
    
    <content type="html"><![CDATA[<!-- ここに 導入部分 --><p>こんにちは、Power Platform サポートチームの藤田です。</p><p>今回は、Power Apps・Power Automateの一部機能の使用権に関する、2019年のライセンス変更の猶予期間が終了したことについてご紹介します。<br>この内容はメッセージ センターにて、MC901924として配信されました。</p><span id="more"></span><!-- ここに Read more 以降の文章 --><div class="alert is-important"><p class="alert-title">重要</p><p>本記事は弊社公式ドキュメントの公開情報を元に構成しておりますが、 本記事編集時点と実際の機能に相違がある場合がございます。</p><p>最新情報につきましては、参考情報として記載しておりますドキュメントをご確認ください</p></div><hr><h3 id="本変更の対象のテナント"><a href="#本変更の対象のテナント" class="headerlink" title="本変更の対象のテナント"></a>本変更の対象のテナント</h3><p>2019 年 10 月 1 日以前から Microsoft 365 サブスクリプションで対象の機能を使用していたテナントのみが対象となっております。</p><h3 id="本変更の対象外のテナント"><a href="#本変更の対象外のテナント" class="headerlink" title="本変更の対象外のテナント"></a>本変更の対象外のテナント</h3><p>2019 年 10 月 1 日以前に対象となる機能を使用していなかったテナントでは、既に適切なライセンスがないとご利用いただけない動作となっておりますので、変更や影響はございません。</p><h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>2019 年に一部の標準コネクタとオンプレミス データ ゲートウェイが、プレミアム ライセンスの必要な機能へ変更されました。</p><p>2019 年 2 月 ： HTTP コネクタ・<a href="https://learn.microsoft.com/ja-jp/connectors/custom-connectors/">カスタム コネクタ</a>・<a href="https://learn.microsoft.com/ja-jp/data-integration/gateway/service-gateway-onprem">オンプレミス データ ゲートウェイ</a> をプレミアムへ変更</p><p>2019 年 10 月： 一部の標準コネクタ（※）をプレミアムへ変更</p><p>※ 該当するコネクタは以下をご参照ください。<br><br>   公開情報 : <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/powerapps-flow-licensing-faq#what-are-microsoft-power-apps-and-power-automate-use-rights-for-microsoft-365-applications">Microsoft 365 アプリケーションの Microsoft Power Apps および Power Automate の使用権とは何ですか。</a></p><p>2019 年 10 月 1 日以前から Microsoft 365 サブスクリプションで対象の機能を使用していたテナントでは、対象の機能の使用権が<br>2024 年 10 月 1 日まで猶予期間の状態にあり、使用できる状況となっておりました。</p><p>2024 年 10 月 1 日以降、上記で変更されたコネクタを含む、プレミアム コネクタや HTTP コネクタ、カスタム コネクタ、オンプレミス データ ゲートウェイをご利用いただく場合には、適切なライセンスが必要となります。<br>製品内での制限は 2025 年 4 月 1 日から開始される予定です。</p><h2 id="必要なライセンスの割り当てのために"><a href="#必要なライセンスの割り当てのために" class="headerlink" title="必要なライセンスの割り当てのために"></a>必要なライセンスの割り当てのために</h2><p>該当するテナントで引き続きプレミアム機能をご利用いただくためには、プレミアム ライセンスをユーザーに割り当てることが必要となります。<br>この作業を自動で行いたい場合、自動請求ポリシーをご利用いただくことが出来ます。</p><p>公開情報： <a href="https://learn.microsoft.com/ja-jp/microsoft-365/commerce/licenses/manage-auto-claim-policies?view=o365-worldwide&WT.mc_id=365AdminCSH_inproduct">Microsoft 365 管理センターで自動要求ポリシーを管理する</a></p><p>一方で、有償のライセンスの割り当ては承認を行ってからにしたい、ということもあるかと思います。<br>その場合は、自動請求ポリシーをオフにご設定いただきますようお願いいたします。</p><p>公開情報：<a href="https://learn.microsoft.com/ja-jp/microsoft-365/commerce/licenses/manage-auto-claim-policies?view=o365-worldwide&WT.mc_id=365AdminCSH_inproduct#turn-off-auto-claim-policies">自動請求ポリシーをオフにする</a></p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><p><strong>Q. 自分が使っているテナントが本変更の影響を受けるかどうか確認する方法は？</strong></p><p>A. <a href="https://make.powerautomate.com/">Power Automateのポータル</a> へサインインし、Ctrl + Alt + A キーを押下します。<br>表示される情報を Ctrl + F で検索し、以下の値のいずれかが含まれる場合には対象テナントと判断いただけます。</p><ul><li>AllowCustomConnectorsForOfficeSeededPlan</li><li>AllowGatewayUsageForOfficeSeededPlan</li><li>Oct2019ConnectorGrandfathering</li></ul><p><strong>Q. ライセンスが必要なクラウド フローやキャンバス アプリの確認方法は？</strong></p><p>A. クラウド フローについては、Power Platform 管理センター 左ペインより、[請求] &gt; [ライセンス] を表示いただき、 <br>[概要] タブの Power Automate をクリックすると、対象のフローがある場合は [要注意] セクションに表示されます。<br><img src="/blog/powerplatform/MC901924/MC901924_ppac.png"><br><br>  キャンバス アプリについては、フローと異なりひとつのアプリに対応するライセンスが一意に定まらず、一覧で抽出することが難しい (※) ため、「<a href="https://learn.microsoft.com/ja-jp/connectors/connector-reference/connector-reference-premium-connectors">プレミアム コネクタ</a>を使用するアプリ」 または 「特定のコネクタを使用するアプリ」 という観点で別途抽出いただきご確認いただく必要がございます。<br></p><div class="alert is-info"><p class="alert-title">Note</p><p>※ アプリはユーザーにより実行される際に各ユーザーに対してライセンスチェックを行っております。</p><p></p><p>Aさんはプレミアム ライセンスを持っていて問題なく実行可能、Bさんは Office 付帯ライセンスしかないためライセンス不足になっている、という状況になりえます。</p><p></p><p>その為、ライセンスが足りていないかどうか、アプリ毎に抽出できないこととなります。</p></div><p>  キャンバス アプリ・クラウド フローで使用しているコネクタ一覧の抽出については後日ブログ記事を公開予定です。</p><p><strong>Q. フローやアプリがライセンス不足になっていたら？必要なライセンスは？</strong></p><p>A. クラウド フローにつきましては、フローごとのライセンス (<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/types?tabs=power-automate-premium,power-automate-process,connector-types#capacity-licenses">容量ライセンス</a>) をフローに対し割り当てるか、フローの作成者にプレミアム コネクタ使用権のあるライセンスを割り当てます。その後すぐにライセンスを反映させるには、フローを再度保存します。</p><p>フローごとのライセンスの割り当て方法については、以下の公開情報をご参照ください。</p><p>公開情報：<a href="https://learn.microsoft.com/ja-jp/power-automate/desktop-flows/capacity-process#allocate-process-capacity-to-a-cloud-flow">プロセス キャパシティをクラウド フローに割り当てる</a></p><p>プレミアム コネクタ使用権のあるライセンスについては、以下の公開情報もご参照ください。</p><p>公開情報：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/types?tabs=power-automate-premium,power-automate-process,connector-types#user-licenses">ユーザー ライセンス</a></p><p>公開情報：<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/power-automate-licensing/deep-dive-on-specific-license#power-automate-seeded-licenses">Power Automate シードライセンス</a></p><p>キャンバス アプリにつきましては、<a href="https://jpdynamicscrm.github.io/blog/powerapps/power-apps-per-app-license/">アプリごとのライセンス</a> を必要ユーザー分ご用意いただき、”パスの割り当て” の設定をオンとする、もしくはアプリのユーザーにプレミアム コネクタ使用権のあるライセンスを割り当てます。<br><br>または、環境に <a href="https://learn.microsoft.com/ja-jp/power-platform/admin/pay-as-you-go-overview">従量課金制プラン</a> を割り当てます。</p><p>具体的なライセンスや使用権の詳細は <a href="https://go.microsoft.com/fwlink/?LinkId=2085130">ライセンスガイド</a> をご参照ください。</p>]]></content>
    
    
    <summary type="html">&lt;!-- ここに 導入部分 --&gt;
&lt;p&gt;こんにちは、Power Platform サポートチームの藤田です。&lt;/p&gt;
&lt;p&gt;今回は、Power Apps・Power Automateの一部機能の使用権に関する、2019年のライセンス変更の猶予期間が終了したことについてご紹介します。&lt;br&gt;この内容はメッセージ センターにて、MC901924として配信されました。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    
    <category term="Information" scheme="https://jpdynamicscrm.github.io/blog/tags/Information/"/>
    
    <category term="License" scheme="https://jpdynamicscrm.github.io/blog/tags/License/"/>
    
    <category term="PowerPlatform" scheme="https://jpdynamicscrm.github.io/blog/tags/PowerPlatform/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform Ideasサイトのご紹介</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/Power-platform-Ideas/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/Power-platform-Ideas/</id>
    <published>2024-11-19T15:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.629Z</updated>
    
    <content type="html"><![CDATA[<!-- ここに 導入部分 --><p>こんにちは、Power Platform サポートチームの藤田です。<br>今回は、製品に対して改善や実装要望を届けることのできる Ideas をご紹介します。</p><span id="more"></span><!-- ここに Read more 以降の文章 --><hr><h2 id="Ideas-とは？"><a href="#Ideas-とは？" class="headerlink" title="Ideas とは？"></a>Ideas とは？</h2><p>各製品の Ideas にご投稿いただくことで、お客様から直接製品チームにご意見やご要望をお伝えいただくことが可能です。</p><p><a href="https://ideas.powerapps.com/d365community/forum/f1458c72-ae29-ed11-9db2-000d3a8c451e">Power Apps Ideas</a></p><p><a href="https://ideas.powerautomate.com/d365community/forum/086dd68e-597f-ec11-8d21-0022482e8f9f">Power Automate Ideas</a></p><p><a href="https://ideas.powervirtualagents.com/d365community/forum/21a4f1f9-f7fc-ec11-82e6-000d3a8b109b">Copilot Studio</a></p><p>投稿されたご意見の採用をお約束できるものではございませんが、<br>投稿に対して Vote 数が多くなることで製品チームが確認を行い、機能強化が行われることもございますので、<br>ぜひ投稿をご検討ください。</p><p>このサイトは投稿した後に、状況に応じてご要望の機能の必要性やビジネスインパクトなどの確認を行う場合があるため、<br>技術サポートからではなくお客様によるご投稿を推奨させていただいております。</p><h2 id="Ideas-の利用方法について"><a href="#Ideas-の利用方法について" class="headerlink" title="Ideas の利用方法について"></a>Ideas の利用方法について</h2><p>新規投稿や、投票、コメント機能を利用するためには、Microsoft アカウント もしくは Microsoft 職場または学校アカウント でサインインする必要があります。<br>投稿を閲覧するのみの場合は、Microsoft アカウントでサインインする必要はありません。<br>サインイン手順と、投稿の利用手順をご案内いたしますのでご確認ください。</p><h3 id="Microsoft-アカウント-もしくは-Microsoft-職場または学校アカウント-でサインインする手順"><a href="#Microsoft-アカウント-もしくは-Microsoft-職場または学校アカウント-でサインインする手順" class="headerlink" title="Microsoft アカウント もしくは Microsoft 職場または学校アカウント でサインインする手順"></a>Microsoft アカウント もしくは Microsoft 職場または学校アカウント でサインインする手順</h3><ol><li>画面右上に表示される [Sign in] ボタンをクリックします。</li><li>[サインイン] 画面にて Microsoft アカウント もしくは Microsoft 職場または学校アカウント の情報を入力し、[サインイン] をクリックします。</li><li>[要求されているアクセス許可] と表示された場合には、[承諾] をクリックします。</li><li>[Complete your Profile] 画面で Usernameに任意のユーザー名を入力し、[Submit] ボタンをクリックします。</li><li>サインインが完了します。</li></ol><h3 id="投稿方法"><a href="#投稿方法" class="headerlink" title="投稿方法"></a>投稿方法</h3><ol><li>上記の [サインイン手順] を完了した状態で [新しいアイデアの投稿] をクリックします。</li><li>[タイトル] [カテゴリ]及び [説明] に内容を記載の上 Post することで投稿ができます。</li></ol><h2 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h2><p>Ideasをはじめ、コミュニティ サイトは、海外のお客様もご利用いただいております。<br>海外のお客様からVoteを集めたり、製品チームにて確認したりするために、可能な限り英語でご投稿をお願いいたします。</p><p>日本語で記述いただく場合には、お手数ではございますが、英訳も併記いただけますようお願いいたします。</p>]]></content>
    
    
    <summary type="html">&lt;!-- ここに 導入部分 --&gt;
&lt;p&gt;こんにちは、Power Platform サポートチームの藤田です。&lt;br&gt;今回は、製品に対して改善や実装要望を届けることのできる Ideas をご紹介します。&lt;/p&gt;</summary>
    
    
    
    <category term="サポートサービスのご利用について" scheme="https://jpdynamicscrm.github.io/blog/categories/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E3%81%94%E5%88%A9%E7%94%A8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/"/>
    
    <category term="Power Platform Admin Center" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Platform-Admin-Center/"/>
    
    
    <category term="PowerPlatform" scheme="https://jpdynamicscrm.github.io/blog/tags/PowerPlatform/"/>
    
    <category term="Ideas" scheme="https://jpdynamicscrm.github.io/blog/tags/Ideas/"/>
    
  </entry>
  
  <entry>
    <title>キャンバスアプリ / Power Automate 利用時の通信要件</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/ip-range-and-domain/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/ip-range-and-domain/</id>
    <published>2024-11-10T00:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.653Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの網野、大友です。<br>今回は キャンバスアプリ / Power Automate  利用時の通信要件についてご案内します。<br>Microsoft 365 や Azure などの製品とは別に、Power Platform 独自で通信要件を定義しており、別途対応が必要となりますのでご留意ください。</p><div class="alert is-important"><p class="alert-title">重要</p><p>通信に利用するドメインや IP アドレスは定期的に変更されるため</p><p>必ず <a href="https://learn.microsoft.com/en-us/power-platform/admin/online-requirements">最新の公開情報</a> を参照し設定を行ってください。</p><p>公開情報は翻訳までに一定の時間がかかりますので、本ブログでは英語の公開情報へリンクを貼っています。</p></div><span id="more"></span><h2 id="通信要件とは"><a href="#通信要件とは" class="headerlink" title="通信要件とは"></a>通信要件とは</h2><p>キャンバスアプリ / Power Automate  はクラウド上に展開されたサービスであり、クラウドサービスへアクセスする、またはクラウドサービスからアクセスされる際に、特定のドメインや IP アドレスへ片方向または双方向の通信が発生します。<br>Power Platform では通信に必要な要件を定義し、通信要件として Power Platform の公開情報に記載しています。  </p><p>プロキシサーバー等を用いてネットワークに制限をかけている場合、製品利用に必要な通信がブロックされると問題が生じる恐れがあるため、必要な通信許可の設定を行ってください。</p><p>通信の種類には 2 種類があります。<br><b>①クライアントとの通信</b><br>クライアント端末とマイクロソフトクラウドサーバーとの通信です。<br>クライアント端末から Power Automate ポータルにアクセスするときや、キャンバスアプリを実行するときなどに利用されます。</p><p><b>②接続先との通信</b><br>マイクロソフトクラウドサーバーとコネクタ接続先との通信です。<br>フローやアプリにてコネクタを通じてデータに接続するときに利用されます。  </p><p><img src="/blog/powerplatform/ip-range-and-domain/network.png"></p><p>① クライアントとの通信に必要な要件は  <a href="#anchor-canvasapp">キャンバスアプリ</a>、<a href="#anchor-powerautomate">Power Automate</a> および <a href="#anchor-onpremisedatagateway">オンプレミスデータゲートウェイ</a> を参照してください。<br>② 接続先との通信に必要な要件は <a href="#anchor-connector">コネクタ</a> を参照してください。</p><h2 id="クライアントとの通信"><a href="#クライアントとの通信" class="headerlink" title="クライアントとの通信"></a>クライアントとの通信</h2><p><a id='anchor-canvasapp'></a></p><h3 id="キャンバスアプリ"><a href="#キャンバスアプリ" class="headerlink" title="キャンバスアプリ"></a>キャンバスアプリ</h3><ol><li><a href="https://learn.microsoft.com/en-us/power-apps/limits-and-config#required-services">必要なサービス</a>に記載されているすべてのドメインを許可してください。<br><br><img src="/blog/powerplatform/ip-range-and-domain/powerapps-domain.png"></li></ol><p><a id='anchor-powerautomate'></a></p><h3 id="Power-Automate"><a href="#Power-Automate" class="headerlink" title="Power Automate"></a>Power Automate</h3><ol><li><a href="https://learn.microsoft.com/en-us/power-automate/ip-address-configuration">IP アドレスの構成</a> に記載されているドメインを許可してください。<br>モバイルアプリやデスクトップフローなど利用するサービスに応じて設定してください。<br><img src="/blog/powerplatform/ip-range-and-domain/powerautomate-domain.png"></li></ol><p><a id='anchor-onpremisedatagateway'></a></p><h3 id="オンプレミス-データ-ゲートウェイ"><a href="#オンプレミス-データ-ゲートウェイ" class="headerlink" title="オンプレミス データ ゲートウェイ"></a>オンプレミス データ ゲートウェイ</h3><ol><li><p><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-communication#required-ports-for-the-gateway-to-function">ゲートウェイが機能するために必要なポート</a>に記載されているすべてのドメインを許可してください。<br><img src="/blog/powerplatform/ip-range-and-domain/onpremisedatagateway.png">  </p><div class="alert is-info"><p class="alert-title">Note</p><p>ドメインに加え、ポートも指定されています。</p><p>オンプレミス データ ゲートウェイではお客様からマイクロソフト向きのリクエストにより通信を確立します。</p><p>そのため、お客様のコンピューターをインターネット上に公開していただく必要はございません。  </p></div><p>端末にインストール済のオンプレミス データ ゲートウェイアプリにてマイクロソフトアカウントでのサインインに成功している場合には、診断メニューからネットワーク ポートのテストを実施頂く事で、問題なく通信が成功するか確認頂く事も可能です。<br><img src="/blog/powerplatform/ip-range-and-domain/onpremisedatagateway2.png"><br><img src="/blog/powerplatform/ip-range-and-domain/onpremisedatagateway3.png">  </p></li></ol><h2 id="接続先との通信"><a href="#接続先との通信" class="headerlink" title="接続先との通信"></a>接続先との通信</h2><p><a id='anchor-connector'></a></p><h3 id="コネクタ"><a href="#コネクタ" class="headerlink" title="コネクタ"></a>コネクタ</h3><ol><li><p><a href="https://learn.microsoft.com/en-us/connectors/common/outbound-ip-addresses#power-platform">コネクターの送信 IP アドレス</a> の Power Platform セクションに記載されているサービスタグおよびすべての IP アドレスを許可してください。<br>各サービスタグには IP アドレスがグルーピングされているので、サービスタグを指定できない場合は、サービスタグに紐づく IP アドレスを許可してください。サービスタグに紐づく IP アドレスは、<a href="https://learn.microsoft.com/en-us/azure/virtual-network/service-tags-overview#use-the-service-tag-discovery-api">PowerShell</a> または <a href="https://learn.microsoft.com/en-us/azure/virtual-network/service-tags-overview#discover-service-tags-by-using-downloadable-json-files">ダウンロードしたJSON ファイル</a> から確認できます。  </p><p>多くのコネクタはこちらの IP アドレスから通信を行います。<br><img src="/blog/powerplatform/ip-range-and-domain/connector-outbound.png"></p></li><li><p><a href="https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-limits-and-config?tabs=consumption#firewall-configuration-ip-addresses-and-service-tags">ファイアウォールの構成:IP アドレスとサービス タグ</a>に記載されている IP アドレスまたはサービスタグを許可してください。<br>HTTP コネクタや HTTP + OpenAPI コネクタ等一部のコネクタは Azure Logic Apps サービスと通信を行うため、LogicApps の IP アドレスを利用します。</p><ul><li>マルチテナント - 受信 IP アドレス / サービスタグ <b>LogicAppsManagement</b><br>（コネクタ接続先　→　コネクタサーバー）</li><li>マルチテナント - 送信 IP アドレス / サービスタグ <b>LogicApps</b><br>（コネクタ接続先　←　コネクタサーバー）<br><img src="/blog/powerplatform/ip-range-and-domain/connector-logicapps.png"></li></ul></li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>許可する  IP アドレスまたはサービスタグは、ご利用のPower Platfrom環境の地域に対応するものをご選択ください。</p></div><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><table><thead><tr><th align="left">サービス</th><th align="left">公開情報</th><th align="left">サービスタグ</th><th align="left">通信方向</th><th align="left">マイクロソフト視点</th></tr></thead><tbody><tr><td align="left">キャンバスアプリ</td><td align="left"><a href="https://learn.microsoft.com/en-us/power-apps/limits-and-config#required-services">ドメイン</a></td><td align="left">-</td><td align="left">クライアント ⇔ マイクロソフト</td><td align="left">送信/受信</td></tr><tr><td align="left">Power Automate</td><td align="left"><a href="https://learn.microsoft.com/en-us/power-automate/ip-address-configuration">ドメイン</a></td><td align="left">-</td><td align="left">クライアント ⇔ マイクロソフト</td><td align="left">送信/受信</td></tr><tr><td align="left">オンプレミス<br>データ ゲートウェイ</td><td align="left"><a href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-communication#required-ports-for-the-gateway-to-function">ドメイン/ポート</a></td><td align="left">-</td><td align="left">クライアント ⇒ マイクロソフト</td><td align="left">受信</td></tr><tr><td align="left">コネクタ</td><td align="left"><a href="https://learn.microsoft.com/en-us/connectors/common/outbound-ip-addresses#power-platform">IP アドレス/サービス タグ</a></td><td align="left">AzureConnectors</td><td align="left">接続先サービス ⇔ マイクロソフト</td><td align="left">送信/受信</td></tr><tr><td align="left"></td><td align="left"><a href="https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-limits-and-config?tabs=consumption#firewall-configuration-ip-addresses-and-service-tags">IP アドレス/サービス タグ</a></td><td align="left">LogicAppsManagement</td><td align="left">接続先サービス ⇒ マイクロソフト</td><td align="left">受信</td></tr><tr><td align="left"></td><td align="left"><a href="https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-limits-and-config?tabs=consumption#firewall-configuration-ip-addresses-and-service-tags">IP アドレス/サービス タグ</a></td><td align="left">LogicApps</td><td align="left">マイクロソフト ⇒ 接続先サービス</td><td align="left">送信</td></tr></tbody></table><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><h3 id="どの地域を選べばいいですか"><a href="#どの地域を選べばいいですか" class="headerlink" title="どの地域を選べばいいですか"></a>どの地域を選べばいいですか</h3><p>フローやアプリを作成している Power Platform 環境の地域を選んでください。<br>  <img src="/blog/powerplatform/ip-range-and-domain/region.png"></p><h3 id="Microsoft-365-や-Azure-とは別に-IP-アドレスやドメインを指定する必要がありますか"><a href="#Microsoft-365-や-Azure-とは別に-IP-アドレスやドメインを指定する必要がありますか" class="headerlink" title="Microsoft 365 や Azure とは別に IP アドレスやドメインを指定する必要がありますか"></a>Microsoft 365 や Azure とは別に IP アドレスやドメインを指定する必要がありますか</h3><p>はい、別で指定する必要があります。<br>公開情報も分かれていますので、Power Platform を利用する場合は Power Platform の公開情報を元に設定を行ってください。</p><h3 id="社内のネットワークとコネクタの接続先の通信を許可する必要はありますか"><a href="#社内のネットワークとコネクタの接続先の通信を許可する必要はありますか" class="headerlink" title="社内のネットワークとコネクタの接続先の通信を許可する必要はありますか"></a>社内のネットワークとコネクタの接続先の通信を許可する必要はありますか</h3><p>コネクタを利用する場合は、マイクロソフトのクラウドサーバーを経由して通信するため、社内ネットワークとコネクタ接続先の通信を許可する必要はありません。</p><h3 id="利用するコネクタが限られているため、特定のコネクタが利用する通信だけ許可することはできますか"><a href="#利用するコネクタが限られているため、特定のコネクタが利用する通信だけ許可することはできますか" class="headerlink" title="利用するコネクタが限られているため、特定のコネクタが利用する通信だけ許可することはできますか"></a>利用するコネクタが限られているため、特定のコネクタが利用する通信だけ許可することはできますか</h3><p>恐れ入りますが、現時点では特定のコネクタの通信のみ許可する方法はございません。<br>利用すると記載のある IP アドレスすべてを許可してください。</p><h3 id="IP-アドレスやドメインの変更はメッセージセンター等で通知されますか"><a href="#IP-アドレスやドメインの変更はメッセージセンター等で通知されますか" class="headerlink" title="IP アドレスやドメインの変更はメッセージセンター等で通知されますか"></a>IP アドレスやドメインの変更はメッセージセンター等で通知されますか</h3><p>影響範囲の大きい変更がある場合は通知されることもありますが、基本的には通知されませんのでお客様にて定期的な監視をお願いしています。<br>IP アドレスについてはサービスタグや<a href="https://learn.microsoft.com/en-us/power-platform/admin/online-requirements#ip-addresses-required">パブリック IP アドレス</a> ファイルを提供していますので、こちらをご利用ください。ドメインについてはお手数ですが定期的に公開情報にて増減がないか確認をお願いいたします。今後、確認作業の簡易化について取り組んでいく予定です。</p><h3 id="どれくらいの頻度で確認したほうがいいですか"><a href="#どれくらいの頻度で確認したほうがいいですか" class="headerlink" title="どれくらいの頻度で確認したほうがいいですか"></a>どれくらいの頻度で確認したほうがいいですか</h3><p>最低でも月に 1 度はご確認をお願いいたします。  </p><h3 id="IP-アドレスやドメインをホワイトリストに追加しない状態で使うことができていますが、追加しなくてもいいですか"><a href="#IP-アドレスやドメインをホワイトリストに追加しない状態で使うことができていますが、追加しなくてもいいですか" class="headerlink" title="IP アドレスやドメインをホワイトリストに追加しない状態で使うことができていますが、追加しなくてもいいですか"></a>IP アドレスやドメインをホワイトリストに追加しない状態で使うことができていますが、追加しなくてもいいですか</h3><p>いいえ、ホワイトリストに追加し、接続できるようにしてください。<br>未利用の機能で使われているため新しく機能を使うときにエラーが出る可能性があります。<br>また、機能変更で新しい接続先を使うようになり、急にエラーとなる可能性があります。</p><h3 id="ドメイン指定時に-を指定しない方法はありますか"><a href="#ドメイン指定時に-を指定しない方法はありますか" class="headerlink" title="ドメイン指定時に * を指定しない方法はありますか"></a>ドメイン指定時に * を指定しない方法はありますか</h3><p>いいえ、FQDNs は公開されていないため * を指定せずにドメインを許可する方法はありません。</p><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの網野、大友です。&lt;br&gt;今回は キャンバスアプリ / Power Automate  利用時の通信要件についてご案内します。&lt;br&gt;Microsoft 365 や Azure などの製品とは別に、Power Platform 独自で通信要件を定義しており、別途対応が必要となりますのでご留意ください。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!IMPORTANT]&lt;br&gt;通信に利用するドメインや IP アドレスは定期的に変更されるため&lt;br&gt;必ず &lt;a href=&quot;https://learn.microsoft.com/en-us/power-platform/admin/online-requirements&quot;&gt;最新の公開情報&lt;/a&gt; を参照し設定を行ってください。&lt;br&gt;公開情報は翻訳までに一定の時間がかかりますので、本ブログでは英語の公開情報へリンクを貼っています。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Canvas app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Canvas-app/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    <category term="Desktop flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Desktop-flow/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="Governance" scheme="https://jpdynamicscrm.github.io/blog/tags/Governance/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="Network" scheme="https://jpdynamicscrm.github.io/blog/tags/Network/"/>
    
    <category term="キャンバスアプリ" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%82%AD%E3%83%A3%E3%83%B3%E3%83%90%E3%82%B9%E3%82%A2%E3%83%97%E3%83%AA/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform - &quot;Http With Microsoft Entra ID (事前承認済み)&quot; コネクタのセキュリティ更新プログラム - MC901932 MC918447</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/MC901932/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/MC901932/</id>
    <published>2024-11-01T02:30:00.000Z</published>
    <updated>2025-05-01T03:35:34.625Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの網野です。<br>2024 年 10 月 に MC901932 / MC918447 にて通知された内容について、お客様への影響および対応方法についてご案内いたします。</p><span id="more"></span><h2 id="MC901932-・-MC918447-の内容"><a href="#MC901932-・-MC918447-の内容" class="headerlink" title="MC901932 ・ MC918447 の内容"></a>MC901932 ・ MC918447 の内容</h2><hr><h3 id="変更された内容"><a href="#変更された内容" class="headerlink" title="変更された内容"></a>変更された内容</h3><p>Http With Microsoft Entra ID コネクタを利用して API を実行する場合、管理者による API アクセス許可の承認が必要となります。<br><br>以下に詳細をご案内いたします。</p><p>変更前の状態では、API のアクセス許可方式が異なる 2 種類の有効なコネクタがあります。 <br></p><table><thead><tr><th align="left">コネクタ ID</th><th align="left">コネクタ表示名</th><th align="left">アクセス許可</th></tr></thead><tbody><tr><td align="left">webcontents</td><td align="left">Http With Microsoft Entra ID (事前承認済み)</td><td align="left"><b><font color=red>マイクロソフト</font></b>がアクセス許可</td></tr><tr><td align="left">webcontentsv2</td><td align="left">Http With Microsoft Entra ID</td><td align="left">管理者がアクセス許可</td></tr></tbody></table><div class="alert is-info"><p class="alert-title">Note</p><p>コネクタ表示名は機能変更前後で変更となるため、本ブログではコネクタ ID を使ってご説明いたします。</p><p></p></div><br>機能変更前の webcontents コネクタは信頼するファーストパーティのアプリに対してマイクロソフトが任意に API アクセス許可を与えていました。<br><br>機能の変更が展開されますと、webcontents コネクタのアクセス許可を webcontentsv2 と同じ方式にし、webcontentsv2 コネクタを非推奨とします。<br>本機能変更によって管理者側で利用可能な API を必要最小限に制御し、お客様環境におけるセキュリティとデータプライバシーを強化することを目的としています。<br><br>変更後はコネクタ表示名とアクセス許可が以下のように変更になります。<table><thead><tr><th align="left">コネクタ ID</th><th align="left">コネクタ表示名</th><th align="left">アクセス許可</th></tr></thead><tbody><tr><td align="left">webcontents</td><td align="left">Http With Microsoft Entra ID</td><td align="left"><b><font color=red>管理者</font></b>がアクセス許可</td></tr><tr><td align="left">webcontentsv2</td><td align="left">Http With Microsoft Entra ID<b><font color=red>(deprecated)</font></b></td><td align="left">管理者がアクセス許可</td></tr></tbody></table><h3 id="影響範囲"><a href="#影響範囲" class="headerlink" title="影響範囲"></a>影響範囲</h3><p>機能の変更が展開された後に作成された接続から、変更後の動作になります。</p><h3 id="対応方法"><a href="#対応方法" class="headerlink" title="対応方法"></a>対応方法</h3><ol><li><u>webcontents コネクタを利用している</u>  <ul><li>変更<b><font color=red>前</font></b>に作成した接続  →　現時点では対応は必要ありません。</li><li>変更<b><font color=red>後</font></b>に作成した接続<br>→ <a href="https://learn.microsoft.com/ja-jp/connectors/webcontentsv2/#%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BF%E3%81%8C%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A4%E3%83%B3%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB%E5%8B%95%E4%BD%9C%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B">こちらの手順</a> に従い、 API 実行に必要なアクセス許可をアプリに付与し、webcontentsv2 コネクタで動作検証を行ってください。</li></ul></li><li><u>webcontentv2 コネクタを利用している</u><br>  2024 年 10 月時点では対応は必要ありませんが、今後 webcontentsv2 コネクタは非推奨となっていく予定です。</li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>機能の変更が展開されると、webcontents コネクタと webcontentsv2 コネクタは内部的に同じアプリとなります。</p><p></p><p>一方にアクセス許可を与えると両方のコネクタに対してアクセスが許可されます。</p></div><h2 id="メッセージセンター時系列"><a href="#メッセージセンター時系列" class="headerlink" title="メッセージセンター時系列"></a>メッセージセンター時系列</h2><table><thead><tr><th align="left">日付</th><th align="left">番号</th><th align="left">タイトル</th><th align="left">内容</th></tr></thead><tbody><tr><td align="left">2024 年 10 月 2 日</td><td align="left">MC901932</td><td align="left">Power Platform - “Http With Microsoft Entra ID (事前承認済み)” コネクタのセキュリティ更新プログラム</td><td align="left">機能変更の内容詳細とスケジュール</td></tr><tr><td align="left">2024 年 10 月 25 日</td><td align="left">MC918447</td><td align="left">Power Platform – [更新] “HTTP With Microsoft Entra ID (preauthorized)” コネクタのセキュリティ更新プログラム</td><td align="left">適用延期</td></tr></tbody></table><h3 id="MC901932"><a href="#MC901932" class="headerlink" title="MC901932"></a>MC901932</h3><p><b>Power Platform - “Http With Microsoft Entra ID (事前承認済み)” コネクタのセキュリティ更新プログラム</b><br></p><p>セキュリティを強化するための “Http With Microsoft Entra ID (preauthorized)” (“Webcontents” と呼ばれることもあります) コネクタの更新を発表します。この変更は 2024 年 10 月 25 日にロールアウトを開始し、2024 年 11 月 15 日に全世界でのロールアウトを完了します。この変更の一環として、アクセス許可がアタッチされていないファーストパーティアプリを使用する新しい接続タイプが追加されます。これは、セキュリティの露出を必要なものだけに制限することで、ベスト プラクティスが守られるようにするためです。この変更に伴い、コネクタの名前は “Http With Microsoft Entra ID” に更新され、名前から “(preauthorized)” が削除されます。</p><p><b>これにはどのような影響がありますか?</b><br></p><p>既存の接続は引き続き機能します。既存の接続を新しい接続タイプに移行する必要がある場合は、後日フォローアップします。<br>以下で推奨されるアクションを実行しない場合、2024 年 10 月 25 日以降に行われた新しい接続は失敗します。</p><p><b>準備するには何をする必要がありますか?</b><br></p><ol><li>この リンクされた記事 に記載されている手順に従って、2024 年 10 月 25 日より前にコネクタで使用されている最初の部分のアプリに必要なアクセス許可を追加してください。 </li><li>“Http With Microsoft Entra ID” (WebcontentsV2 とも呼ばれます) コネクタに接続を追加してテストを実行し、すべてが正常に動作することを確認します。 </li></ol><h3 id="MC918447"><a href="#MC918447" class="headerlink" title="MC918447"></a>MC918447</h3><p><b>Power Platform – [更新] “HTTP With Microsoft Entra ID (preauthorized)” コネクタのセキュリティ更新プログラム</b><br></p><p>この通信は、2024年10月1日に以前に伝達されたMC901932へのフォローアップメッセージです。以下の変更はまだ進行中ですが、当初2024年10月24日から2024年11月15日まで予定されていたロールアウト期間を延長します。 新しい推定タイムラインは、追加情報とともにできるだけ早く提供します。<br><br><br><br>セキュリティを強化するための “HTTP With Microsoft Entra ID (preauthorized)” (“Webcontents” と呼ばれることもあります) コネクタの更新を発表します。この変更の一環として、アクセス許可がアタッチされていないファーストパーティアプリを使用する新しい接続タイプが追加されます。これは、セキュリティの露出を必要なものだけに制限することで、ベストプラクティスが守られるようにするためです。この変更に合わせて、コネクタの名前は “HTTP With Microsoft Entra ID” に更新されます。</p><p><b>これにはどのような影響がありますか?</b><br><br>既存の接続は引き続き機能します。<br><br>既存の接続を新しい接続タイプに移行する必要がある場合は、後日フォローアップします。<br></p><p><b>準備するには何をする必要がありますか?</b><br></p><ol><li>「サインインしているユーザーに代わって動作するようにコネクタを承認する」の記事に記載されている手順に従って、コネクタで使用されているファーストパーティ アプリに必要なアクセス許可を追加してください。</li><li>“HTTP With Microsoft Entra ID” (WebcontentsV2 とも呼ばれます) コネクタに接続を追加してテストを実行し、すべてが正常に動作することを確認します。</li></ol><h2 id="よくあるご質問"><a href="#よくあるご質問" class="headerlink" title="よくあるご質問"></a>よくあるご質問</h2><h3 id="両方のコネクタを利用していますが、影響はありますか。"><a href="#両方のコネクタを利用していますが、影響はありますか。" class="headerlink" title="両方のコネクタを利用していますが、影響はありますか。"></a>両方のコネクタを利用していますが、影響はありますか。</h3><p>ご利用中のフローやアプリ等につきましては、今のところ影響はありません。<br><br>しかしながら、コネクタに対して新しく接続を作成する場合は機能変更の影響を受けます。<br><br>意図しないフローやアプリの中断を防ぐため、<a href="https://learn.microsoft.com/ja-jp/connectors/webcontentsv2/#%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BF%E3%81%8C%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A4%E3%83%B3%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB%E5%8B%95%E4%BD%9C%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B">こちらの手順</a> に従って、 API 実行に必要なアクセス許可をアプリに付与し、webcontentsv2 コネクタで動作検証を行ってください。<br></p><h3 id="自分のテナントに機能の変更が展開される具体的な日にちはわかりますか。"><a href="#自分のテナントに機能の変更が展開される具体的な日にちはわかりますか。" class="headerlink" title="自分のテナントに機能の変更が展開される具体的な日にちはわかりますか。"></a>自分のテナントに機能の変更が展開される具体的な日にちはわかりますか。</h3><p>恐れ入りますが、現時点で具体的な日にちはお伝えすることができません。<br><br>当初 2024 年 10 月 25 日 から 2024 年 11 月 15 日の間で適用される予定となっていましたが適用を延期しています。<br><br>適用予定日が決まり次第メッセージセンター等にて通知を行います。</p><h3 id="webcontents-コネクタを使っていますが、古い接続には影響が出ず、新しい接続にのみ影響が出るのはなぜですか"><a href="#webcontents-コネクタを使っていますが、古い接続には影響が出ず、新しい接続にのみ影響が出るのはなぜですか" class="headerlink" title="webcontents コネクタを使っていますが、古い接続には影響が出ず、新しい接続にのみ影響が出るのはなぜですか"></a>webcontents コネクタを使っていますが、古い接続には影響が出ず、新しい接続にのみ影響が出るのはなぜですか</h3><p>お客様のフローが意図せず停止することのないよう古い接続をそのまま利用できるような形で機能変更を行っているためです。<br></p><p>機能の変更が展開されますと、 webcontens コネクタに対して 2 種類の接続が存在するようになります。<br></p><table><thead><tr><th align="left"></th><th align="left">作成時期</th><th align="left">アクセス許可</th></tr></thead><tbody><tr><td align="left">接続Ａ</td><td align="left">変更前に作成</td><td align="left">APIのアクセス許可がマイクロソフトにより設定されている</td></tr><tr><td align="left">接続Ｂ</td><td align="left">変更後に作成</td><td align="left">APIのアクセス許可をユーザーが設定する</td></tr></tbody></table><p>接続Ａは引き続きご利用いただくことができますが、セキュリティの観点から管理者のアクセス許可を必要とする動作にしていく予定です。<br><br>接続Ａの対応については検討を行っているため、お客様側での対応が必要となりましたら改めてメッセージセンターで通知を行います。</p><h3 id="両方のコネクタをDLPポリシーでブロックしているのですが、影響ありますか。"><a href="#両方のコネクタをDLPポリシーでブロックしているのですが、影響ありますか。" class="headerlink" title="両方のコネクタをDLPポリシーでブロックしているのですが、影響ありますか。"></a>両方のコネクタをDLPポリシーでブロックしているのですが、影響ありますか。</h3><p>ブロックしてコネクタ自体を利用していない場合は影響ありません。</p><hr><p>本ブログの内容は MC901932 / MC918447 通達時点の情報となりますので、最新情報についてはコネクタ等各種公開情報を随時ご参照ください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの網野です。&lt;br&gt;2024 年 10 月 に MC901932 / MC918447 にて通知された内容について、お客様への影響および対応方法についてご案内いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Canvas app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Canvas-app/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="Information" scheme="https://jpdynamicscrm.github.io/blog/tags/Information/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="Connector and Connection" scheme="https://jpdynamicscrm.github.io/blog/tags/Connector-and-Connection/"/>
    
  </entry>
  
  <entry>
    <title>Copilot Studio お問い合わせの際の情報取得手順</title>
    <link href="https://jpdynamicscrm.github.io/blog/copilotstudio/helpful-information-for-copilotstudio-sr/"/>
    <id>https://jpdynamicscrm.github.io/blog/copilotstudio/helpful-information-for-copilotstudio-sr/</id>
    <published>2024-10-10T06:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.431Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの竹内です。<br>本記事では Microsoft Copilot Studio (旧称 Power Virtual Agents) 関連のお問い合わせの際に、調査のために必要となる情報について、その取得手順をご案内致します。</p><span id="more"></span><ol><li><a href="#anchor-intro">概要</a></li><li><a href="#anchor-how-to-collect">情報取得手順詳細</a><ol><li><a href="#anchor-about-situation">事象の発生状況</a></li><li><a href="#anchor-about-screencapture">事象発生時のエラーメッセージや画面キャプチャ・動画</a></li><li><a href="#anchor-environmentid">環境 ID</a></li><li><a href="#anchor-botid">Bot ID</a></li><li><a href="#anchor-conversationid">Conversation ID</a></li><li><a href="#anchor-session-details">セッション詳細</a></li><li><a href="#anchor-snapshot-zip">事象再現時のスナップショット zip ファイル</a></li><li><a href="#anchor-knowledge-enable-state">ナレッジの有効化状態</a></li><li><a href="#anchor-raw-input-output">会話入出力</a></li><li><a href="#anchor-topics-screen">トピック画面</a></li><li><a href="#anchor-conversation-transcript">会話トランスクリプションテーブルデータ</a></li><li><a href="#anchor-solution-export-file">ソリューションエクスポートファイル</a></li><li><a href="#anchor-about-networkhar">Web ブラウザのネットワーク トレース・コンソール ログ</a></li></ol></li></ol><p><a id='anchor-intro'></a></p><h1 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h1><p>弊社サポートではお問合せを頂いた際のトラブルシューティングにおいてお問い合わせの内容をもとに調査方針を立てております。<br>発生している事象の把握のため、直面されている事象の切り分けや情報提供をお願いすることがあります。<br>Copilot Studio (旧称 Power Virtual Agents) に関するサポートサービスへお問合せの際の情報取得手順について以下のとおりご案内いたします。</p><p><a id='anchor-how-to-collect'></a></p><h1 id="情報取得手順詳細"><a href="#情報取得手順詳細" class="headerlink" title="情報取得手順詳細"></a>情報取得手順詳細</h1><p><a id='anchor-about-situation'></a></p><h2 id="1-事象の発生状況"><a href="#1-事象の発生状況" class="headerlink" title="1. 事象の発生状況"></a>1. 事象の発生状況</h2><p>  エラーや意図しない状況がどのような状況下で発生するかお知らせください。<br>  事象の発生条件を特定することで、問題の特定だけではなく弊社環境での再現調査においても有用な情報が得られます。<br>  以下の情報をお知らせいただくことでより明確に事象を把握することができます。  </p><p><a id='anchor-about-screencapture'></a></p><h2 id="2-事象発生時のエラーメッセージや画面キャプチャ・動画"><a href="#2-事象発生時のエラーメッセージや画面キャプチャ・動画" class="headerlink" title="2. 事象発生時のエラーメッセージや画面キャプチャ・動画"></a>2. 事象発生時のエラーメッセージや画面キャプチャ・動画</h2><p>  エラーの内容を具体的に表すメッセージや画面キャプチャなどの情報をお寄せください。<br>  事象再現時の動画がありますと事象の発生状況をより正確に把握することができます。  </p><h3 id="エラーメッセージや画面キャプチャ"><a href="#エラーメッセージや画面キャプチャ" class="headerlink" title="エラーメッセージや画面キャプチャ"></a>エラーメッセージや画面キャプチャ</h3><p>  エラーの内容が分かるよう画面キャプチャをご取得ください。<br>  エラーメッセージ内にタイムスタンプやエラーコードが記載されている場合はそれらの情報を <strong>テキスト形式</strong> でご取得ください。  </p><h3 id="動画"><a href="#動画" class="headerlink" title="動画"></a>動画</h3><p>  以下のいずれかの方法で事象発生時の動画をご取得ください。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>事象発生の事前に取得開始し、事象発生後に採取を行う必要がございます。</p></div><ul><li>Windows ゲーム バーでの画面収録<br><a href="https://support.microsoft.com/ja-jp/windows/%E3%82%B2%E3%83%BC%E3%83%A0-%E3%83%90%E3%83%BC%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6-pc-%E3%81%AB%E3%82%B2%E3%83%BC%E3%83%A0-%E3%82%AF%E3%83%AA%E3%83%83%E3%83%97%E3%82%92%E8%A8%98%E9%8C%B2%E3%81%99%E3%82%8B-2f477001-54d4-1276-9144-b0416a307f3c">ゲーム バーを使用して PC にゲーム クリップを記録する</a>  </li><li>PowerPoint での画面収録<br><a href="https://support.microsoft.com/ja-jp/office/powerpoint-%E3%81%A7%E7%94%BB%E9%9D%A2%E3%82%92%E8%A8%98%E9%8C%B2%E3%81%99%E3%82%8B-0b4c3f65-534c-4cf1-9c59-402b6e9d79d0">PowerPoint で画面を記録する</a>  </li><li>Microsoft Teams での画面収録<br><a href="https://support.microsoft.com/ja-jp/office/microsoft-teams-%E3%81%A7%E4%BC%9A%E8%AD%B0%E3%82%92%E8%A8%98%E9%8C%B2%E3%81%99%E3%82%8B-34dfbe7f-b07d-4a27-b4c6-de62f1348c24#:~:text=Microsoft">Microsoft Teamsで会議を記録する</a>  </li></ul><p><a id='anchor-environmentid'></a></p><h2 id="3-環境ID"><a href="#3-環境ID" class="headerlink" title="3. 環境ID"></a>3. 環境ID</h2><p>  以下の手順で環境 ID を取得し、ご提供ください。<br>  必要に応じて URL をそのままご提供ください。</p><ul><li>Copilot Studio ポータルを開きます。開いている環境が対象の環境であることを確認してください  </li><li>URL 内の environments/ の直後にある ID が環境 ID です。</li><li>URL をテキストファイル、あるいは文字列としてメール等に張り付けてご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_EnvironmentID.png">  </li></ul><p><a id='anchor-botid'></a></p><h2 id="4-Bot-ID"><a href="#4-Bot-ID" class="headerlink" title="4. Bot ID"></a>4. Bot ID</h2><p>  以下の手順で環境 ID を取得し、ご提供ください。<br>  必要に応じて URL をそのままご提供ください。</p><ul><li>Copilot Studio ポータル&gt;（対象の環境選択）＞カスタムコパイロット＞対象のコパイロットを開きます。</li><li>URL 内の bots/ の直後にある ID が Bot ID です。</li><li>URL をテキストファイル、あるいは文字列としてメール等に張り付けてご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_BotID.png">  </li></ul><p><a id='anchor-conversationid'></a></p><h2 id="5-Conversation-ID"><a href="#5-Conversation-ID" class="headerlink" title="5. Conversation ID"></a>5. Conversation ID</h2><p>  以下の手順で Conversation ID を取得し、ご提供ください。</p><ul><li>Copilot Studio ポータル&gt;（対象の環境選択）＞カスタムコパイロット＞対象のコパイロットを開きます。  </li><li>対象のコパイロットとのチャットウィンドウに ‘/debug conversationid’ とご入力ください。  </li><li>得られた応答をテキストファイルとしてご提供ください。また、下画像と同様のスクリーンショットをご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_ConversationID.png">  </li></ul><p><a id='anchor-session-details'></a></p><h2 id="6-セッション詳細"><a href="#6-セッション詳細" class="headerlink" title="6. セッション詳細"></a>6. セッション詳細</h2><p>  以下の手順でセッション詳細を取得し、ご提供ください。</p><ul><li>Copilot Studio ポータル&gt;（対象の環境選択）＞歯車アイコン＞セッション詳細を開きます。</li><li>表示された内容をコピーしてテキストファイルとしてご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_session_details.png">  </li></ul><p><a id='anchor-snapshot-zip'></a></p><h2 id="7-事象再現時のスナップショット-zip-ファイル"><a href="#7-事象再現時のスナップショット-zip-ファイル" class="headerlink" title="7. 事象再現時のスナップショット zip ファイル"></a>7. 事象再現時のスナップショット zip ファイル</h2><p>  以下の手順でスナップショット zip ファイルを取得し、ご提供ください。</p><ul><li>Copilot Studio ポータル&gt;（対象の環境選択）＞カスタムコパイロット＞対象のコパイロットを開きます。  </li><li>対象のコパイロットとのチャットウィンドウ右上の三点リーダーより、「スナップショットの保存」を選択します。  </li><li>得られた zip ファイルをご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_snapshot.png">  </li></ul><p><a id='anchor-knowledge-enable-state'></a></p><h2 id="8-ナレッジの有効化状態"><a href="#8-ナレッジの有効化状態" class="headerlink" title="8. ナレッジの有効化状態"></a>8. ナレッジの有効化状態</h2><p>  以下の手順でスクリーンショット画像ファイルを取得し、ご提供ください。</p><ul><li>Copilot Studio ポータル&gt;（対象の環境選択）＞カスタムコパイロット＞対象のコパイロットを開きます。  </li><li>対象のコパイロットの「ナレッジ」セクションで「有効」のトグルボタンがオンであるかを確認します。  </li><li>確認した際の、下画像と同様のスクリーンショットをご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_knowledge_enabling.png">  </li></ul><p><a id='anchor-raw-input-output'></a></p><h2 id="9-会話入出力"><a href="#9-会話入出力" class="headerlink" title="9. 会話入出力"></a>9. 会話入出力</h2><p>  以下の手順でスクリーンショット画像ファイルを取得し、ご提供ください。</p><ul><li>Copilot Studio ポータル&gt;（対象の環境選択）＞カスタムコパイロット＞対象のコパイロットを開きます。  </li><li>対象のコパイロットとのチャットウィンドウでコパイロットと会話を行ってください。  </li><li>その会話画面について、下画像と同様のスクリーンショットをご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_conversation_inout.png"> </li></ul><p><a id='anchor-topics-screen'></a></p><h2 id="10-トピック画面"><a href="#10-トピック画面" class="headerlink" title="10. トピック画面"></a>10. トピック画面</h2><p>  以下の手順でスクリーンショット画像ファイルを取得し、ご提供ください。</p><ul><li>Copilot Studio ポータル&gt;（対象の環境選択）＞カスタムコパイロット＞対象のコパイロット＞トピックタブを開きます。  </li><li>事象に応じて対象のトピックの全体像や、対象のノードのプロパティなどを表示してください。  </li><li>その画面について、下画像のようにスクリーンショットを撮影してご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_topic_screen.png"> </li></ul><p><a id='anchor-conversation-transcript'></a></p><h2 id="11-会話トランスクリプションテーブルデータ"><a href="#11-会話トランスクリプションテーブルデータ" class="headerlink" title="11. 会話トランスクリプションテーブルデータ"></a>11. 会話トランスクリプションテーブルデータ</h2><p>  下記公開情報にてご案内している方法で、会話トランスクリプションテーブルのデータを取得してください。<br>  取得した zip ファイルをご提供ください。<br>  <a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/analytics-sessions-transcripts#export-conversation-transcripts">https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/analytics-sessions-transcripts#export-conversation-transcripts</a></p><p><a id='anchor-solution-export-file'></a></p><h2 id="12-ソリューションエクスポートファイル"><a href="#12-ソリューションエクスポートファイル" class="headerlink" title="12. ソリューションエクスポートファイル"></a>12. ソリューションエクスポートファイル</h2><ol><li>エージェントのエクスポートを選択し、ソリューション画面を開きます。<br>起動経路：エージェント＞（任意のエージェント）…　＞　エージェントのエクスポート<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_solution_export_file1.png"> 　</li><li>新しいソリューションを作成します。設定値は任意で構いません。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_solution_export_file2.png"> 　</li><li>「既存を追加」からエージェントをソリューションに追加します。<br>必要に応じて同様の手順でクラウドフローもソリューションに追加し、一緒にご提供ください。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_solution_export_file3.png"> 　</li><li>ソリューション一覧画面に戻り、作成したソリューションをエクスポートします。設定値は任意で構いません。<br><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_solution_export_file4.png"> 　</li></ol><p><a id='anchor-about-networkhar'></a></p><h2 id="13-Web-ブラウザのネットワーク-トレース・コンソール-ログ"><a href="#13-Web-ブラウザのネットワーク-トレース・コンソール-ログ" class="headerlink" title="13. Web ブラウザのネットワーク トレース・コンソール ログ"></a>13. Web ブラウザのネットワーク トレース・コンソール ログ</h2><p>  カスタム Copilot 編集中、あるいは実行中に Copilot Studio サービスへ送信する HTTP リクエストや Copilot Studio サービスから受信する HTTP レスポンスの内容を確認することで通信上の問題を特定します。  </p><div class="alert is-important"><p class="alert-title">重要</p><p>事象発生の事前に取得開始し、事象発生後に採取を行う必要がございます。 </p></div><div class="alert is-info"><p class="alert-title">Note</p><p>事象の内容により、netsh trace コマンドやサードパーティ製のツール「Fiddler」によるネットワーク キャプチャの取得をお願いする場合があります。  </p></div><h3 id="ブラウザネットワークトレース"><a href="#ブラウザネットワークトレース" class="headerlink" title="ブラウザネットワークトレース"></a>ブラウザネットワークトレース</h3><p>  ご取得方法は以下公開情報をご参照ください。<br>  <a href="https://learn.microsoft.com/ja-jp/azure/azure-web-pubsub/howto-troubleshoot-network-trace#collect-a-network-trace-in-the-browser-browser-based-apps-only">ブラウザーでネットワーク トレースを収集する (ブラウザーベースのアプリのみ)</a></p><div class="alert is-important"><p class="alert-title">重要</p><p>ご取得の際は「ログの保持」「キャッシュを無効にする」にチェックを有効にしご取得ください。</p><p><img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_browser_trace.png"> 　</p></div><h3 id="コンソールログ"><a href="#コンソールログ" class="headerlink" title="コンソールログ"></a>コンソールログ</h3><p>  Console タブをクリックし、ログ領域を右クリックし <strong>「名前を付けて保存」</strong> にて保存いたします。<br>  <img src="/blog/copilotstudio/helpful-information-for-copilotstudio-sr/image_console_log.png">　　</p><hr><h2 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h2><p>本手順は執筆時点でのユーザー インターフェイスを基に紹介しています。バージョンアップによって若干の UI の遷移など異なる場合があります。その場合は画面の指示に従って進めてください。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの竹内です。&lt;br&gt;本記事では Microsoft Copilot Studio (旧称 Power Virtual Agents) 関連のお問い合わせの際に、調査のために必要となる情報について、その取得手順をご案内致します。&lt;/p&gt;</summary>
    
    
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/categories/Microsoft-Copilot-Studio/"/>
    
    
    <category term="情報採取" scheme="https://jpdynamicscrm.github.io/blog/tags/%E6%83%85%E5%A0%B1%E6%8E%A1%E5%8F%96/"/>
    
    <category term="お問い合わせ全般" scheme="https://jpdynamicscrm.github.io/blog/tags/%E3%81%8A%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E5%85%A8%E8%88%AC/"/>
    
    <category term="Microsoft Copilot Studio" scheme="https://jpdynamicscrm.github.io/blog/tags/Microsoft-Copilot-Studio/"/>
    
    <category term="Power Virtual Agents" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Virtual-Agents/"/>
    
  </entry>
  
  <entry>
    <title>Power Platform における Copilot の無効化方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerplatform/pp-copilot-disable/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerplatform/pp-copilot-disable/</id>
    <published>2024-07-05T03:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.657Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの竹内です。<br>Microsoft の提供する生成 AI の Copilot は Power Platform の随所で使用することができます。<br>今回は、それらの機能の一部、あるいは全部を無効化、制御する方法についてご案内いたします。  </p><span id="more"></span><h1 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h1><ol><li><a href="#disable-in-power-platform">Power Platform 環境設定で環境レベルで Copilot 機能を無効化する</a></li><li><a href="#disable-in-power-automate">Power Automate における Copilot の無効化</a></li><li><a href="#disable-in-power-apps">Power Apps における Copilot の無効化</a></li><li><a href="#disable-connector-aibuilder">Copilot Connector や AI Builder の無効化</a></li></ol><p><a id='disable-in-power-platform'></a></p><h2 id="Power-Platform-環境設定で環境レベルで-Copilot-機能を無効化する"><a href="#Power-Platform-環境設定で環境レベルで-Copilot-機能を無効化する" class="headerlink" title="Power Platform 環境設定で環境レベルで Copilot 機能を無効化する"></a>Power Platform 環境設定で環境レベルで Copilot 機能を無効化する</h2><h3 id="Power-Platform-における-Copilot-機能無効化の概要"><a href="#Power-Platform-における-Copilot-機能無効化の概要" class="headerlink" title="Power Platform における Copilot 機能無効化の概要"></a>Power Platform における Copilot 機能無効化の概要</h3><p>データをホストしているリージョンと Copilot 出力を得ることができるリージョンが異なるため、リージョン間データ移動をオフにすると、リージョンを跨いだデータ移動を要する Copilot 機能を使用することができなくなります。 </p><p>なお、日本で Copilot を使用している場合、Power Platform または Dynamics 365 環境がホストされる地域は日本となり、Azure OpenAI Service および Bing 検索のデータをホストしているリージョンはアメリカとなります。<br>(2024年8月15日時点)  </p><p>最新情報については下記の公開情報をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/geographical-availability-copilot#regions-involved-with-copilots-and-generative-ai-features">コパイロットと生成 AI 機能をオンにする</a></p><!-- ![](/blog/powerplatform/pp-copilot-disable/img02.png)![](/blog/powerplatform/pp-copilot-disable/img01.png) --><p>設定方法や、Power Platform 各製品で無効化できる機能等、更なる詳細についてはこちらの公開文書（<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/geographical-availability-copilot#enable-data-movement-across-regions">Turn on copilots and generative AI features - Power Platform | Microsoft Learn</a>）をご参照ください。<br>なお、PowerShellコマンド実行から管理する方法もございます。それに関しては、下記の公開文書をご参照ください。（<a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powerapps.administration.powershell/set-powerplatformgenerativeaisettings?view=pa-ps-latest">Set-PowerPlatformGenerativeAiSettings (Microsoft.PowerApps.Administration.PowerShell) | Microsoft Learn</a>）  </p><br><p>また、Copilot に関する機能は現在多くの変更がされておりますので、最新情報についてはこちらのリリースプランのページ（<a href="https://releaseplans.microsoft.com/ja-jp/availability-reports/?report=copilotproductreport">Release Planner Availability Reports  · Microsoft Release Planner</a>）も合わせてご参照ください。<br>こちらのページでは、Power Platform および Dynamics 各製品/地域/言語/リリースバージョンによる Copilot 利用可能機能についての最新情報がレポートとしてまとめられております。</p><br><h3 id="Power-Platform-における-Copilot-機能無効化の手順"><a href="#Power-Platform-における-Copilot-機能無効化の手順" class="headerlink" title="Power Platform における Copilot 機能無効化の手順"></a>Power Platform における Copilot 機能無効化の手順</h3><p>リージョン間のデータ移動をオフにすることで、Power Platform 全体で Copilot の一部機能を無効化することができます。<br>無効化できる機能の詳細については下記の公開文書をご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/power-platform/admin/geographical-availability-copilot#copilots-and-generative-ai-features-that-are-available-when-you-enable-data-movement-across-regions">コパイロットと生成 AI 機能は、地域をまたいだデータ移動を可能にした場合に利用できます</a></p><p>具体的な手順は下記のとおりです。<br><a href="https://admin.powerplatform.microsoft.com/">Power Platform 管理センター (Power Platform Admin Center)</a> で特定の環境を選択し、環境の「生成AI機能」カードを編集します。<br>「リージョン間データ移動 (the Move data across regions)」のチェックボックスをオフにします。  </p><p><img src="/blog/powerplatform/pp-copilot-disable/img03.png"> </p><p><img src="/blog/powerplatform/pp-copilot-disable/img04.png"> </p><!--<div align="center"><img src="./pp-copilot-disable/img04.png" width="50%"></div>--><br><br><p>Power Platform 全体での Copilot の制御、無効化方法については以上となります。<br><strong>以降では、Power Automate と Power Apps それぞれについて、テナントレベル、環境レベルでの Copilot 機能の管理、無効化方法についてご案内いたします。</strong></p><p><a id='disable-in-power-automate'></a></p><h2 id="Power-Automate-における-Copilot-の無効化"><a href="#Power-Automate-における-Copilot-の無効化" class="headerlink" title="Power Automate における Copilot の無効化"></a>Power Automate における Copilot の無効化</h2><h3 id="Power-Automate-における-Copilot-機能の概要"><a href="#Power-Automate-における-Copilot-機能の概要" class="headerlink" title="Power Automate における Copilot 機能の概要"></a>Power Automate における Copilot 機能の概要</h3><p>Power Automate 中では、こちらの公開文書（<a href="https://learn.microsoft.com/ja-jp/power-automate/copilot-overview">Copilot in Power Automate - Power Automate | Microsoft Learn</a>）に表されているような、多くの Copilot 機能が提供されております。</p><h3 id="Power-Automate-における-Copilot-機能の無効化"><a href="#Power-Automate-における-Copilot-機能の無効化" class="headerlink" title="Power Automate における Copilot 機能の無効化"></a>Power Automate における Copilot 機能の無効化</h3><p>Copilotを無効化するには以下の手順の操作を実行してください。</p><ol><li>リージョンを確認する<br>リージョンの確認方法などについてはこちらの公開文書（<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/regions-overview">Choose the region when setting up an environment - Power Platform | Microsoft Learn</a>）をご参照ください。<br>リージョンがGPUを保有しているか否か、具体的には以下のリストに含まれるかどうかにより以降の手順が異なります。</li></ol><ul><li>UK</li><li>Australia</li><li>US</li><li>India</li></ul><ol start="2"><li>無効化する<ul><li>リージョンが上記である場合：<ul><li>テナントレベル：管理者がサポートに連絡する</li><li>環境レベル：設定不可</li></ul></li><li>リージョンが上記でない場合：<ul><li>テナントレベル：管理者が Power Platform 管理センター等からリージョン間データ移行を無効化する</li><li>環境レベル：管理者が Power Platform 管理センター等からリージョン間データ移行を無効化する</li></ul></li></ul></li></ol><h3 id="Power-Automate-における-Copilot-機能の無効化の確認"><a href="#Power-Automate-における-Copilot-機能の無効化の確認" class="headerlink" title="Power Automate における Copilot 機能の無効化の確認"></a>Power Automate における Copilot 機能の無効化の確認</h3><p>こちらの公開文書（<a href="https://learn.microsoft.com/ja-jp/power-platform/admin/list-tenantsettings">プログラム可能性と拡張性 - Power Platform API - 2020-10-01 - テナント設定の一覧表示 (プレビュー) - Power Platform | Microsoft Learn</a>）に記載のある HTTP 要求をして、下記のプロパティ値を参照することにより、無効化されているかを確認することができます。</p><blockquote><p>powerPlatform.powerAutomate.disableCopilot<br>powerPlatform.powerAutomate.disableCopilotWithBing   </p></blockquote><p><a id='disable-in-power-apps'></a></p><h2 id="Power-Apps-における-Copilot-の無効化"><a href="#Power-Apps-における-Copilot-の無効化" class="headerlink" title="Power Apps における Copilot の無効化"></a>Power Apps における Copilot の無効化</h2><h3 id="Power-Apps-における-Copilot-機能の概要"><a href="#Power-Apps-における-Copilot-機能の概要" class="headerlink" title="Power Apps における Copilot 機能の概要"></a>Power Apps における Copilot 機能の概要</h3><p>キャンバスアプリやモデル駆動型アプリなど、それぞれの項目で利用可能な Copilot の情報がまとめられておりますので、こちらの公開文書をご参照ください。（<a href="https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/ai-overview">Copilot in Power Apps overview - Power Apps | Microsoft Learn</a>）</p><h3 id="Power-Apps-における-Copilot-features-の分類と無効化"><a href="#Power-Apps-における-Copilot-features-の分類と無効化" class="headerlink" title="Power Apps における Copilot features の分類と無効化"></a>Power Apps における Copilot features の分類と無効化</h3><p>Power Apps における Copilot 機能の無効化についてはこちらの公開文書も合わせてご参照ください（<br><a href="https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/ai-overview#enable-or-disable-copilot-preview-in-power-apps">Enable or disable Copilot (preview) in Power Apps</a> ）。</p><ul><li>Power Apps における Copilot の機能には <strong>General available (GA) features</strong> と <strong>Preview features</strong> がございます。</li><li>General available Copilot features のリリース情報などは<a href="https://learn.microsoft.com/ja-jp/dynamics365/release-plans/">こちらのリリースプラン</a>をご参照ください。</li><li>あるいは、各機能の公開文書ページにどちらの機能であるかの記載がございます（英語版でのみ表示される場合などございますので、必要に応じて設定を切り替える等していただくようお願いいたします。）。<br>例：<a href="https://learn.microsoft.com/en-us/power-apps/maker/canvas-apps/ai-conversations-create-app">Build apps through conversation - Power Apps | Microsoft Learn</a></li></ul><!--![](/blog/powerplatform/pp-copilot-disable/img07.png) ![](/blog/powerplatform/pp-copilot-disable/img08.png) --></br></br><p>無効化方法：</p><ul><li><p>General available Copilot features はデフォルトで有効化されており、お客様の操作によって無効化することはできません。</p><ul><li>これらを無効化するためには、テナント管理者がMSサポートに連絡する必要がございます。</li><li>なお、無効化ができるのはテナント単位のみであり、環境単位では無効化することができません。</li></ul></li><li><p>Copilot preview features はデフォルトで有効化されているが、これは管理者によって無効化することができます。</p><ul><li>テナント単位での設定と環境単位での設定方法がございます。</li><li>それぞれの具体的な設定方法についてはこちらの公開文書をご参照ください（<a href="https://learn.microsoft.com/ja-jp/power-apps/maker/canvas-apps/ai-overview#enable-or-disable-copilot-preview-in-power-apps">Enable or disable Copilot (preview) in Power Apps</a> ）。</li></ul><!--![](/blog/powerplatform/pp-copilot-disable/img18.png) --></li></ul><p><a id='disable-connector-aibuilder'></a></p><h2 id="Copilot-Connector-や-AI-Builder-の無効化"><a href="#Copilot-Connector-や-AI-Builder-の無効化" class="headerlink" title="Copilot Connector や AI Builder の無効化"></a>Copilot Connector や AI Builder の無効化</h2><p>Connector や AI Builder 等の機能は上記の設定では無効化できません。具体的には、Power Automate 中の Copilot のコネクタや Power Apps 中の「GPTでテキスト生成する」などの機能です。<br>これらは環境単位で Power Platform 管理センターから無効化することができます。<br>下記の設定画面から、無効化する機能のトグルボタンを「Off」にしてください。</p><p><img src="/blog/powerplatform/pp-copilot-disable/img05.png"> </p><p>また、Power Apps のキャンバス中に Copilot コンポーネントを埋め込む機能を無効化するのもここからできます。 </p><p><img src="/blog/powerplatform/pp-copilot-disable/img06.png"> </p><br><hr><h1 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h1><p>生成 AI である Copilot を Power Platform 内部で無効化する方法についてご紹介いたしました。</p><p>この記事が皆さまと Copilot との適切な付き合いの一助になりましたら幸いです。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの竹内です。&lt;br&gt;Microsoft の提供する生成 AI の Copilot は Power Platform の随所で使用することができます。&lt;br&gt;今回は、それらの機能の一部、あるいは全部を無効化、制御する方法についてご案内いたします。  &lt;/p&gt;</summary>
    
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/"/>
    
    <category term="Canvas app" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Apps/Canvas-app/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Apps" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Apps/"/>
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Copilot" scheme="https://jpdynamicscrm.github.io/blog/tags/Copilot/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate クラウド フローを使用して、Microsoft Graph API を実行する方法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/Graph-API/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/Graph-API/</id>
    <published>2024-06-24T05:00:00.000Z</published>
    <updated>2025-05-01T03:35:34.480Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Power Platform サポートチームの清水、竹内です。<br>この記事では、Power Automate を使用して、Microsoft Graph API を実行する方法についてご紹介いたします。</p><span id="more"></span><ul><li><a href="#%E7%9B%AE%E6%AC%A1">目次</a></li><li><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB">はじめに</a></li><li><a href="#%E5%BF%85%E8%A6%81%E3%81%AA%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9">必要なライセンス</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B-api-%E3%82%92%E6%B1%BA%E5%AE%9A%E3%81%99%E3%82%8B">使用する API を決定する</a></li><li><a href="#%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E8%A8%B1%E5%8F%AF%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">必要なアクセス許可を確認する</a></li><li><a href="#http-with-microsoft-entra-id-preauthorized-%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BF%E3%81%BE%E3%81%9F%E3%81%AF-http-with-microsoft-entra-id-%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BF%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B">HTTP with Microsoft Entra ID (preauthorized) コネクタまたは HTTP with Microsoft Entra ID コネクタを使用する</a></li><li><a href="#http-%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%BF%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B">HTTP コネクタを使用する</a><ul><li><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB">おわりに</a></li></ul></li></ul><p><a id='anchor-Intro'></a></p><h1 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h1><hr><p>Power Automate では、コネクタを使用して様々な操作を自動化することができますが、目的の操作がコネクタでは用意されていない場合、API を使用することでフローでの自動化が実現可能な場合があります。  </p><p>ここでは、Microsoft Graph API を使用して API リクエストを送信する 2 つの方法について、ご説明いたします。</p><p><a id='anchor-license-requirement'></a></p><h1 id="必要なライセンス"><a href="#必要なライセンス" class="headerlink" title="必要なライセンス"></a>必要なライセンス</h1><hr><p>今回作成するフローではプレミアム コネクタを使用するため、以下のいずれかのライセンスが必要です。  </p><ul><li>Power Automate Premium</li><li>Power Automate Process</li></ul><p><a id='anchor-decide-the-API'></a></p><h1 id="使用する-API-を決定する"><a href="#使用する-API-を決定する" class="headerlink" title="使用する API を決定する"></a>使用する API を決定する</h1><hr><p>まずは使用する API を決定します。<br><a href="https://learn.microsoft.com/ja-jp/graph/api/overview?view=graph-rest-1.0">Microsoft Graph API のリファレンス</a> から、目的に合った API を探してください。  </p><p>本記事では、よくあるお問い合わせの一つとして、「テキスト形式でメールを送信する」処理を例にとって進めていきたいと思います。<br>Power Automate の Office 365 Outlook コネクタ「メールを送信する (V2)」アクションでは、HTML 形式のメールしか送信できませんが、Graph API を使用することで、テキスト形式でメールを送信することも可能です。<br>今回使用する API はこちらです。<br><a href="https://learn.microsoft.com/ja-jp/graph/api/user-sendmail?view=graph-rest-1.0&tabs=http">メールを送信する - Microsoft Graph v1.0 | Microsoft Learn</a>  </p><p><a id='anchor-check-the-permission'></a></p><h1 id="必要なアクセス許可を確認する"><a href="#必要なアクセス許可を確認する" class="headerlink" title="必要なアクセス許可を確認する"></a>必要なアクセス許可を確認する</h1><hr><p>公開情報には、必ず API を呼び出すために必要なアクセス許可が記されているので、「アクセス許可」のセクションにて必要なアクセス許可が何かを確認してください。   </p><p>アクセス許可の選択方法などの詳細については、<a href="https://learn.microsoft.com/ja-jp/graph/permissions-reference">Microsoft Graph のアクセス許可のリファレンス | Microsoft Learn</a>をご参照ください。<br>今回使用する API では、以下のアクセス許可が必要です。  </p><p><img src="/blog/powerautomate/Graph-API/img01.png">  </p><p>ここで、アクセス許可には「委任」と「アプリケーション」の 2 種類があります。  </p><ul><li>委任されたアクセス許可<br>ユーザーの代わりにアクセスする際に使用いたします。<br>API を実際に実行するアプリケーションに対し、サインインしているユーザーとして動作するためのアクセス許可が委任されます。  </li><li>アプリケーションのアクセス許可<br>ユーザーなしでアクセスする際に使用いたします。<br>API を実行するアプリケーション自体にアクセス許可を付与します。  </li></ul><p>委任されたアクセス許可が使用できる場合は、ユーザーに変わって API を実行する HTTP with Entra ID (preauthorized) コネクタまたは HTTP with Entra ID コネクタが、<br>アプリケーションのアクセス許可が使用できる場合は、ユーザーなしで API を実行する HTTP コネクタが使用できます。  </p><p>それぞれのコネクタの使い方について説明します。  </p><p><a id='anchor-use-HTTP-with-Entra-ID-Connector'></a></p><h1 id="HTTP-with-Microsoft-Entra-ID-preauthorized-コネクタまたは-HTTP-with-Microsoft-Entra-ID-コネクタを使用する"><a href="#HTTP-with-Microsoft-Entra-ID-preauthorized-コネクタまたは-HTTP-with-Microsoft-Entra-ID-コネクタを使用する" class="headerlink" title="HTTP with Microsoft Entra ID (preauthorized) コネクタまたは HTTP with Microsoft Entra ID コネクタを使用する"></a>HTTP with Microsoft Entra ID (preauthorized) コネクタまたは HTTP with Microsoft Entra ID コネクタを使用する</h1><hr><p>HTTP with Microsoft Entra ID (preauthorized) コネクタまたは HTTP with Microsoft Entra ID コネクタでは、接続でサインインしたユーザーに代わって API を実行できます。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>Microsoft Entra ID は Azure Active Directory の名称が変更されたものです。この変更の更なる詳細についてはこちらのドキュメント（<a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/compare">Azure Active Directory は Microsoft Entra ID に名称変更されています - Microsoft Entra | Microsoft Learn</a>）をご参照ください。   </p><p>この変更に伴い、HTTP with Azure AD コネクタは HTTP with Microsoft Entra ID (preauthorized) コネクタに変更されました。</p><p>また、利用者のアクセス可能な範囲の制御を容易にするため、HTTP with Microsoft Entra ID コネクタが作成されました。</p><p>これらのコネクタについての更なる詳細については、こちらのドキュメント（<a href="https://learn.microsoft.com/ja-jp/connectors/webcontents/">Microsoft Entra ID 付きの HTTP (事前承認済み) - Connectors | Microsoft Learn</a>）（<a href="https://learn.microsoft.com/ja-jp/connectors/webcontentsv2/">Microsoft Entra ID を使用した HTTP - Connectors | Microsoft Learn</a>）をご参照ください。  </p></div><p>以降では HTTP with Microsoft Entra ID (preauthorized) コネクタを使用した例をご紹介いたします。   </p><ol><li><p>HTTP with Microsoft Entra ID (preauthorized) コネクタの「HTTP 要求を呼び出します」アクションを挿入します。</p></li><li><p>コネクタを初めて使用する場合、接続を作成します。<br>今回は Graph API を実行するため、「基本リソース URL」と「Microsoft Entra ID リソース URI (アプリケーション ID URI)」の両方に以下の URI を設定し、[サインイン] をクリックします。  </p><ul><li>URI: <a href="https://graph.microsoft.com/">https://graph.microsoft.com</a>  </li></ul><p><img src="/blog/powerautomate/Graph-API/img08.png">  </p><p>※ここでサインインしたユーザーのアクセス許可が委任され、API が実行されます。  </p></li><li><p><a href="https://learn.microsoft.com/ja-jp/graph/api/user-sendmail?view=graph-rest-1.0&tabs=http#http-request">API のリファレンス</a> を参考に、リクエストを作成します。  </p><p><img src="/blog/powerautomate/Graph-API/img10.png">  </p><p>&lt;補足&gt;<br>本文の指定方法は、各リソースのリファレンスを参考に変更してください。<br>今回は、Message リソースを使用するので、下記の公開情報を参照しました。<br><a href="https://learn.microsoft.com/ja-jp/graph/api/resources/message?view=graph-rest-1.0">メッセージ リソースの種類 - Microsoft Graph | Microsoft Learn</a>  </p><p>また、テキスト形式でメールを送信することが目的なので、 <code>message.body.contentType</code> を <code>Text</code> に設定します。  </p><p><img src="/blog/powerautomate/Graph-API/img09.png">  </p></li><li><p>フローを実行し、正常に実行されるか確認します。  </p></li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>必要なアクセス許可の種類によっては、HTTP with Microsoft Entra ID (preauthorized) コネクタでは API が実行できない場合があります。</p><p>HTTP with Microsoft Entra ID (preauthorized) コネクタで実行できる権限スコープの一覧は現時点では公開されておりませんが、フローを実行した際に権限エラーが発生する場合、HTTP with Microsoft Entra ID (preauthorized) コネクタでは実行できない可能性がございますので、HTTP with Microsoft Entra ID コネクタや HTTP コネクタでの実行をお試しください。  </p></div><p><a id='anchor-use-HTTP-connector'></a></p><h1 id="HTTP-コネクタを使用する"><a href="#HTTP-コネクタを使用する" class="headerlink" title="HTTP コネクタを使用する"></a>HTTP コネクタを使用する</h1><hr><p>HTTP コネクタでは、ユーザーのサインインなしに、Azure AD に登録したアプリから API を実行できます。  </p><ol><li>Azure AD にアプリを登録します。<br><a href="https://learn.microsoft.com/ja-jp/graph/auth-register-app-v2?context=graph/api/1.0&view=graph-rest-1.0">アプリを Azure AD v2.0 エンドポイントに登録する - Microsoft Graph | Microsoft Learn</a> にしたがって、 Azure AD にアプリを登録します。<br>また、登録したアプリの [API のアクセス許可] のページにて、「必要なアクセス許可を確認する」の手順で確認したアプリケーションのアクセス許可を追加し、管理者の同意を与えます。  <img src="/blog/powerautomate/Graph-API/img07.png">   </li><li>HTTP コネクタの「HTTP」アクションを挿入します。<br>2-1. <a href="https://learn.microsoft.com/ja-jp/graph/api/user-sendmail?view=graph-rest-1.0&tabs=http#http-request">API のリファレンス</a> を参考に、リクエストを作成します。<br>   HTTP コネクタを使用する場合、サインイン中のユーザーがいないため、<code>/me/sendMail</code>ではなく、<code>/users/&#123;id | userPrincipalName&#125;/sendMail</code> の要求方法を使用することに注意してください。     <img src="/blog/powerautomate/Graph-API/img06.png">  2-2. 認証を「Active Directory OAuth」に設定し、Azure AD に登録したアプリから取得した情報を設定します。  <ul><li>テナント: ディレクトリ (テナント) ID  </li><li>対象ユーザー: <a href="https://graph.microsoft.com/">https://graph.microsoft.com</a>  </li><li>クライアント ID: アプリケーション (クライアント) ID  </li><li>資格情報の種類: シークレット  </li><li>シークレット: [証明書とシークレット] より、新しいクライアントシークレットを発行し、発行された「値」  </li></ul><img src="/blog/powerautomate/Graph-API/img05.png">  </li><li>フローを実行し、正常に実行されるか確認します。  </li></ol><hr><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>Power Automate から Graph API を実行することで、様々な操作を自動化することができます。<br>ぜひ、色々なシーンで活用してみてください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Power Platform サポートチームの清水、竹内です。&lt;br&gt;この記事では、Power Automate を使用して、Microsoft Graph API を実行する方法についてご紹介いたします。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/tags/Cloud-flow/"/>
    
    <category term="How to" scheme="https://jpdynamicscrm.github.io/blog/tags/How-to/"/>
    
    <category term="Graph API" scheme="https://jpdynamicscrm.github.io/blog/tags/Graph-API/"/>
    
  </entry>
  
  <entry>
    <title>Power Automate のフローで無限トリガーループが起きる際の対処法</title>
    <link href="https://jpdynamicscrm.github.io/blog/powerautomate/resolve-infinite-loops-in-SharePoint-updates/"/>
    <id>https://jpdynamicscrm.github.io/blog/powerautomate/resolve-infinite-loops-in-SharePoint-updates/</id>
    <published>2024-06-19T04:30:00.000Z</published>
    <updated>2025-05-01T03:35:34.553Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Power Platform サポートチームの トテ です。<br>今回は、 Power Automate のフローで無限トリガーループが起きる際の対処法についてご紹介します。</p><span id="more"></span><h2 id="1-無限トリガーループ事象"><a href="#1-無限トリガーループ事象" class="headerlink" title="1 . 無限トリガーループ事象"></a>1 . 無限トリガーループ事象</h2><p>Power Automate フローを実行した際、ないしはフローチェッカー上に、「このフローでの操作は、無限トリガーループを引き起こす可能性があります」という警告メッセージが表示されてしまうケースがあります。</p><p> <img src="/blog/powerautomate/resolve-infinite-loops-in-SharePoint-updates/image-5.png" alt="alt text"></p><br>*無限トリガーループとは、ワークフローまたは自動化プロセスが無限にトリガーされる状態を指します。一度の動きを想定しているつもりが、フローをオフにしない限り、同じ動作が繰り返し起きてしまう状態です。<p><br><br></p><h2 id="2-Power-Automate-上で見られる実例"><a href="#2-Power-Automate-上で見られる実例" class="headerlink" title="2. Power Automate 上で見られる実例"></a>2. Power Automate 上で見られる実例</h2><p>以下のフローを作成していると仮定します。</p><p>① SharePoint コネクタの <strong>「アイテムが作成または変更されたとき」のトリガーを使用</strong> して SharePoint リストに登録<br><br>② Teams のチャネルに①の内容を投稿<br><br>③ ②のメッセージリンクを①のリンク列に追加</p><p><img src="/blog/powerautomate/resolve-infinite-loops-in-SharePoint-updates/image-7.png" alt="alt text"></p><p>上記において、無限トリガーループの警告メッセージが表示される場合には、フロー内での更新に対してもフローが起動してしまうことで、再度 SharePoint のアイテムが更新される状況になっていることが考えられます。<br><br></p><h3 id="事象の原因"><a href="#事象の原因" class="headerlink" title="事象の原因"></a>事象の原因</h3><p>無限トリガーループの原因は、トリガーで指定しているリスト（テーブル）と同一のリスト（テーブル）を更新する処理が入っているためです。</p><br>今回の場合、 例として挙げているフローは、フロー①の段階において、SharePoint 上で作成または更新がなされた際にフローが起動する状態を指定しています。すると、フローが起動した際に無条件で SharePoint のアイテムを更新するという状態になってしまうため、無限ループの動作が発生してしまいます。<p><br><br></p><h2 id="3-対策"><a href="#3-対策" class="headerlink" title="3. 対策"></a>3. 対策</h2><p>無限トリガーループを回避するためには、トリガーで指定しているリストと同一のリストを更新するアクションを避けるか、適切な条件を設定して無限ループを防止する必要があります。<br><br></p><h3 id="アイテム作成時のみのトリガーで要件を満たせる場合（-SharePoint-リストアイテムの更新ではフローをトリガーする必要がない場合）"><a href="#アイテム作成時のみのトリガーで要件を満たせる場合（-SharePoint-リストアイテムの更新ではフローをトリガーする必要がない場合）" class="headerlink" title="アイテム作成時のみのトリガーで要件を満たせる場合（ SharePoint リストアイテムの更新ではフローをトリガーする必要がない場合）"></a>アイテム作成時のみのトリガーで要件を満たせる場合（ SharePoint リストアイテムの更新ではフローをトリガーする必要がない場合）</h3><p>下記の画像のように、①の段階で、<strong>「アイテムが作成または変更されたとき」</strong> のトリガーではなく、<strong>「項目が作成されたとき」</strong> という SharePoint のトリガーをご使用いただくと、当該の警告事象は起こらずにご利用いただけます。</p><p><img src="/blog/powerautomate/resolve-infinite-loops-in-SharePoint-updates/image-4.png" alt="alt text"></p><p><br><br></p><h3 id="SharePoint-リストアイテムの作成、更新どちらでもトリガーを必要とする場合"><a href="#SharePoint-リストアイテムの作成、更新どちらでもトリガーを必要とする場合" class="headerlink" title="SharePoint リストアイテムの作成、更新どちらでもトリガーを必要とする場合"></a>SharePoint リストアイテムの作成、更新どちらでもトリガーを必要とする場合</h3><p>対策の手順は主に2つです。</p><p><strong>①〈 SharePoint コネクタのアクション : 「アイテムやファイルの変更を取得する(プロパティのみ)」の追加〉</strong></p><p>既存のフローに SharePoint コネクタ の「アイテムやファイルの変更を取得する(プロパティのみ)」のアクションを追加します。<br></p><p><img src="/blog/powerautomate/resolve-infinite-loops-in-SharePoint-updates/image-6.png" alt="alt text"></p><p>パラメーターの内容における設定例</p><ul><li>サイトのアドレスおよびリストやライブラリの名前 : 「アイテムが作成または変更されたとき」のアクション同じ SharePoint サイト・リスト を指定します。</li><li>ID : 動的コンテンツにて、 「アイテムが作成または変更されたとき」の ID を指定します。</li><li>以降 : 動的コンテンツにて、 「アイテムが作成または変更されたとき」の「ウィンドウ開始のトークンのトリガー」を指定します。</li><li>期限 : 動的コンテンツにて、「アイテムが作成または変更されたとき」の「ウィンドウ終了のトークンのトリガー」を指定します。</li></ul><p><br><br></p><p><strong>②〈条件分岐の追加〉</strong>　<br><br>次に条件分岐を追加します。<br>リンクが更新された場合には Teams に投稿をせず、新規作成またはそれ以外の列が更新された場合には Teams に投稿をする、という条件を作成します。</p><p><img src="/blog/powerautomate/resolve-infinite-loops-in-SharePoint-updates/image-3.png" alt="alt text"></p><p>パラメーターの内容における設定例</p><ul><li>左辺： 「アイテムやファイルの変更を取得する(プロパティのみ)」の動的コンテンツより、SharePoint のリンクを格納している列に該当するものを取得し設定します。</li><li>中央：is equal to (に等しい)</li><li>右辺：false</li></ul><p>上記の条件の場合、Teams に投稿以降のアクションを条件分岐の True (はい)側に含めるようにご設定ください。</p><p>また、トリガー条件を追加することで、無限トリガーループを回避することもできます。例えば、今回の場合、Link列が設定されていない場合にのみフローを起動するような条件を追加することがこれにあてはまります。トリガー条件の設定の仕方詳細は次のブログを参考にしてください。<a href="https://jpdynamicscrm.github.io/blog/powerautomate/cloudflow-trigger-condition/">トリガー条件の設定の仕方詳細</a></p><br><p>参考URL<br><a href="https://learn.microsoft.com/en-us/connectors/sharepointonline/#get-changes-for-an-item-or-a-file-(properties-only)">https://learn.microsoft.com/en-us/connectors/sharepointonline/#get-changes-for-an-item-or-a-file-(properties-only)</a></p><br><div class="alert is-info"><p class="alert-title">Note</p><p>なお、フロー編集画面での警告は本変更実施後も表示される可能性はありますが、対策の実行により、無限ループは発生せず、フローの動作は問題ないことが確認できました。</p></div><p><br><br></p><h2 id="最後に"><a href="#最後に" class="headerlink" title="最後に"></a>最後に</h2><p>本記事がご利用の皆様のお役に立てましたら幸いです。ご不明な点などがございましたら、弊社サポート一同にてお待ち申し上げておりますので、ぜひお気軽にお問合せください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは。Power Platform サポートチームの トテ です。&lt;br&gt;今回は、 Power Automate のフローで無限トリガーループが起きる際の対処法についてご紹介します。&lt;/p&gt;</summary>
    
    
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/"/>
    
    <category term="Cloud flow" scheme="https://jpdynamicscrm.github.io/blog/categories/Power-Automate/Cloud-flow/"/>
    
    
    <category term="Power Platform" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Platform/"/>
    
    <category term="Power Automate" scheme="https://jpdynamicscrm.github.io/blog/tags/Power-Automate/"/>
    
  </entry>
  
</feed>
